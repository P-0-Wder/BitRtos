ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"shell_port.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.user_shell_write,"ax",%progbits
  22              		.align	2
  23              		.global	user_shell_write
  24              		.thumb
  25              		.thumb_func
  27              	user_shell_write:
  28              	.LFB124:
  29              		.file 1 "Dsp/letter_shell/shell_port.c"
   1:Dsp/letter_shell/shell_port.c **** #include "shell.h"
   2:Dsp/letter_shell/shell_port.c **** #include <stdio.h>
   3:Dsp/letter_shell/shell_port.c **** #include "stm32f4xx.h"
   4:Dsp/letter_shell/shell_port.c **** #include "periph_serial.h"
   5:Dsp/letter_shell/shell_port.c **** #include "shell_port.h"
   6:Dsp/letter_shell/shell_port.c **** #include "stm32f4xx_usart.h"
   7:Dsp/letter_shell/shell_port.c **** #include "delay.h"
   8:Dsp/letter_shell/shell_port.c **** #include "periph_dma.h"
   9:Dsp/letter_shell/shell_port.c **** 
  10:Dsp/letter_shell/shell_port.c **** Shell shell;
  11:Dsp/letter_shell/shell_port.c **** char shell_buff[512];
  12:Dsp/letter_shell/shell_port.c **** int dma_shell_buf[40] = {0};
  13:Dsp/letter_shell/shell_port.c **** 
  14:Dsp/letter_shell/shell_port.c **** void user_shell_write(const int ch)
  15:Dsp/letter_shell/shell_port.c **** {	
  30              		.loc 1 15 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              	.LVL0:
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
  16:Dsp/letter_shell/shell_port.c **** 		dma_shell_buf[0] = ch;
  40              		.loc 1 16 0
  41 0002 094B     		ldr	r3, .L4
  42 0004 1860     		str	r0, [r3]
ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 2


  17:Dsp/letter_shell/shell_port.c **** 		Serial_DMA_SendBuff(Serial_1,1);
  43              		.loc 1 17 0
  44 0006 0121     		movs	r1, #1
  45 0008 0020     		movs	r0, #0
  46              	.LVL1:
  47 000a FFF7FEFF 		bl	Serial_DMA_SendBuff
  48              	.LVL2:
  18:Dsp/letter_shell/shell_port.c **** 		while(DMA_GetFlagStatus(DMA2_Stream7,DMA_FLAG_TCIF7) != RESET)
  49              		.loc 1 18 0
  50 000e 4FF02051 		mov	r1, #671088640
  51 0012 0648     		ldr	r0, .L4+4
  52 0014 FFF7FEFF 		bl	DMA_GetFlagStatus
  53              	.LVL3:
  54 0018 20B1     		cbz	r0, .L1
  19:Dsp/letter_shell/shell_port.c **** 		{
  20:Dsp/letter_shell/shell_port.c **** 			DMA_ClearFlag(DMA2_Stream7,DMA_FLAG_TCIF7);//清除DMA2_Steam7传输完成标志
  55              		.loc 1 20 0
  56 001a 4FF02051 		mov	r1, #671088640
  57 001e 0348     		ldr	r0, .L4+4
  58 0020 FFF7FEFF 		bl	DMA_ClearFlag
  59              	.LVL4:
  60              	.L1:
  61 0024 08BD     		pop	{r3, pc}
  62              	.L5:
  63 0026 00BF     		.align	2
  64              	.L4:
  65 0028 00000000 		.word	.LANCHOR0
  66 002c B8640240 		.word	1073898680
  67              		.cfi_endproc
  68              	.LFE124:
  70              		.section	.text.user_printf_shell,"ax",%progbits
  71              		.align	2
  72              		.global	user_printf_shell
  73              		.thumb
  74              		.thumb_func
  76              	user_printf_shell:
  77              	.LFB125:
  21:Dsp/letter_shell/shell_port.c **** 			break;
  22:Dsp/letter_shell/shell_port.c **** 		}
  23:Dsp/letter_shell/shell_port.c **** }
  24:Dsp/letter_shell/shell_port.c **** 
  25:Dsp/letter_shell/shell_port.c **** /*can print the characters to the terminal with this function */
  26:Dsp/letter_shell/shell_port.c **** void user_printf_shell(const int *ch,...)
  27:Dsp/letter_shell/shell_port.c **** {
  78              		.loc 1 27 0
  79              		.cfi_startproc
  80              		@ args = 4, pretend = 16, frame = 0
  81              		@ frame_needed = 0, uses_anonymous_args = 1
  82              	.LVL5:
  83 0000 0FB4     		push	{r0, r1, r2, r3}
  84              	.LCFI1:
  85              		.cfi_def_cfa_offset 16
  86              		.cfi_offset 0, -16
  87              		.cfi_offset 1, -12
  88              		.cfi_offset 2, -8
  89              		.cfi_offset 3, -4
  90 0002 08B5     		push	{r3, lr}
ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 3


  91              	.LCFI2:
  92              		.cfi_def_cfa_offset 24
  93              		.cfi_offset 3, -24
  94              		.cfi_offset 14, -20
  28:Dsp/letter_shell/shell_port.c **** 	shellWriteString(&shell,ch);
  95              		.loc 1 28 0
  96 0004 0299     		ldr	r1, [sp, #8]
  97 0006 0348     		ldr	r0, .L8
  98 0008 FFF7FEFF 		bl	shellWriteString
  99              	.LVL6:
  29:Dsp/letter_shell/shell_port.c **** }
 100              		.loc 1 29 0
 101 000c BDE80840 		pop	{r3, lr}
 102              	.LCFI3:
 103              		.cfi_restore 14
 104              		.cfi_restore 3
 105              		.cfi_def_cfa_offset 16
 106 0010 04B0     		add	sp, sp, #16
 107              	.LCFI4:
 108              		.cfi_restore 3
 109              		.cfi_restore 2
 110              		.cfi_restore 1
 111              		.cfi_restore 0
 112              		.cfi_def_cfa_offset 0
 113 0012 7047     		bx	lr
 114              	.L9:
 115              		.align	2
 116              	.L8:
 117 0014 00000000 		.word	shell
 118              		.cfi_endproc
 119              	.LFE125:
 121              		.section	.text.bt_printf,"ax",%progbits
 122              		.align	2
 123              		.global	bt_printf
 124              		.thumb
 125              		.thumb_func
 127              	bt_printf:
 128              	.LFB126:
  30:Dsp/letter_shell/shell_port.c **** 
  31:Dsp/letter_shell/shell_port.c **** void bt_printf(const char *fmt, ...)
  32:Dsp/letter_shell/shell_port.c **** {
 129              		.loc 1 32 0
 130              		.cfi_startproc
 131              		@ args = 4, pretend = 16, frame = 8
 132              		@ frame_needed = 0, uses_anonymous_args = 1
 133              	.LVL7:
 134 0000 0FB4     		push	{r0, r1, r2, r3}
 135              	.LCFI5:
 136              		.cfi_def_cfa_offset 16
 137              		.cfi_offset 0, -16
 138              		.cfi_offset 1, -12
 139              		.cfi_offset 2, -8
 140              		.cfi_offset 3, -4
 141 0002 10B5     		push	{r4, lr}
 142              	.LCFI6:
 143              		.cfi_def_cfa_offset 24
 144              		.cfi_offset 4, -24
ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 4


 145              		.cfi_offset 14, -20
 146 0004 82B0     		sub	sp, sp, #8
 147              	.LCFI7:
 148              		.cfi_def_cfa_offset 32
 149 0006 04AB     		add	r3, sp, #16
 150 0008 53F8042B 		ldr	r2, [r3], #4
 151              	.LVL8:
  33:Dsp/letter_shell/shell_port.c **** 	va_list args;
  34:Dsp/letter_shell/shell_port.c **** 	static char bt_log_buf[128];
  35:Dsp/letter_shell/shell_port.c **** 	int i = 0;
  36:Dsp/letter_shell/shell_port.c **** 	int x = 0;
  37:Dsp/letter_shell/shell_port.c **** 	va_start(args,fmt);
 152              		.loc 1 37 0
 153 000c 0193     		str	r3, [sp, #4]
  38:Dsp/letter_shell/shell_port.c **** 
  39:Dsp/letter_shell/shell_port.c **** 
  40:Dsp/letter_shell/shell_port.c **** 	vsnprintf(bt_log_buf,sizeof(bt_log_buf)-1,fmt,args);
 154              		.loc 1 40 0
 155 000e 064C     		ldr	r4, .L12
 156 0010 7F21     		movs	r1, #127
 157 0012 2046     		mov	r0, r4
 158 0014 FFF7FEFF 		bl	vsnprintf
 159              	.LVL9:
  41:Dsp/letter_shell/shell_port.c **** 	user_printf_shell(bt_log_buf);
 160              		.loc 1 41 0
 161 0018 2046     		mov	r0, r4
 162 001a FFF7FEFF 		bl	user_printf_shell
 163              	.LVL10:
  42:Dsp/letter_shell/shell_port.c **** 	va_end(args);
  43:Dsp/letter_shell/shell_port.c **** }
 164              		.loc 1 43 0
 165 001e 02B0     		add	sp, sp, #8
 166              	.LCFI8:
 167              		.cfi_def_cfa_offset 24
 168              		@ sp needed
 169 0020 BDE81040 		pop	{r4, lr}
 170              	.LCFI9:
 171              		.cfi_restore 14
 172              		.cfi_restore 4
 173              		.cfi_def_cfa_offset 16
 174 0024 04B0     		add	sp, sp, #16
 175              	.LCFI10:
 176              		.cfi_restore 3
 177              		.cfi_restore 2
 178              		.cfi_restore 1
 179              		.cfi_restore 0
 180              		.cfi_def_cfa_offset 0
 181 0026 7047     		bx	lr
 182              	.L13:
 183              		.align	2
 184              	.L12:
 185 0028 00000000 		.word	.LANCHOR1
 186              		.cfi_endproc
 187              	.LFE126:
 189              		.section	.text.Shell_Init,"ax",%progbits
 190              		.align	2
 191              		.global	Shell_Init
ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 5


 192              		.thumb
 193              		.thumb_func
 195              	Shell_Init:
 196              	.LFB127:
  44:Dsp/letter_shell/shell_port.c **** 
  45:Dsp/letter_shell/shell_port.c **** void Shell_Init(void)
  46:Dsp/letter_shell/shell_port.c **** {
 197              		.loc 1 46 0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 0
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201 0000 08B5     		push	{r3, lr}
 202              	.LCFI11:
 203              		.cfi_def_cfa_offset 8
 204              		.cfi_offset 3, -8
 205              		.cfi_offset 14, -4
  47:Dsp/letter_shell/shell_port.c **** 	shell.write = user_shell_write;
 206              		.loc 1 47 0
 207 0002 0448     		ldr	r0, .L16
 208 0004 044B     		ldr	r3, .L16+4
 209 0006 8366     		str	r3, [r0, #104]
  48:Dsp/letter_shell/shell_port.c **** 	
  49:Dsp/letter_shell/shell_port.c **** 	shellInit(&shell,shell_buff,512);
 210              		.loc 1 49 0
 211 0008 4FF40072 		mov	r2, #512
 212 000c 0349     		ldr	r1, .L16+8
 213 000e FFF7FEFF 		bl	shellInit
 214              	.LVL11:
 215 0012 08BD     		pop	{r3, pc}
 216              	.L17:
 217              		.align	2
 218              	.L16:
 219 0014 00000000 		.word	shell
 220 0018 00000000 		.word	user_shell_write
 221 001c 00000000 		.word	shell_buff
 222              		.cfi_endproc
 223              	.LFE127:
 225              		.global	dma_shell_buf
 226              		.comm	shell_buff,512,4
 227              		.comm	shell,108,4
 228              		.section	.bss.bt_log_buf.8979,"aw",%nobits
 229              		.align	2
 230              		.set	.LANCHOR1,. + 0
 233              	bt_log_buf.8979:
 234 0000 00000000 		.space	128
 234      00000000 
 234      00000000 
 234      00000000 
 234      00000000 
 235              		.section	.bss.dma_shell_buf,"aw",%nobits
 236              		.align	2
 237              		.set	.LANCHOR0,. + 0
 240              	dma_shell_buf:
 241 0000 00000000 		.space	160
 241      00000000 
 241      00000000 
 241      00000000 
ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 6


 241      00000000 
 242              		.text
 243              	.Letext0:
 244              		.file 2 "Dsp/letter_shell/shell.h"
 245              		.file 3 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\machine\\_default_types.h"
 246              		.file 4 "d:\\gcc_arm\\5.4 2016q3\\lib\\gcc\\arm-none-eabi\\5.4.1\\include\\stdarg.h"
 247              		.file 5 "<built-in>"
 248              		.file 6 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\stdio.h"
 249              		.file 7 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\sys\\_stdint.h"
 250              		.file 8 "USER/stm32f4xx.h"
 251              		.file 9 "Bsp/periph_serial.h"
 252              		.file 10 "F4_CORE/core_cm4.h"
 253              		.file 11 "FWLIB/inc/stm32f4xx_dma.h"
ARM GAS  C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 shell_port.c
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:22     .text.user_shell_write:00000000 $t
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:27     .text.user_shell_write:00000000 user_shell_write
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:65     .text.user_shell_write:00000028 $d
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:71     .text.user_printf_shell:00000000 $t
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:76     .text.user_printf_shell:00000000 user_printf_shell
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:117    .text.user_printf_shell:00000014 $d
                            *COM*:0000006c shell
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:122    .text.bt_printf:00000000 $t
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:127    .text.bt_printf:00000000 bt_printf
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:185    .text.bt_printf:00000028 $d
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:190    .text.Shell_Init:00000000 $t
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:195    .text.Shell_Init:00000000 Shell_Init
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:219    .text.Shell_Init:00000014 $d
                            *COM*:00000200 shell_buff
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:240    .bss.dma_shell_buf:00000000 dma_shell_buf
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:229    .bss.bt_log_buf.8979:00000000 $d
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:233    .bss.bt_log_buf.8979:00000000 bt_log_buf.8979
C:\Users\why\AppData\Local\Temp\ccLQR1Eh.s:236    .bss.dma_shell_buf:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
Serial_DMA_SendBuff
DMA_GetFlagStatus
DMA_ClearFlag
shellWriteString
vsnprintf
shellInit
