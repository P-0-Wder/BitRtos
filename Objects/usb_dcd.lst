ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"usb_dcd.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.DCD_Init,"ax",%progbits
  22              		.align	2
  23              		.global	DCD_Init
  24              		.thumb
  25              		.thumb_func
  27              	DCD_Init:
  28              	.LFB124:
  29              		.file 1 "USB/core/usb_dcd.c"
   1:USB/core/usb_dcd.c **** /**
   2:USB/core/usb_dcd.c ****   ******************************************************************************
   3:USB/core/usb_dcd.c ****   * @file    usb_dcd.c
   4:USB/core/usb_dcd.c ****   * @author  MCD Application Team
   5:USB/core/usb_dcd.c ****   * @version V2.1.0
   6:USB/core/usb_dcd.c ****   * @date    19-March-2012
   7:USB/core/usb_dcd.c ****   * @brief   Peripheral Device Interface Layer
   8:USB/core/usb_dcd.c ****   ******************************************************************************
   9:USB/core/usb_dcd.c ****   * @attention
  10:USB/core/usb_dcd.c ****   *
  11:USB/core/usb_dcd.c ****   * <h2><center>&copy; COPYRIGHT 2012 STMicroelectronics</center></h2>
  12:USB/core/usb_dcd.c ****   *
  13:USB/core/usb_dcd.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  14:USB/core/usb_dcd.c ****   * You may not use this file except in compliance with the License.
  15:USB/core/usb_dcd.c ****   * You may obtain a copy of the License at:
  16:USB/core/usb_dcd.c ****   *
  17:USB/core/usb_dcd.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
  18:USB/core/usb_dcd.c ****   *
  19:USB/core/usb_dcd.c ****   * Unless required by applicable law or agreed to in writing, software 
  20:USB/core/usb_dcd.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
  21:USB/core/usb_dcd.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  22:USB/core/usb_dcd.c ****   * See the License for the specific language governing permissions and
  23:USB/core/usb_dcd.c ****   * limitations under the License.
  24:USB/core/usb_dcd.c ****   *
  25:USB/core/usb_dcd.c ****   ******************************************************************************
  26:USB/core/usb_dcd.c ****   */
  27:USB/core/usb_dcd.c **** 
  28:USB/core/usb_dcd.c **** /* Includes ------------------------------------------------------------------*/
  29:USB/core/usb_dcd.c **** #include "usb_dcd.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 2


  30:USB/core/usb_dcd.c **** #include "usb_bsp.h"
  31:USB/core/usb_dcd.c **** 
  32:USB/core/usb_dcd.c **** 
  33:USB/core/usb_dcd.c **** /** @addtogroup USB_OTG_DRIVER
  34:USB/core/usb_dcd.c **** * @{
  35:USB/core/usb_dcd.c **** */
  36:USB/core/usb_dcd.c **** 
  37:USB/core/usb_dcd.c **** /** @defgroup USB_DCD 
  38:USB/core/usb_dcd.c **** * @brief This file is the interface between EFSL ans Host mass-storage class
  39:USB/core/usb_dcd.c **** * @{
  40:USB/core/usb_dcd.c **** */
  41:USB/core/usb_dcd.c **** 
  42:USB/core/usb_dcd.c **** 
  43:USB/core/usb_dcd.c **** /** @defgroup USB_DCD_Private_Defines
  44:USB/core/usb_dcd.c **** * @{
  45:USB/core/usb_dcd.c **** */ 
  46:USB/core/usb_dcd.c **** /**
  47:USB/core/usb_dcd.c **** * @}
  48:USB/core/usb_dcd.c **** */ 
  49:USB/core/usb_dcd.c **** 
  50:USB/core/usb_dcd.c **** 
  51:USB/core/usb_dcd.c **** /** @defgroup USB_DCD_Private_TypesDefinitions
  52:USB/core/usb_dcd.c **** * @{
  53:USB/core/usb_dcd.c **** */ 
  54:USB/core/usb_dcd.c **** /**
  55:USB/core/usb_dcd.c **** * @}
  56:USB/core/usb_dcd.c **** */ 
  57:USB/core/usb_dcd.c **** 
  58:USB/core/usb_dcd.c **** 
  59:USB/core/usb_dcd.c **** 
  60:USB/core/usb_dcd.c **** /** @defgroup USB_DCD_Private_Macros
  61:USB/core/usb_dcd.c **** * @{
  62:USB/core/usb_dcd.c **** */ 
  63:USB/core/usb_dcd.c **** /**
  64:USB/core/usb_dcd.c **** * @}
  65:USB/core/usb_dcd.c **** */ 
  66:USB/core/usb_dcd.c **** 
  67:USB/core/usb_dcd.c **** 
  68:USB/core/usb_dcd.c **** /** @defgroup USB_DCD_Private_Variables
  69:USB/core/usb_dcd.c **** * @{
  70:USB/core/usb_dcd.c **** */ 
  71:USB/core/usb_dcd.c **** /**
  72:USB/core/usb_dcd.c **** * @}
  73:USB/core/usb_dcd.c **** */ 
  74:USB/core/usb_dcd.c **** 
  75:USB/core/usb_dcd.c **** 
  76:USB/core/usb_dcd.c **** /** @defgroup USB_DCD_Private_FunctionPrototypes
  77:USB/core/usb_dcd.c **** * @{
  78:USB/core/usb_dcd.c **** */ 
  79:USB/core/usb_dcd.c **** 
  80:USB/core/usb_dcd.c **** /**
  81:USB/core/usb_dcd.c **** * @}
  82:USB/core/usb_dcd.c **** */ 
  83:USB/core/usb_dcd.c **** 
  84:USB/core/usb_dcd.c **** 
  85:USB/core/usb_dcd.c **** /** @defgroup USB_DCD_Private_Functions
  86:USB/core/usb_dcd.c **** * @{
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 3


  87:USB/core/usb_dcd.c **** */ 
  88:USB/core/usb_dcd.c **** 
  89:USB/core/usb_dcd.c **** 
  90:USB/core/usb_dcd.c **** 
  91:USB/core/usb_dcd.c **** void DCD_Init(USB_OTG_CORE_HANDLE *pdev , 
  92:USB/core/usb_dcd.c ****               USB_OTG_CORE_ID_TypeDef coreID)
  93:USB/core/usb_dcd.c **** {
  30              		.loc 1 93 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              	.LVL0:
  35 0000 38B5     		push	{r3, r4, r5, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 3, -16
  39              		.cfi_offset 4, -12
  40              		.cfi_offset 5, -8
  41              		.cfi_offset 14, -4
  42 0002 0446     		mov	r4, r0
  94:USB/core/usb_dcd.c ****   uint32_t i;
  95:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
  96:USB/core/usb_dcd.c ****   
  97:USB/core/usb_dcd.c ****   USB_OTG_SelectCore (pdev , coreID);
  43              		.loc 1 97 0
  44 0004 FFF7FEFF 		bl	USB_OTG_SelectCore
  45              	.LVL1:
  98:USB/core/usb_dcd.c ****   
  99:USB/core/usb_dcd.c ****   pdev->dev.device_status = USB_OTG_DEFAULT;
  46              		.loc 1 99 0
  47 0008 0123     		movs	r3, #1
  48 000a 84F81231 		strb	r3, [r4, #274]
 100:USB/core/usb_dcd.c ****   pdev->dev.device_address = 0;
  49              		.loc 1 100 0
  50 000e 0022     		movs	r2, #0
  51 0010 84F81421 		strb	r2, [r4, #276]
  52              	.LVL2:
 101:USB/core/usb_dcd.c ****   
 102:USB/core/usb_dcd.c ****   /* Init ep structure */
 103:USB/core/usb_dcd.c ****   for (i = 0; i < pdev->cfg.dev_endpoints ; i++)
  53              		.loc 1 103 0
  54 0014 15E0     		b	.L2
  55              	.LVL3:
  56              	.L3:
 104:USB/core/usb_dcd.c ****   {
 105:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[i];
 106:USB/core/usb_dcd.c ****     /* Init ep structure */
 107:USB/core/usb_dcd.c ****     ep->is_in = 1;
  57              		.loc 1 107 0 discriminator 3
  58 0016 9100     		lsls	r1, r2, #2
  59 0018 1144     		add	r1, r1, r2
  60 001a CB00     		lsls	r3, r1, #3
  61 001c 2344     		add	r3, r3, r4
  62 001e 0121     		movs	r1, #1
  63 0020 83F81D11 		strb	r1, [r3, #285]
 108:USB/core/usb_dcd.c ****     ep->num = i;
  64              		.loc 1 108 0 discriminator 3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 4


  65 0024 83F81C21 		strb	r2, [r3, #284]
 109:USB/core/usb_dcd.c ****     ep->tx_fifo_num = i;
  66              		.loc 1 109 0 discriminator 3
  67 0028 A3F82221 		strh	r2, [r3, #290]	@ movhi
 110:USB/core/usb_dcd.c ****     /* Control until ep is actvated */
 111:USB/core/usb_dcd.c ****     ep->type = EP_TYPE_CTRL;
  68              		.loc 1 111 0 discriminator 3
  69 002c 0021     		movs	r1, #0
  70 002e 83F81F11 		strb	r1, [r3, #287]
 112:USB/core/usb_dcd.c ****     ep->maxpacket =  USB_OTG_MAX_EP0_SIZE;
  71              		.loc 1 112 0 discriminator 3
  72 0032 4020     		movs	r0, #64
  73 0034 C3F82401 		str	r0, [r3, #292]
 113:USB/core/usb_dcd.c ****     ep->xfer_buff = 0;
  74              		.loc 1 113 0 discriminator 3
  75 0038 C3F82811 		str	r1, [r3, #296]
 114:USB/core/usb_dcd.c ****     ep->xfer_len = 0;
  76              		.loc 1 114 0 discriminator 3
  77 003c C3F83011 		str	r1, [r3, #304]
 103:USB/core/usb_dcd.c ****   {
  78              		.loc 1 103 0 discriminator 3
  79 0040 0132     		adds	r2, r2, #1
  80              	.LVL4:
  81              	.L2:
 103:USB/core/usb_dcd.c ****   {
  82              		.loc 1 103 0 is_stmt 0 discriminator 1
  83 0042 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
  84 0044 8242     		cmp	r2, r0
  85 0046 E6D3     		bcc	.L3
  86 0048 0022     		movs	r2, #0
  87              	.LVL5:
  88 004a 14E0     		b	.L4
  89              	.LVL6:
  90              	.L5:
 115:USB/core/usb_dcd.c ****   }
 116:USB/core/usb_dcd.c ****   
 117:USB/core/usb_dcd.c ****   for (i = 0; i < pdev->cfg.dev_endpoints; i++)
 118:USB/core/usb_dcd.c ****   {
 119:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[i];
 120:USB/core/usb_dcd.c ****     /* Init ep structure */
 121:USB/core/usb_dcd.c ****     ep->is_in = 0;
  91              		.loc 1 121 0 is_stmt 1 discriminator 3
  92 004c 9100     		lsls	r1, r2, #2
  93 004e 1144     		add	r1, r1, r2
  94 0050 CB00     		lsls	r3, r1, #3
  95 0052 2344     		add	r3, r3, r4
  96 0054 0021     		movs	r1, #0
  97 0056 83F87513 		strb	r1, [r3, #885]
 122:USB/core/usb_dcd.c ****     ep->num = i;
  98              		.loc 1 122 0 discriminator 3
  99 005a 83F87423 		strb	r2, [r3, #884]
 123:USB/core/usb_dcd.c ****     ep->tx_fifo_num = i;
 100              		.loc 1 123 0 discriminator 3
 101 005e A3F87A23 		strh	r2, [r3, #890]	@ movhi
 124:USB/core/usb_dcd.c ****     /* Control until ep is activated */
 125:USB/core/usb_dcd.c ****     ep->type = EP_TYPE_CTRL;
 102              		.loc 1 125 0 discriminator 3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 5


 103 0062 83F87713 		strb	r1, [r3, #887]
 126:USB/core/usb_dcd.c ****     ep->maxpacket = USB_OTG_MAX_EP0_SIZE;
 104              		.loc 1 126 0 discriminator 3
 105 0066 4025     		movs	r5, #64
 106 0068 C3F87C53 		str	r5, [r3, #892]
 127:USB/core/usb_dcd.c ****     ep->xfer_buff = 0;
 107              		.loc 1 127 0 discriminator 3
 108 006c C3F88013 		str	r1, [r3, #896]
 128:USB/core/usb_dcd.c ****     ep->xfer_len = 0;
 109              		.loc 1 128 0 discriminator 3
 110 0070 C3F88813 		str	r1, [r3, #904]
 117:USB/core/usb_dcd.c ****   {
 111              		.loc 1 117 0 discriminator 3
 112 0074 0132     		adds	r2, r2, #1
 113              	.LVL7:
 114              	.L4:
 117:USB/core/usb_dcd.c ****   {
 115              		.loc 1 117 0 is_stmt 0 discriminator 1
 116 0076 8242     		cmp	r2, r0
 117 0078 E8D3     		bcc	.L5
 129:USB/core/usb_dcd.c ****   }
 130:USB/core/usb_dcd.c ****   
 131:USB/core/usb_dcd.c ****   USB_OTG_DisableGlobalInt(pdev);
 118              		.loc 1 131 0 is_stmt 1
 119 007a 2046     		mov	r0, r4
 120 007c FFF7FEFF 		bl	USB_OTG_DisableGlobalInt
 121              	.LVL8:
 132:USB/core/usb_dcd.c ****   
 133:USB/core/usb_dcd.c ****   /*Init the Core (common init.) */
 134:USB/core/usb_dcd.c ****   USB_OTG_CoreInit(pdev);
 122              		.loc 1 134 0
 123 0080 2046     		mov	r0, r4
 124 0082 FFF7FEFF 		bl	USB_OTG_CoreInit
 125              	.LVL9:
 135:USB/core/usb_dcd.c **** 
 136:USB/core/usb_dcd.c **** 
 137:USB/core/usb_dcd.c ****   /* Force Device Mode*/
 138:USB/core/usb_dcd.c ****   USB_OTG_SetCurrentMode(pdev, DEVICE_MODE);
 126              		.loc 1 138 0
 127 0086 0021     		movs	r1, #0
 128 0088 2046     		mov	r0, r4
 129 008a FFF7FEFF 		bl	USB_OTG_SetCurrentMode
 130              	.LVL10:
 139:USB/core/usb_dcd.c ****   
 140:USB/core/usb_dcd.c ****   /* Init Device */
 141:USB/core/usb_dcd.c ****   USB_OTG_CoreInitDev(pdev);
 131              		.loc 1 141 0
 132 008e 2046     		mov	r0, r4
 133 0090 FFF7FEFF 		bl	USB_OTG_CoreInitDev
 134              	.LVL11:
 142:USB/core/usb_dcd.c ****   
 143:USB/core/usb_dcd.c ****   
 144:USB/core/usb_dcd.c ****   /* Enable USB Global interrupt */
 145:USB/core/usb_dcd.c ****   USB_OTG_EnableGlobalInt(pdev);
 135              		.loc 1 145 0
 136 0094 2046     		mov	r0, r4
 137 0096 FFF7FEFF 		bl	USB_OTG_EnableGlobalInt
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 6


 138              	.LVL12:
 139 009a 38BD     		pop	{r3, r4, r5, pc}
 140              		.cfi_endproc
 141              	.LFE124:
 143              		.section	.text.DCD_EP_Open,"ax",%progbits
 144              		.align	2
 145              		.global	DCD_EP_Open
 146              		.thumb
 147              		.thumb_func
 149              	DCD_EP_Open:
 150              	.LFB125:
 146:USB/core/usb_dcd.c **** }
 147:USB/core/usb_dcd.c **** 
 148:USB/core/usb_dcd.c **** 
 149:USB/core/usb_dcd.c **** /**
 150:USB/core/usb_dcd.c **** * @brief  Configure an EP
 151:USB/core/usb_dcd.c **** * @param pdev : Device instance
 152:USB/core/usb_dcd.c **** * @param epdesc : Endpoint Descriptor
 153:USB/core/usb_dcd.c **** * @retval : status
 154:USB/core/usb_dcd.c **** */
 155:USB/core/usb_dcd.c **** uint32_t DCD_EP_Open(USB_OTG_CORE_HANDLE *pdev , 
 156:USB/core/usb_dcd.c ****                      uint8_t ep_addr,
 157:USB/core/usb_dcd.c ****                      uint16_t ep_mps,
 158:USB/core/usb_dcd.c ****                      uint8_t ep_type)
 159:USB/core/usb_dcd.c **** {
 151              		.loc 1 159 0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              	.LVL13:
 156 0000 70B5     		push	{r4, r5, r6, lr}
 157              	.LCFI1:
 158              		.cfi_def_cfa_offset 16
 159              		.cfi_offset 4, -16
 160              		.cfi_offset 5, -12
 161              		.cfi_offset 6, -8
 162              		.cfi_offset 14, -4
 160:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 161:USB/core/usb_dcd.c ****   
 162:USB/core/usb_dcd.c ****   if ((ep_addr & 0x80) == 0x80)
 163              		.loc 1 162 0
 164 0002 4DB2     		sxtb	r5, r1
 165 0004 002D     		cmp	r5, #0
 166 0006 09DA     		bge	.L8
 163:USB/core/usb_dcd.c ****   {
 164:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[ep_addr & 0x7F];
 167              		.loc 1 164 0
 168 0008 01F07F06 		and	r6, r1, #127
 169 000c 06EB8606 		add	r6, r6, r6, lsl #2
 170 0010 F400     		lsls	r4, r6, #3
 171 0012 04F58C74 		add	r4, r4, #280
 172 0016 0444     		add	r4, r4, r0
 173 0018 0434     		adds	r4, r4, #4
 174              	.LVL14:
 175 001a 08E0     		b	.L9
 176              	.LVL15:
 177              	.L8:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 7


 165:USB/core/usb_dcd.c ****   }
 166:USB/core/usb_dcd.c ****   else
 167:USB/core/usb_dcd.c ****   {
 168:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[ep_addr & 0x7F];
 178              		.loc 1 168 0
 179 001c 01F07F06 		and	r6, r1, #127
 180 0020 06EB8606 		add	r6, r6, r6, lsl #2
 181 0024 F400     		lsls	r4, r6, #3
 182 0026 04F55C74 		add	r4, r4, #880
 183 002a 0444     		add	r4, r4, r0
 184 002c 0434     		adds	r4, r4, #4
 185              	.LVL16:
 186              	.L9:
 169:USB/core/usb_dcd.c ****   }
 170:USB/core/usb_dcd.c ****   ep->num   = ep_addr & 0x7F;
 187              		.loc 1 170 0
 188 002e 01F07F01 		and	r1, r1, #127
 189              	.LVL17:
 190 0032 2170     		strb	r1, [r4]
 171:USB/core/usb_dcd.c ****   
 172:USB/core/usb_dcd.c ****   ep->is_in = (0x80 & ep_addr) != 0;
 191              		.loc 1 172 0
 192 0034 ED0F     		lsrs	r5, r5, #31
 193              	.LVL18:
 194 0036 6570     		strb	r5, [r4, #1]
 173:USB/core/usb_dcd.c ****   ep->maxpacket = ep_mps;
 195              		.loc 1 173 0
 196 0038 A260     		str	r2, [r4, #8]
 174:USB/core/usb_dcd.c ****   ep->type = ep_type;
 197              		.loc 1 174 0
 198 003a E370     		strb	r3, [r4, #3]
 175:USB/core/usb_dcd.c ****   if (ep->is_in)
 199              		.loc 1 175 0
 200 003c 05B1     		cbz	r5, .L10
 176:USB/core/usb_dcd.c ****   {
 177:USB/core/usb_dcd.c ****     /* Assign a Tx FIFO */
 178:USB/core/usb_dcd.c ****     ep->tx_fifo_num = ep->num;
 201              		.loc 1 178 0
 202 003e E180     		strh	r1, [r4, #6]	@ movhi
 203              	.L10:
 179:USB/core/usb_dcd.c ****   }
 180:USB/core/usb_dcd.c ****   /* Set initial data PID. */
 181:USB/core/usb_dcd.c ****   if (ep_type == USB_OTG_EP_BULK )
 204              		.loc 1 181 0
 205 0040 022B     		cmp	r3, #2
 206 0042 01D1     		bne	.L11
 182:USB/core/usb_dcd.c ****   {
 183:USB/core/usb_dcd.c ****     ep->data_pid_start = 0;
 207              		.loc 1 183 0
 208 0044 0023     		movs	r3, #0
 209              	.LVL19:
 210 0046 2371     		strb	r3, [r4, #4]
 211              	.L11:
 184:USB/core/usb_dcd.c ****   }
 185:USB/core/usb_dcd.c ****   USB_OTG_EPActivate(pdev , ep );
 212              		.loc 1 185 0
 213 0048 2146     		mov	r1, r4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 8


 214 004a FFF7FEFF 		bl	USB_OTG_EPActivate
 215              	.LVL20:
 186:USB/core/usb_dcd.c ****   return 0;
 187:USB/core/usb_dcd.c **** }
 216              		.loc 1 187 0
 217 004e 0020     		movs	r0, #0
 218 0050 70BD     		pop	{r4, r5, r6, pc}
 219              		.cfi_endproc
 220              	.LFE125:
 222 0052 00BF     		.section	.text.DCD_EP_Close,"ax",%progbits
 223              		.align	2
 224              		.global	DCD_EP_Close
 225              		.thumb
 226              		.thumb_func
 228              	DCD_EP_Close:
 229              	.LFB126:
 188:USB/core/usb_dcd.c **** /**
 189:USB/core/usb_dcd.c **** * @brief  called when an EP is disabled
 190:USB/core/usb_dcd.c **** * @param pdev: device instance
 191:USB/core/usb_dcd.c **** * @param ep_addr: endpoint address
 192:USB/core/usb_dcd.c **** * @retval : status
 193:USB/core/usb_dcd.c **** */
 194:USB/core/usb_dcd.c **** uint32_t DCD_EP_Close(USB_OTG_CORE_HANDLE *pdev , uint8_t  ep_addr)
 195:USB/core/usb_dcd.c **** {
 230              		.loc 1 195 0
 231              		.cfi_startproc
 232              		@ args = 0, pretend = 0, frame = 0
 233              		@ frame_needed = 0, uses_anonymous_args = 0
 234              	.LVL21:
 235 0000 10B5     		push	{r4, lr}
 236              	.LCFI2:
 237              		.cfi_def_cfa_offset 8
 238              		.cfi_offset 4, -8
 239              		.cfi_offset 14, -4
 196:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 197:USB/core/usb_dcd.c ****   
 198:USB/core/usb_dcd.c ****   if ((ep_addr&0x80) == 0x80)
 240              		.loc 1 198 0
 241 0002 4AB2     		sxtb	r2, r1
 242 0004 002A     		cmp	r2, #0
 243 0006 09DA     		bge	.L14
 199:USB/core/usb_dcd.c ****   {
 200:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[ep_addr & 0x7F];
 244              		.loc 1 200 0
 245 0008 01F07F04 		and	r4, r1, #127
 246 000c 04EB8404 		add	r4, r4, r4, lsl #2
 247 0010 E300     		lsls	r3, r4, #3
 248 0012 03F58C73 		add	r3, r3, #280
 249 0016 0344     		add	r3, r3, r0
 250 0018 0433     		adds	r3, r3, #4
 251              	.LVL22:
 252 001a 08E0     		b	.L15
 253              	.LVL23:
 254              	.L14:
 201:USB/core/usb_dcd.c ****   }
 202:USB/core/usb_dcd.c ****   else
 203:USB/core/usb_dcd.c ****   {
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 9


 204:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[ep_addr & 0x7F];
 255              		.loc 1 204 0
 256 001c 01F07F04 		and	r4, r1, #127
 257 0020 04EB8404 		add	r4, r4, r4, lsl #2
 258 0024 E300     		lsls	r3, r4, #3
 259 0026 03F55C73 		add	r3, r3, #880
 260 002a 0344     		add	r3, r3, r0
 261 002c 0433     		adds	r3, r3, #4
 262              	.LVL24:
 263              	.L15:
 205:USB/core/usb_dcd.c ****   }
 206:USB/core/usb_dcd.c ****   ep->num   = ep_addr & 0x7F;
 264              		.loc 1 206 0
 265 002e 01F07F01 		and	r1, r1, #127
 266              	.LVL25:
 267 0032 1970     		strb	r1, [r3]
 207:USB/core/usb_dcd.c ****   ep->is_in = (0x80 & ep_addr) != 0;
 268              		.loc 1 207 0
 269 0034 D20F     		lsrs	r2, r2, #31
 270              	.LVL26:
 271 0036 5A70     		strb	r2, [r3, #1]
 208:USB/core/usb_dcd.c ****   USB_OTG_EPDeactivate(pdev , ep );
 272              		.loc 1 208 0
 273 0038 1946     		mov	r1, r3
 274 003a FFF7FEFF 		bl	USB_OTG_EPDeactivate
 275              	.LVL27:
 209:USB/core/usb_dcd.c ****   return 0;
 210:USB/core/usb_dcd.c **** }
 276              		.loc 1 210 0
 277 003e 0020     		movs	r0, #0
 278 0040 10BD     		pop	{r4, pc}
 279              		.cfi_endproc
 280              	.LFE126:
 282 0042 00BF     		.section	.text.DCD_EP_PrepareRx,"ax",%progbits
 283              		.align	2
 284              		.global	DCD_EP_PrepareRx
 285              		.thumb
 286              		.thumb_func
 288              	DCD_EP_PrepareRx:
 289              	.LFB127:
 211:USB/core/usb_dcd.c **** 
 212:USB/core/usb_dcd.c **** 
 213:USB/core/usb_dcd.c **** /**
 214:USB/core/usb_dcd.c **** * @brief  DCD_EP_PrepareRx
 215:USB/core/usb_dcd.c **** * @param pdev: device instance
 216:USB/core/usb_dcd.c **** * @param ep_addr: endpoint address
 217:USB/core/usb_dcd.c **** * @param pbuf: pointer to Rx buffer
 218:USB/core/usb_dcd.c **** * @param buf_len: data length
 219:USB/core/usb_dcd.c **** * @retval : status
 220:USB/core/usb_dcd.c **** */
 221:USB/core/usb_dcd.c **** uint32_t   DCD_EP_PrepareRx( USB_OTG_CORE_HANDLE *pdev,
 222:USB/core/usb_dcd.c ****                             uint8_t   ep_addr,
 223:USB/core/usb_dcd.c ****                             uint8_t *pbuf,                        
 224:USB/core/usb_dcd.c ****                             uint16_t  buf_len)
 225:USB/core/usb_dcd.c **** {
 290              		.loc 1 225 0
 291              		.cfi_startproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 10


 292              		@ args = 0, pretend = 0, frame = 0
 293              		@ frame_needed = 0, uses_anonymous_args = 0
 294              	.LVL28:
 295 0000 70B5     		push	{r4, r5, r6, lr}
 296              	.LCFI3:
 297              		.cfi_def_cfa_offset 16
 298              		.cfi_offset 4, -16
 299              		.cfi_offset 5, -12
 300              		.cfi_offset 6, -8
 301              		.cfi_offset 14, -4
 302 0002 01F07F04 		and	r4, r1, #127
 226:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 227:USB/core/usb_dcd.c ****   
 228:USB/core/usb_dcd.c ****   ep = &pdev->dev.out_ep[ep_addr & 0x7F];
 303              		.loc 1 228 0
 304 0006 A600     		lsls	r6, r4, #2
 305 0008 3519     		adds	r5, r6, r4
 306 000a E900     		lsls	r1, r5, #3
 307              	.LVL29:
 308 000c 0D46     		mov	r5, r1
 309 000e 01F55C71 		add	r1, r1, #880
 310 0012 0144     		add	r1, r1, r0
 311 0014 0431     		adds	r1, r1, #4
 312              	.LVL30:
 229:USB/core/usb_dcd.c ****   
 230:USB/core/usb_dcd.c ****   /*setup and start the Xfer */
 231:USB/core/usb_dcd.c ****   ep->xfer_buff = pbuf;  
 313              		.loc 1 231 0
 314 0016 0544     		add	r5, r5, r0
 315 0018 C5F88023 		str	r2, [r5, #896]
 232:USB/core/usb_dcd.c ****   ep->xfer_len = buf_len;
 316              		.loc 1 232 0
 317 001c C5F88833 		str	r3, [r5, #904]
 233:USB/core/usb_dcd.c ****   ep->xfer_count = 0;
 318              		.loc 1 233 0
 319 0020 0023     		movs	r3, #0
 320              	.LVL31:
 321 0022 C5F88C33 		str	r3, [r5, #908]
 234:USB/core/usb_dcd.c ****   ep->is_in = 0;
 322              		.loc 1 234 0
 323 0026 85F87533 		strb	r3, [r5, #885]
 235:USB/core/usb_dcd.c ****   ep->num = ep_addr & 0x7F;
 324              		.loc 1 235 0
 325 002a 85F87443 		strb	r4, [r5, #884]
 236:USB/core/usb_dcd.c ****   
 237:USB/core/usb_dcd.c ****   if (pdev->cfg.dma_enable == 1)
 326              		.loc 1 237 0
 327 002e C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 328 0030 012B     		cmp	r3, #1
 329 0032 05D1     		bne	.L18
 238:USB/core/usb_dcd.c ****   {
 239:USB/core/usb_dcd.c ****     ep->dma_addr = (uint32_t)pbuf;  
 330              		.loc 1 239 0
 331 0034 04EB8405 		add	r5, r4, r4, lsl #2
 332 0038 EB00     		lsls	r3, r5, #3
 333 003a 0344     		add	r3, r3, r0
 334 003c C3F88423 		str	r2, [r3, #900]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 11


 335              	.L18:
 240:USB/core/usb_dcd.c ****   }
 241:USB/core/usb_dcd.c ****   
 242:USB/core/usb_dcd.c ****   if ( ep->num == 0 )
 336              		.loc 1 242 0
 337 0040 04EB8404 		add	r4, r4, r4, lsl #2
 338 0044 E300     		lsls	r3, r4, #3
 339 0046 0344     		add	r3, r3, r0
 340 0048 93F87433 		ldrb	r3, [r3, #884]	@ zero_extendqisi2
 341 004c 13B9     		cbnz	r3, .L19
 243:USB/core/usb_dcd.c ****   {
 244:USB/core/usb_dcd.c ****     USB_OTG_EP0StartXfer(pdev , ep);
 342              		.loc 1 244 0
 343 004e FFF7FEFF 		bl	USB_OTG_EP0StartXfer
 344              	.LVL32:
 345 0052 01E0     		b	.L20
 346              	.LVL33:
 347              	.L19:
 245:USB/core/usb_dcd.c ****   }
 246:USB/core/usb_dcd.c ****   else
 247:USB/core/usb_dcd.c ****   {
 248:USB/core/usb_dcd.c ****     USB_OTG_EPStartXfer(pdev, ep );
 348              		.loc 1 248 0
 349 0054 FFF7FEFF 		bl	USB_OTG_EPStartXfer
 350              	.LVL34:
 351              	.L20:
 249:USB/core/usb_dcd.c ****   }
 250:USB/core/usb_dcd.c ****   return 0;
 251:USB/core/usb_dcd.c **** }
 352              		.loc 1 251 0
 353 0058 0020     		movs	r0, #0
 354 005a 70BD     		pop	{r4, r5, r6, pc}
 355              		.cfi_endproc
 356              	.LFE127:
 358              		.section	.text.DCD_EP_Tx,"ax",%progbits
 359              		.align	2
 360              		.global	DCD_EP_Tx
 361              		.thumb
 362              		.thumb_func
 364              	DCD_EP_Tx:
 365              	.LFB128:
 252:USB/core/usb_dcd.c **** 
 253:USB/core/usb_dcd.c **** /**
 254:USB/core/usb_dcd.c **** * @brief  Transmit data over USB
 255:USB/core/usb_dcd.c **** * @param pdev: device instance
 256:USB/core/usb_dcd.c **** * @param ep_addr: endpoint address
 257:USB/core/usb_dcd.c **** * @param pbuf: pointer to Tx buffer
 258:USB/core/usb_dcd.c **** * @param buf_len: data length
 259:USB/core/usb_dcd.c **** * @retval : status
 260:USB/core/usb_dcd.c **** */
 261:USB/core/usb_dcd.c **** uint32_t  DCD_EP_Tx ( USB_OTG_CORE_HANDLE *pdev,
 262:USB/core/usb_dcd.c ****                      uint8_t   ep_addr,
 263:USB/core/usb_dcd.c ****                      uint8_t   *pbuf,
 264:USB/core/usb_dcd.c ****                      uint32_t   buf_len)
 265:USB/core/usb_dcd.c **** {
 366              		.loc 1 265 0
 367              		.cfi_startproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 12


 368              		@ args = 0, pretend = 0, frame = 0
 369              		@ frame_needed = 0, uses_anonymous_args = 0
 370              	.LVL35:
 371 0000 70B5     		push	{r4, r5, r6, lr}
 372              	.LCFI4:
 373              		.cfi_def_cfa_offset 16
 374              		.cfi_offset 4, -16
 375              		.cfi_offset 5, -12
 376              		.cfi_offset 6, -8
 377              		.cfi_offset 14, -4
 378 0002 01F07F05 		and	r5, r1, #127
 266:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 267:USB/core/usb_dcd.c ****   
 268:USB/core/usb_dcd.c ****   ep = &pdev->dev.in_ep[ep_addr & 0x7F];
 379              		.loc 1 268 0
 380 0006 AE00     		lsls	r6, r5, #2
 381 0008 7119     		adds	r1, r6, r5
 382              	.LVL36:
 383 000a CC00     		lsls	r4, r1, #3
 384 000c 04F58C74 		add	r4, r4, #280
 385 0010 0444     		add	r4, r4, r0
 386 0012 211D     		adds	r1, r4, #4
 387              	.LVL37:
 269:USB/core/usb_dcd.c ****   
 270:USB/core/usb_dcd.c ****   /* Setup and start the Transfer */
 271:USB/core/usb_dcd.c ****   ep->is_in = 1;
 388              		.loc 1 271 0
 389 0014 2E44     		add	r6, r6, r5
 390 0016 F400     		lsls	r4, r6, #3
 391 0018 0444     		add	r4, r4, r0
 392 001a 0126     		movs	r6, #1
 393 001c 84F81D61 		strb	r6, [r4, #285]
 272:USB/core/usb_dcd.c ****   ep->num = ep_addr & 0x7F;  
 394              		.loc 1 272 0
 395 0020 84F81C51 		strb	r5, [r4, #284]
 273:USB/core/usb_dcd.c ****   ep->xfer_buff = pbuf;
 396              		.loc 1 273 0
 397 0024 C4F82821 		str	r2, [r4, #296]
 274:USB/core/usb_dcd.c ****   ep->dma_addr = (uint32_t)pbuf;  
 398              		.loc 1 274 0
 399 0028 C4F82C21 		str	r2, [r4, #300]
 275:USB/core/usb_dcd.c ****   ep->xfer_count = 0;
 400              		.loc 1 275 0
 401 002c 0022     		movs	r2, #0
 402              	.LVL38:
 403 002e C4F83421 		str	r2, [r4, #308]
 276:USB/core/usb_dcd.c ****   ep->xfer_len  = buf_len;
 404              		.loc 1 276 0
 405 0032 C4F83031 		str	r3, [r4, #304]
 277:USB/core/usb_dcd.c ****   
 278:USB/core/usb_dcd.c ****   if ( ep->num == 0 )
 406              		.loc 1 278 0
 407 0036 15B9     		cbnz	r5, .L23
 279:USB/core/usb_dcd.c ****   {
 280:USB/core/usb_dcd.c ****     USB_OTG_EP0StartXfer(pdev , ep);
 408              		.loc 1 280 0
 409 0038 FFF7FEFF 		bl	USB_OTG_EP0StartXfer
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 13


 410              	.LVL39:
 411 003c 01E0     		b	.L24
 412              	.LVL40:
 413              	.L23:
 281:USB/core/usb_dcd.c ****   }
 282:USB/core/usb_dcd.c ****   else
 283:USB/core/usb_dcd.c ****   {
 284:USB/core/usb_dcd.c ****     USB_OTG_EPStartXfer(pdev, ep );
 414              		.loc 1 284 0
 415 003e FFF7FEFF 		bl	USB_OTG_EPStartXfer
 416              	.LVL41:
 417              	.L24:
 285:USB/core/usb_dcd.c ****   }
 286:USB/core/usb_dcd.c ****   return 0;
 287:USB/core/usb_dcd.c **** }
 418              		.loc 1 287 0
 419 0042 0020     		movs	r0, #0
 420 0044 70BD     		pop	{r4, r5, r6, pc}
 421              		.cfi_endproc
 422              	.LFE128:
 424 0046 00BF     		.section	.text.DCD_EP_Stall,"ax",%progbits
 425              		.align	2
 426              		.global	DCD_EP_Stall
 427              		.thumb
 428              		.thumb_func
 430              	DCD_EP_Stall:
 431              	.LFB129:
 288:USB/core/usb_dcd.c **** 
 289:USB/core/usb_dcd.c **** 
 290:USB/core/usb_dcd.c **** /**
 291:USB/core/usb_dcd.c **** * @brief  Stall an endpoint.
 292:USB/core/usb_dcd.c **** * @param pdev: device instance
 293:USB/core/usb_dcd.c **** * @param epnum: endpoint address
 294:USB/core/usb_dcd.c **** * @retval : status
 295:USB/core/usb_dcd.c **** */
 296:USB/core/usb_dcd.c **** uint32_t  DCD_EP_Stall (USB_OTG_CORE_HANDLE *pdev, uint8_t   epnum)
 297:USB/core/usb_dcd.c **** {
 432              		.loc 1 297 0
 433              		.cfi_startproc
 434              		@ args = 0, pretend = 0, frame = 0
 435              		@ frame_needed = 0, uses_anonymous_args = 0
 436              	.LVL42:
 437 0000 10B5     		push	{r4, lr}
 438              	.LCFI5:
 439              		.cfi_def_cfa_offset 8
 440              		.cfi_offset 4, -8
 441              		.cfi_offset 14, -4
 298:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 299:USB/core/usb_dcd.c ****   if ((0x80 & epnum) == 0x80)
 442              		.loc 1 299 0
 443 0002 4AB2     		sxtb	r2, r1
 444 0004 002A     		cmp	r2, #0
 445 0006 09DA     		bge	.L27
 300:USB/core/usb_dcd.c ****   {
 301:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[epnum & 0x7F];
 446              		.loc 1 301 0
 447 0008 01F07F04 		and	r4, r1, #127
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 14


 448 000c 04EB8404 		add	r4, r4, r4, lsl #2
 449 0010 E300     		lsls	r3, r4, #3
 450 0012 03F58C73 		add	r3, r3, #280
 451 0016 0344     		add	r3, r3, r0
 452 0018 0433     		adds	r3, r3, #4
 453              	.LVL43:
 454 001a 06E0     		b	.L28
 455              	.LVL44:
 456              	.L27:
 302:USB/core/usb_dcd.c ****   }
 303:USB/core/usb_dcd.c ****   else
 304:USB/core/usb_dcd.c ****   {
 305:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[epnum];
 457              		.loc 1 305 0
 458 001c 01EB8104 		add	r4, r1, r1, lsl #2
 459 0020 E300     		lsls	r3, r4, #3
 460 0022 03F55C73 		add	r3, r3, #880
 461 0026 0344     		add	r3, r3, r0
 462 0028 0433     		adds	r3, r3, #4
 463              	.LVL45:
 464              	.L28:
 306:USB/core/usb_dcd.c ****   }
 307:USB/core/usb_dcd.c **** 
 308:USB/core/usb_dcd.c ****   ep->is_stall = 1;
 465              		.loc 1 308 0
 466 002a 0124     		movs	r4, #1
 467 002c 9C70     		strb	r4, [r3, #2]
 309:USB/core/usb_dcd.c ****   ep->num   = epnum & 0x7F;
 468              		.loc 1 309 0
 469 002e 01F07F01 		and	r1, r1, #127
 470              	.LVL46:
 471 0032 1970     		strb	r1, [r3]
 310:USB/core/usb_dcd.c ****   ep->is_in = ((epnum & 0x80) == 0x80);
 472              		.loc 1 310 0
 473 0034 D20F     		lsrs	r2, r2, #31
 474              	.LVL47:
 475 0036 5A70     		strb	r2, [r3, #1]
 311:USB/core/usb_dcd.c ****   
 312:USB/core/usb_dcd.c ****   USB_OTG_EPSetStall(pdev , ep);
 476              		.loc 1 312 0
 477 0038 1946     		mov	r1, r3
 478 003a FFF7FEFF 		bl	USB_OTG_EPSetStall
 479              	.LVL48:
 313:USB/core/usb_dcd.c ****   return (0);
 314:USB/core/usb_dcd.c **** }
 480              		.loc 1 314 0
 481 003e 0020     		movs	r0, #0
 482 0040 10BD     		pop	{r4, pc}
 483              		.cfi_endproc
 484              	.LFE129:
 486 0042 00BF     		.section	.text.DCD_EP_ClrStall,"ax",%progbits
 487              		.align	2
 488              		.global	DCD_EP_ClrStall
 489              		.thumb
 490              		.thumb_func
 492              	DCD_EP_ClrStall:
 493              	.LFB130:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 15


 315:USB/core/usb_dcd.c **** 
 316:USB/core/usb_dcd.c **** 
 317:USB/core/usb_dcd.c **** /**
 318:USB/core/usb_dcd.c **** * @brief  Clear stall condition on endpoints.
 319:USB/core/usb_dcd.c **** * @param pdev: device instance
 320:USB/core/usb_dcd.c **** * @param epnum: endpoint address
 321:USB/core/usb_dcd.c **** * @retval : status
 322:USB/core/usb_dcd.c **** */
 323:USB/core/usb_dcd.c **** uint32_t  DCD_EP_ClrStall (USB_OTG_CORE_HANDLE *pdev, uint8_t epnum)
 324:USB/core/usb_dcd.c **** {
 494              		.loc 1 324 0
 495              		.cfi_startproc
 496              		@ args = 0, pretend = 0, frame = 0
 497              		@ frame_needed = 0, uses_anonymous_args = 0
 498              	.LVL49:
 499 0000 10B5     		push	{r4, lr}
 500              	.LCFI6:
 501              		.cfi_def_cfa_offset 8
 502              		.cfi_offset 4, -8
 503              		.cfi_offset 14, -4
 325:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 326:USB/core/usb_dcd.c ****   if ((0x80 & epnum) == 0x80)
 504              		.loc 1 326 0
 505 0002 4AB2     		sxtb	r2, r1
 506 0004 002A     		cmp	r2, #0
 507 0006 09DA     		bge	.L31
 327:USB/core/usb_dcd.c ****   {
 328:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[epnum & 0x7F];    
 508              		.loc 1 328 0
 509 0008 01F07F04 		and	r4, r1, #127
 510 000c 04EB8404 		add	r4, r4, r4, lsl #2
 511 0010 E300     		lsls	r3, r4, #3
 512 0012 03F58C73 		add	r3, r3, #280
 513 0016 0344     		add	r3, r3, r0
 514 0018 0433     		adds	r3, r3, #4
 515              	.LVL50:
 516 001a 06E0     		b	.L32
 517              	.LVL51:
 518              	.L31:
 329:USB/core/usb_dcd.c ****   }
 330:USB/core/usb_dcd.c ****   else
 331:USB/core/usb_dcd.c ****   {
 332:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[epnum];
 519              		.loc 1 332 0
 520 001c 01EB8104 		add	r4, r1, r1, lsl #2
 521 0020 E300     		lsls	r3, r4, #3
 522 0022 03F55C73 		add	r3, r3, #880
 523 0026 0344     		add	r3, r3, r0
 524 0028 0433     		adds	r3, r3, #4
 525              	.LVL52:
 526              	.L32:
 333:USB/core/usb_dcd.c ****   }
 334:USB/core/usb_dcd.c ****   
 335:USB/core/usb_dcd.c ****   ep->is_stall = 0;  
 527              		.loc 1 335 0
 528 002a 0024     		movs	r4, #0
 529 002c 9C70     		strb	r4, [r3, #2]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 16


 336:USB/core/usb_dcd.c ****   ep->num   = epnum & 0x7F;
 530              		.loc 1 336 0
 531 002e 01F07F01 		and	r1, r1, #127
 532              	.LVL53:
 533 0032 1970     		strb	r1, [r3]
 337:USB/core/usb_dcd.c ****   ep->is_in = ((epnum & 0x80) == 0x80);
 534              		.loc 1 337 0
 535 0034 D20F     		lsrs	r2, r2, #31
 536              	.LVL54:
 537 0036 5A70     		strb	r2, [r3, #1]
 338:USB/core/usb_dcd.c ****   
 339:USB/core/usb_dcd.c ****   USB_OTG_EPClearStall(pdev , ep);
 538              		.loc 1 339 0
 539 0038 1946     		mov	r1, r3
 540 003a FFF7FEFF 		bl	USB_OTG_EPClearStall
 541              	.LVL55:
 340:USB/core/usb_dcd.c ****   return (0);
 341:USB/core/usb_dcd.c **** }
 542              		.loc 1 341 0
 543 003e 2046     		mov	r0, r4
 544 0040 10BD     		pop	{r4, pc}
 545              		.cfi_endproc
 546              	.LFE130:
 548 0042 00BF     		.section	.text.DCD_EP_Flush,"ax",%progbits
 549              		.align	2
 550              		.global	DCD_EP_Flush
 551              		.thumb
 552              		.thumb_func
 554              	DCD_EP_Flush:
 555              	.LFB131:
 342:USB/core/usb_dcd.c **** 
 343:USB/core/usb_dcd.c **** 
 344:USB/core/usb_dcd.c **** /**
 345:USB/core/usb_dcd.c **** * @brief  This Function flushes the FIFOs.
 346:USB/core/usb_dcd.c **** * @param pdev: device instance
 347:USB/core/usb_dcd.c **** * @param epnum: endpoint address
 348:USB/core/usb_dcd.c **** * @retval : status
 349:USB/core/usb_dcd.c **** */
 350:USB/core/usb_dcd.c **** uint32_t  DCD_EP_Flush (USB_OTG_CORE_HANDLE *pdev , uint8_t epnum)
 351:USB/core/usb_dcd.c **** {
 556              		.loc 1 351 0
 557              		.cfi_startproc
 558              		@ args = 0, pretend = 0, frame = 0
 559              		@ frame_needed = 0, uses_anonymous_args = 0
 560              	.LVL56:
 561 0000 08B5     		push	{r3, lr}
 562              	.LCFI7:
 563              		.cfi_def_cfa_offset 8
 564              		.cfi_offset 3, -8
 565              		.cfi_offset 14, -4
 352:USB/core/usb_dcd.c **** 
 353:USB/core/usb_dcd.c ****   if ((epnum & 0x80) == 0x80)
 566              		.loc 1 353 0
 567 0002 11F0800F 		tst	r1, #128
 568 0006 04D0     		beq	.L35
 354:USB/core/usb_dcd.c ****   {
 355:USB/core/usb_dcd.c ****     USB_OTG_FlushTxFifo(pdev, epnum & 0x7F);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 17


 569              		.loc 1 355 0
 570 0008 01F07F01 		and	r1, r1, #127
 571              	.LVL57:
 572 000c FFF7FEFF 		bl	USB_OTG_FlushTxFifo
 573              	.LVL58:
 574 0010 01E0     		b	.L36
 575              	.LVL59:
 576              	.L35:
 356:USB/core/usb_dcd.c ****   }
 357:USB/core/usb_dcd.c ****   else
 358:USB/core/usb_dcd.c ****   {
 359:USB/core/usb_dcd.c ****     USB_OTG_FlushRxFifo(pdev);
 577              		.loc 1 359 0
 578 0012 FFF7FEFF 		bl	USB_OTG_FlushRxFifo
 579              	.LVL60:
 580              	.L36:
 360:USB/core/usb_dcd.c ****   }
 361:USB/core/usb_dcd.c **** 
 362:USB/core/usb_dcd.c ****   return (0);
 363:USB/core/usb_dcd.c **** }
 581              		.loc 1 363 0
 582 0016 0020     		movs	r0, #0
 583 0018 08BD     		pop	{r3, pc}
 584              		.cfi_endproc
 585              	.LFE131:
 587 001a 00BF     		.section	.text.DCD_EP_SetAddress,"ax",%progbits
 588              		.align	2
 589              		.global	DCD_EP_SetAddress
 590              		.thumb
 591              		.thumb_func
 593              	DCD_EP_SetAddress:
 594              	.LFB132:
 364:USB/core/usb_dcd.c **** 
 365:USB/core/usb_dcd.c **** 
 366:USB/core/usb_dcd.c **** /**
 367:USB/core/usb_dcd.c **** * @brief  This Function set USB device address
 368:USB/core/usb_dcd.c **** * @param pdev: device instance
 369:USB/core/usb_dcd.c **** * @param address: new device address
 370:USB/core/usb_dcd.c **** * @retval : status
 371:USB/core/usb_dcd.c **** */
 372:USB/core/usb_dcd.c **** void  DCD_EP_SetAddress (USB_OTG_CORE_HANDLE *pdev, uint8_t address)
 373:USB/core/usb_dcd.c **** {
 595              		.loc 1 373 0
 596              		.cfi_startproc
 597              		@ args = 0, pretend = 0, frame = 0
 598              		@ frame_needed = 0, uses_anonymous_args = 0
 599              		@ link register save eliminated.
 600              	.LVL61:
 374:USB/core/usb_dcd.c ****   USB_OTG_DCFG_TypeDef  dcfg;
 375:USB/core/usb_dcd.c ****   dcfg.d32 = 0;
 601              		.loc 1 375 0
 602 0000 0023     		movs	r3, #0
 603              	.LVL62:
 376:USB/core/usb_dcd.c ****   dcfg.b.devaddr = address;
 604              		.loc 1 376 0
 605 0002 61F30A13 		bfi	r3, r1, #4, #7
 606              	.LVL63:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 18


 377:USB/core/usb_dcd.c ****   USB_OTG_MODIFY_REG32( &pdev->regs.DREGS->DCFG, 0, dcfg.d32);
 607              		.loc 1 377 0
 608 0006 0269     		ldr	r2, [r0, #16]
 609 0008 1168     		ldr	r1, [r2]
 610              	.LVL64:
 611 000a 0B43     		orrs	r3, r3, r1
 612              	.LVL65:
 613 000c 1360     		str	r3, [r2]
 614 000e 7047     		bx	lr
 615              		.cfi_endproc
 616              	.LFE132:
 618              		.section	.text.DCD_DevConnect,"ax",%progbits
 619              		.align	2
 620              		.global	DCD_DevConnect
 621              		.thumb
 622              		.thumb_func
 624              	DCD_DevConnect:
 625              	.LFB133:
 378:USB/core/usb_dcd.c **** }
 379:USB/core/usb_dcd.c **** 
 380:USB/core/usb_dcd.c **** /**
 381:USB/core/usb_dcd.c **** * @brief  Connect device (enable internal pull-up)
 382:USB/core/usb_dcd.c **** * @param pdev: device instance
 383:USB/core/usb_dcd.c **** * @retval : None
 384:USB/core/usb_dcd.c **** */
 385:USB/core/usb_dcd.c **** void  DCD_DevConnect (USB_OTG_CORE_HANDLE *pdev)
 386:USB/core/usb_dcd.c **** {
 626              		.loc 1 386 0
 627              		.cfi_startproc
 628              		@ args = 0, pretend = 0, frame = 0
 629              		@ frame_needed = 0, uses_anonymous_args = 0
 630              	.LVL66:
 631 0000 08B5     		push	{r3, lr}
 632              	.LCFI8:
 633              		.cfi_def_cfa_offset 8
 634              		.cfi_offset 3, -8
 635              		.cfi_offset 14, -4
 387:USB/core/usb_dcd.c **** #ifndef USE_OTG_MODE
 388:USB/core/usb_dcd.c ****   USB_OTG_DCTL_TypeDef  dctl;
 389:USB/core/usb_dcd.c ****   dctl.d32 = USB_OTG_READ_REG32(&pdev->regs.DREGS->DCTL);
 636              		.loc 1 389 0
 637 0002 0269     		ldr	r2, [r0, #16]
 638 0004 5368     		ldr	r3, [r2, #4]
 390:USB/core/usb_dcd.c ****   /* Connect device */
 391:USB/core/usb_dcd.c ****   dctl.b.sftdiscon  = 0;
 639              		.loc 1 391 0
 640 0006 6FF34103 		bfc	r3, #1, #1
 641              	.LVL67:
 392:USB/core/usb_dcd.c ****   USB_OTG_WRITE_REG32(&pdev->regs.DREGS->DCTL, dctl.d32);
 642              		.loc 1 392 0
 643 000a 5360     		str	r3, [r2, #4]
 393:USB/core/usb_dcd.c ****   USB_OTG_BSP_mDelay(3);
 644              		.loc 1 393 0
 645 000c 0320     		movs	r0, #3
 646              	.LVL68:
 647 000e FFF7FEFF 		bl	USB_OTG_BSP_mDelay
 648              	.LVL69:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 19


 649 0012 08BD     		pop	{r3, pc}
 650              		.cfi_endproc
 651              	.LFE133:
 653              		.section	.text.DCD_DevDisconnect,"ax",%progbits
 654              		.align	2
 655              		.global	DCD_DevDisconnect
 656              		.thumb
 657              		.thumb_func
 659              	DCD_DevDisconnect:
 660              	.LFB134:
 394:USB/core/usb_dcd.c **** #endif
 395:USB/core/usb_dcd.c **** }
 396:USB/core/usb_dcd.c **** 
 397:USB/core/usb_dcd.c **** 
 398:USB/core/usb_dcd.c **** /**
 399:USB/core/usb_dcd.c **** * @brief  Disconnect device (disable internal pull-up)
 400:USB/core/usb_dcd.c **** * @param pdev: device instance
 401:USB/core/usb_dcd.c **** * @retval : None
 402:USB/core/usb_dcd.c **** */
 403:USB/core/usb_dcd.c **** void  DCD_DevDisconnect (USB_OTG_CORE_HANDLE *pdev)
 404:USB/core/usb_dcd.c **** {
 661              		.loc 1 404 0
 662              		.cfi_startproc
 663              		@ args = 0, pretend = 0, frame = 0
 664              		@ frame_needed = 0, uses_anonymous_args = 0
 665              	.LVL70:
 666 0000 08B5     		push	{r3, lr}
 667              	.LCFI9:
 668              		.cfi_def_cfa_offset 8
 669              		.cfi_offset 3, -8
 670              		.cfi_offset 14, -4
 405:USB/core/usb_dcd.c **** #ifndef USE_OTG_MODE
 406:USB/core/usb_dcd.c ****   USB_OTG_DCTL_TypeDef  dctl;
 407:USB/core/usb_dcd.c ****   dctl.d32 = USB_OTG_READ_REG32(&pdev->regs.DREGS->DCTL);
 671              		.loc 1 407 0
 672 0002 0369     		ldr	r3, [r0, #16]
 673 0004 5968     		ldr	r1, [r3, #4]
 408:USB/core/usb_dcd.c ****   /* Disconnect device for 3ms */
 409:USB/core/usb_dcd.c ****   dctl.b.sftdiscon  = 1;
 674              		.loc 1 409 0
 675 0006 41F00202 		orr	r2, r1, #2
 676              	.LVL71:
 410:USB/core/usb_dcd.c ****   USB_OTG_WRITE_REG32(&pdev->regs.DREGS->DCTL, dctl.d32);
 677              		.loc 1 410 0
 678 000a 5A60     		str	r2, [r3, #4]
 411:USB/core/usb_dcd.c ****   USB_OTG_BSP_mDelay(3);
 679              		.loc 1 411 0
 680 000c 0320     		movs	r0, #3
 681              	.LVL72:
 682 000e FFF7FEFF 		bl	USB_OTG_BSP_mDelay
 683              	.LVL73:
 684 0012 08BD     		pop	{r3, pc}
 685              		.cfi_endproc
 686              	.LFE134:
 688              		.section	.text.DCD_GetEPStatus,"ax",%progbits
 689              		.align	2
 690              		.global	DCD_GetEPStatus
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 20


 691              		.thumb
 692              		.thumb_func
 694              	DCD_GetEPStatus:
 695              	.LFB135:
 412:USB/core/usb_dcd.c **** #endif
 413:USB/core/usb_dcd.c **** }
 414:USB/core/usb_dcd.c **** 
 415:USB/core/usb_dcd.c **** 
 416:USB/core/usb_dcd.c **** /**
 417:USB/core/usb_dcd.c **** * @brief  returns the EP Status
 418:USB/core/usb_dcd.c **** * @param  pdev : Selected device
 419:USB/core/usb_dcd.c **** *         epnum : endpoint address
 420:USB/core/usb_dcd.c **** * @retval : EP status
 421:USB/core/usb_dcd.c **** */
 422:USB/core/usb_dcd.c **** 
 423:USB/core/usb_dcd.c **** uint32_t DCD_GetEPStatus(USB_OTG_CORE_HANDLE *pdev ,uint8_t epnum)
 424:USB/core/usb_dcd.c **** {
 696              		.loc 1 424 0
 697              		.cfi_startproc
 698              		@ args = 0, pretend = 0, frame = 0
 699              		@ frame_needed = 0, uses_anonymous_args = 0
 700              	.LVL74:
 701 0000 08B5     		push	{r3, lr}
 702              	.LCFI10:
 703              		.cfi_def_cfa_offset 8
 704              		.cfi_offset 3, -8
 705              		.cfi_offset 14, -4
 706              	.LVL75:
 425:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 426:USB/core/usb_dcd.c ****   uint32_t Status = 0;  
 427:USB/core/usb_dcd.c ****   
 428:USB/core/usb_dcd.c ****   if ((0x80 & epnum) == 0x80)
 707              		.loc 1 428 0
 708 0002 11F0800F 		tst	r1, #128
 709 0006 09D0     		beq	.L44
 429:USB/core/usb_dcd.c ****   {
 430:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[epnum & 0x7F];    
 710              		.loc 1 430 0
 711 0008 01F07F01 		and	r1, r1, #127
 712              	.LVL76:
 713 000c 01EB8101 		add	r1, r1, r1, lsl #2
 714 0010 CB00     		lsls	r3, r1, #3
 715 0012 03F58C71 		add	r1, r3, #280
 716 0016 0144     		add	r1, r1, r0
 717 0018 0431     		adds	r1, r1, #4
 718              	.LVL77:
 719 001a 06E0     		b	.L45
 720              	.LVL78:
 721              	.L44:
 431:USB/core/usb_dcd.c ****   }
 432:USB/core/usb_dcd.c ****   else
 433:USB/core/usb_dcd.c ****   {
 434:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[epnum];
 722              		.loc 1 434 0
 723 001c 01EB8101 		add	r1, r1, r1, lsl #2
 724              	.LVL79:
 725 0020 CB00     		lsls	r3, r1, #3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 21


 726 0022 03F55C71 		add	r1, r3, #880
 727 0026 0144     		add	r1, r1, r0
 728 0028 0431     		adds	r1, r1, #4
 729              	.LVL80:
 730              	.L45:
 435:USB/core/usb_dcd.c ****   }
 436:USB/core/usb_dcd.c ****   
 437:USB/core/usb_dcd.c ****   Status = USB_OTG_GetEPStatus(pdev ,ep);
 731              		.loc 1 437 0
 732 002a FFF7FEFF 		bl	USB_OTG_GetEPStatus
 733              	.LVL81:
 438:USB/core/usb_dcd.c **** 
 439:USB/core/usb_dcd.c ****   /* Return the current status */
 440:USB/core/usb_dcd.c ****   return Status;
 441:USB/core/usb_dcd.c **** }
 734              		.loc 1 441 0
 735 002e 08BD     		pop	{r3, pc}
 736              		.cfi_endproc
 737              	.LFE135:
 739              		.section	.text.DCD_SetEPStatus,"ax",%progbits
 740              		.align	2
 741              		.global	DCD_SetEPStatus
 742              		.thumb
 743              		.thumb_func
 745              	DCD_SetEPStatus:
 746              	.LFB136:
 442:USB/core/usb_dcd.c **** 
 443:USB/core/usb_dcd.c **** /**
 444:USB/core/usb_dcd.c **** * @brief  Set the EP Status
 445:USB/core/usb_dcd.c **** * @param  pdev : Selected device
 446:USB/core/usb_dcd.c **** *         Status : new Status
 447:USB/core/usb_dcd.c **** *         epnum : EP address
 448:USB/core/usb_dcd.c **** * @retval : None
 449:USB/core/usb_dcd.c **** */
 450:USB/core/usb_dcd.c **** void DCD_SetEPStatus (USB_OTG_CORE_HANDLE *pdev , uint8_t epnum , uint32_t Status)
 451:USB/core/usb_dcd.c **** {
 747              		.loc 1 451 0
 748              		.cfi_startproc
 749              		@ args = 0, pretend = 0, frame = 0
 750              		@ frame_needed = 0, uses_anonymous_args = 0
 751              	.LVL82:
 752 0000 08B5     		push	{r3, lr}
 753              	.LCFI11:
 754              		.cfi_def_cfa_offset 8
 755              		.cfi_offset 3, -8
 756              		.cfi_offset 14, -4
 452:USB/core/usb_dcd.c ****   USB_OTG_EP *ep;
 453:USB/core/usb_dcd.c ****   
 454:USB/core/usb_dcd.c ****   if ((0x80 & epnum) == 0x80)
 757              		.loc 1 454 0
 758 0002 11F0800F 		tst	r1, #128
 759 0006 09D0     		beq	.L48
 455:USB/core/usb_dcd.c ****   {
 456:USB/core/usb_dcd.c ****     ep = &pdev->dev.in_ep[epnum & 0x7F];    
 760              		.loc 1 456 0
 761 0008 01F07F01 		and	r1, r1, #127
 762              	.LVL83:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 22


 763 000c 01EB8101 		add	r1, r1, r1, lsl #2
 764 0010 CB00     		lsls	r3, r1, #3
 765 0012 03F58C71 		add	r1, r3, #280
 766 0016 0144     		add	r1, r1, r0
 767 0018 0431     		adds	r1, r1, #4
 768              	.LVL84:
 769 001a 06E0     		b	.L49
 770              	.LVL85:
 771              	.L48:
 457:USB/core/usb_dcd.c ****   }
 458:USB/core/usb_dcd.c ****   else
 459:USB/core/usb_dcd.c ****   {
 460:USB/core/usb_dcd.c ****     ep = &pdev->dev.out_ep[epnum];
 772              		.loc 1 460 0
 773 001c 01EB8101 		add	r1, r1, r1, lsl #2
 774              	.LVL86:
 775 0020 CB00     		lsls	r3, r1, #3
 776 0022 03F55C71 		add	r1, r3, #880
 777 0026 0144     		add	r1, r1, r0
 778 0028 0431     		adds	r1, r1, #4
 779              	.LVL87:
 780              	.L49:
 461:USB/core/usb_dcd.c ****   }
 462:USB/core/usb_dcd.c ****   
 463:USB/core/usb_dcd.c ****    USB_OTG_SetEPStatus(pdev ,ep , Status);
 781              		.loc 1 463 0
 782 002a FFF7FEFF 		bl	USB_OTG_SetEPStatus
 783              	.LVL88:
 784 002e 08BD     		pop	{r3, pc}
 785              		.cfi_endproc
 786              	.LFE136:
 788              		.text
 789              	.Letext0:
 790              		.file 2 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\machine\\_default_types.h"
 791              		.file 3 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\sys\\_stdint.h"
 792              		.file 4 "USB/core/usb_regs.h"
 793              		.file 5 "USB/core/usb_defines.h"
 794              		.file 6 "USB/core/usb_core.h"
 795              		.file 7 "USB/core/usb_bsp.h"
 796              		.file 8 "F4_CORE/core_cm4.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s 			page 23


DEFINED SYMBOLS
                            *ABS*:00000000 usb_dcd.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:22     .text.DCD_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:27     .text.DCD_Init:00000000 DCD_Init
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:144    .text.DCD_EP_Open:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:149    .text.DCD_EP_Open:00000000 DCD_EP_Open
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:223    .text.DCD_EP_Close:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:228    .text.DCD_EP_Close:00000000 DCD_EP_Close
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:283    .text.DCD_EP_PrepareRx:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:288    .text.DCD_EP_PrepareRx:00000000 DCD_EP_PrepareRx
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:359    .text.DCD_EP_Tx:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:364    .text.DCD_EP_Tx:00000000 DCD_EP_Tx
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:425    .text.DCD_EP_Stall:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:430    .text.DCD_EP_Stall:00000000 DCD_EP_Stall
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:487    .text.DCD_EP_ClrStall:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:492    .text.DCD_EP_ClrStall:00000000 DCD_EP_ClrStall
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:549    .text.DCD_EP_Flush:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:554    .text.DCD_EP_Flush:00000000 DCD_EP_Flush
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:588    .text.DCD_EP_SetAddress:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:593    .text.DCD_EP_SetAddress:00000000 DCD_EP_SetAddress
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:619    .text.DCD_DevConnect:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:624    .text.DCD_DevConnect:00000000 DCD_DevConnect
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:654    .text.DCD_DevDisconnect:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:659    .text.DCD_DevDisconnect:00000000 DCD_DevDisconnect
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:689    .text.DCD_GetEPStatus:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:694    .text.DCD_GetEPStatus:00000000 DCD_GetEPStatus
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:740    .text.DCD_SetEPStatus:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccOM2ZQf.s:745    .text.DCD_SetEPStatus:00000000 DCD_SetEPStatus
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
USB_OTG_SelectCore
USB_OTG_DisableGlobalInt
USB_OTG_CoreInit
USB_OTG_SetCurrentMode
USB_OTG_CoreInitDev
USB_OTG_EnableGlobalInt
USB_OTG_EPActivate
USB_OTG_EPDeactivate
USB_OTG_EP0StartXfer
USB_OTG_EPStartXfer
USB_OTG_EPSetStall
USB_OTG_EPClearStall
USB_OTG_FlushTxFifo
USB_OTG_FlushRxFifo
USB_OTG_BSP_mDelay
USB_OTG_GetEPStatus
USB_OTG_SetEPStatus
