ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"periph_adc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Periph_ADC_IO_Init,"ax",%progbits
  18              		.align	1
  19              		.global	Periph_ADC_IO_Init
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	Periph_ADC_IO_Init:
  27              	.LVL0:
  28              	.LFB123:
  29              		.file 1 "Bsp/periph_adc.c"
   1:Bsp/periph_adc.c **** #include "periph_adc.h"
   2:Bsp/periph_adc.c **** #include "periph_gpio.h"
   3:Bsp/periph_adc.c **** #include "stm32f4xx_adc.h"
   4:Bsp/periph_adc.c **** #include "stm32f4xx_rcc.h"
   5:Bsp/periph_adc.c **** #include "stm32f4xx_gpio.h"
   6:Bsp/periph_adc.c **** 
   7:Bsp/periph_adc.c **** static void (*ADC_IO_Init[])(void) = {
   8:Bsp/periph_adc.c ****     GPIO_ADC1_Channel0_IO_Init,
   9:Bsp/periph_adc.c ****     GPIO_ADC1_Channel1_IO_Init,
  10:Bsp/periph_adc.c ****     GPIO_ADC1_Channel2_IO_Init,
  11:Bsp/periph_adc.c ****     GPIO_ADC1_Channel3_IO_Init,
  12:Bsp/periph_adc.c ****     GPIO_ADC1_Channel4_IO_Init,
  13:Bsp/periph_adc.c ****     GPIO_ADC1_Channel5_IO_Init,
  14:Bsp/periph_adc.c ****     GPIO_ADC1_Channel6_IO_Init,
  15:Bsp/periph_adc.c ****     GPIO_ADC1_Channel7_IO_Init,
  16:Bsp/periph_adc.c ****     GPIO_ADC1_Channel8_IO_Init,
  17:Bsp/periph_adc.c ****     GPIO_ADC1_Channel9_IO_Init,
  18:Bsp/periph_adc.c ****     GPIO_ADC1_Channel10_IO_Init,
  19:Bsp/periph_adc.c ****     GPIO_ADC1_Channel11_IO_Init,
  20:Bsp/periph_adc.c ****     GPIO_ADC1_Channel12_IO_Init,
  21:Bsp/periph_adc.c ****     GPIO_ADC1_Channel13_IO_Init,
  22:Bsp/periph_adc.c ****     GPIO_ADC1_Channel14_IO_Init,
  23:Bsp/periph_adc.c **** };
  24:Bsp/periph_adc.c **** 
  25:Bsp/periph_adc.c **** void Periph_ADC_IO_Init(ADC_Channel_List ADCx_Channelx)
  26:Bsp/periph_adc.c **** {
  30              		.loc 1 26 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 2


  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 26 1 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
  27:Bsp/periph_adc.c ****     ADC_IO_Init[ADCx_Channelx]();
  40              		.loc 1 27 5 is_stmt 1 view .LVU2
  41              		.loc 1 27 16 is_stmt 0 view .LVU3
  42 0002 024B     		ldr	r3, .L3
  43 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
  44              		.loc 1 27 5 view .LVU4
  45 0008 9847     		blx	r3
  46              	.LVL1:
  28:Bsp/periph_adc.c **** }
  47              		.loc 1 28 1 view .LVU5
  48 000a 08BD     		pop	{r3, pc}
  49              	.L4:
  50              		.align	2
  51              	.L3:
  52 000c 00000000 		.word	.LANCHOR0
  53              		.cfi_endproc
  54              	.LFE123:
  56              		.section	.text.Periph_ADC_Init,"ax",%progbits
  57              		.align	1
  58              		.global	Periph_ADC_Init
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  62              		.fpu fpv4-sp-d16
  64              	Periph_ADC_Init:
  65              	.LVL2:
  66              	.LFB124:
  29:Bsp/periph_adc.c **** 
  30:Bsp/periph_adc.c **** void Periph_ADC_Init(uint8_t channel_sum)
  31:Bsp/periph_adc.c **** {
  67              		.loc 1 31 1 is_stmt 1 view -0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 40
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              		.loc 1 31 1 is_stmt 0 view .LVU7
  72 0000 30B5     		push	{r4, r5, lr}
  73              	.LCFI1:
  74              		.cfi_def_cfa_offset 12
  75              		.cfi_offset 4, -12
  76              		.cfi_offset 5, -8
  77              		.cfi_offset 14, -4
  78 0002 8BB0     		sub	sp, sp, #44
  79              	.LCFI2:
  80              		.cfi_def_cfa_offset 56
  81 0004 0546     		mov	r5, r0
  32:Bsp/periph_adc.c ****     ADC_InitTypeDef ADC_InitStructure;
  82              		.loc 1 32 5 is_stmt 1 view .LVU8
  33:Bsp/periph_adc.c ****     ADC_CommonInitTypeDef ADC_CommonInitStructure;
  83              		.loc 1 33 5 view .LVU9
  34:Bsp/periph_adc.c **** 
ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 3


  35:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_DMAAccessMode = ADC_DMAAccessMode_Disabled;
  84              		.loc 1 35 5 view .LVU10
  85              		.loc 1 35 47 is_stmt 0 view .LVU11
  86 0006 0024     		movs	r4, #0
  87 0008 0294     		str	r4, [sp, #8]
  36:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_Mode = ADC_Mode_Independent;
  88              		.loc 1 36 5 is_stmt 1 view .LVU12
  89              		.loc 1 36 38 is_stmt 0 view .LVU13
  90 000a 0094     		str	r4, [sp]
  37:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_Prescaler = ADC_Prescaler_Div4;
  91              		.loc 1 37 5 is_stmt 1 view .LVU14
  92              		.loc 1 37 43 is_stmt 0 view .LVU15
  93 000c 4FF48033 		mov	r3, #65536
  94 0010 0193     		str	r3, [sp, #4]
  38:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_TwoSamplingDelay = ADC_TwoSamplingDelay_5Cycles;
  95              		.loc 1 38 5 is_stmt 1 view .LVU16
  96              		.loc 1 38 50 is_stmt 0 view .LVU17
  97 0012 0394     		str	r4, [sp, #12]
  39:Bsp/periph_adc.c ****     ADC_CommonInit(&ADC_CommonInitStructure);
  98              		.loc 1 39 5 is_stmt 1 view .LVU18
  99 0014 6846     		mov	r0, sp
 100              	.LVL3:
 101              		.loc 1 39 5 is_stmt 0 view .LVU19
 102 0016 FFF7FEFF 		bl	ADC_CommonInit
 103              	.LVL4:
  40:Bsp/periph_adc.c **** 
  41:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_Resolution = ADC_Resolution_12b;
 104              		.loc 1 41 5 is_stmt 1 view .LVU20
 105              		.loc 1 41 38 is_stmt 0 view .LVU21
 106 001a 0494     		str	r4, [sp, #16]
  42:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ScanConvMode = DISABLE;
 107              		.loc 1 42 5 is_stmt 1 view .LVU22
 108              		.loc 1 42 40 is_stmt 0 view .LVU23
 109 001c 8DF81440 		strb	r4, [sp, #20]
  43:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ContinuousConvMode = DISABLE;
 110              		.loc 1 43 5 is_stmt 1 view .LVU24
 111              		.loc 1 43 46 is_stmt 0 view .LVU25
 112 0020 8DF81540 		strb	r4, [sp, #21]
  44:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_None;
 113              		.loc 1 44 5 is_stmt 1 view .LVU26
 114              		.loc 1 44 48 is_stmt 0 view .LVU27
 115 0024 0694     		str	r4, [sp, #24]
  45:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
 116              		.loc 1 45 5 is_stmt 1 view .LVU28
 117              		.loc 1 45 37 is_stmt 0 view .LVU29
 118 0026 0894     		str	r4, [sp, #32]
  46:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_NbrOfConversion = channel_sum;
 119              		.loc 1 46 5 is_stmt 1 view .LVU30
 120              		.loc 1 46 43 is_stmt 0 view .LVU31
 121 0028 8DF82450 		strb	r5, [sp, #36]
  47:Bsp/periph_adc.c ****     ADC_Init(ADC1, &ADC_InitStructure);
 122              		.loc 1 47 5 is_stmt 1 view .LVU32
 123 002c 04F18044 		add	r4, r4, #1073741824
 124 0030 04F59034 		add	r4, r4, #73728
 125 0034 04A9     		add	r1, sp, #16
 126 0036 2046     		mov	r0, r4
 127 0038 FFF7FEFF 		bl	ADC_Init
ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 4


 128              	.LVL5:
  48:Bsp/periph_adc.c **** 
  49:Bsp/periph_adc.c ****     ADC_Cmd(ADC1, ENABLE);
 129              		.loc 1 49 5 view .LVU33
 130 003c 0121     		movs	r1, #1
 131 003e 2046     		mov	r0, r4
 132 0040 FFF7FEFF 		bl	ADC_Cmd
 133              	.LVL6:
  50:Bsp/periph_adc.c **** }
 134              		.loc 1 50 1 is_stmt 0 view .LVU34
 135 0044 0BB0     		add	sp, sp, #44
 136              	.LCFI3:
 137              		.cfi_def_cfa_offset 12
 138              		@ sp needed
 139 0046 30BD     		pop	{r4, r5, pc}
 140              		.cfi_endproc
 141              	.LFE124:
 143              		.section	.text.Periph_ADC_Close,"ax",%progbits
 144              		.align	1
 145              		.global	Periph_ADC_Close
 146              		.syntax unified
 147              		.thumb
 148              		.thumb_func
 149              		.fpu fpv4-sp-d16
 151              	Periph_ADC_Close:
 152              	.LVL7:
 153              	.LFB125:
  51:Bsp/periph_adc.c **** 
  52:Bsp/periph_adc.c **** void Periph_ADC_Close(ADC_Channel_List ADCx_Channelx)
  53:Bsp/periph_adc.c **** {
 154              		.loc 1 53 1 is_stmt 1 view -0
 155              		.cfi_startproc
 156              		@ args = 0, pretend = 0, frame = 0
 157              		@ frame_needed = 0, uses_anonymous_args = 0
 158              		@ link register save eliminated.
  54:Bsp/periph_adc.c **** }
 159              		.loc 1 54 1 view .LVU36
 160 0000 7047     		bx	lr
 161              		.cfi_endproc
 162              	.LFE125:
 164              		.section	.text.Periph_ADC_GetValue,"ax",%progbits
 165              		.align	1
 166              		.global	Periph_ADC_GetValue
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	Periph_ADC_GetValue:
 173              	.LVL8:
 174              	.LFB126:
  55:Bsp/periph_adc.c **** 
  56:Bsp/periph_adc.c **** uint16_t Periph_ADC_GetValue(ADC_Channel_List ADCx_Channelx, uint8_t sequence)
  57:Bsp/periph_adc.c **** {
 175              		.loc 1 57 1 view -0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 5


 179              		.loc 1 57 1 is_stmt 0 view .LVU38
 180 0000 10B5     		push	{r4, lr}
 181              	.LCFI4:
 182              		.cfi_def_cfa_offset 8
 183              		.cfi_offset 4, -8
 184              		.cfi_offset 14, -4
 185 0002 0A46     		mov	r2, r1
  58:Bsp/periph_adc.c ****     ADC_RegularChannelConfig(ADC1, ADCx_Channelx, sequence, ADC_SampleTime_480Cycles);
 186              		.loc 1 58 5 is_stmt 1 view .LVU39
 187 0004 094C     		ldr	r4, .L11
 188 0006 0723     		movs	r3, #7
 189 0008 0146     		mov	r1, r0
 190              	.LVL9:
 191              		.loc 1 58 5 is_stmt 0 view .LVU40
 192 000a 2046     		mov	r0, r4
 193              	.LVL10:
 194              		.loc 1 58 5 view .LVU41
 195 000c FFF7FEFF 		bl	ADC_RegularChannelConfig
 196              	.LVL11:
  59:Bsp/periph_adc.c ****     ADC_SoftwareStartConv(ADC1);
 197              		.loc 1 59 5 is_stmt 1 view .LVU42
 198 0010 2046     		mov	r0, r4
 199 0012 FFF7FEFF 		bl	ADC_SoftwareStartConv
 200              	.LVL12:
  60:Bsp/periph_adc.c **** 
  61:Bsp/periph_adc.c ****     while (!ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC))
 201              		.loc 1 61 5 view .LVU43
 202              	.L9:
  62:Bsp/periph_adc.c ****         ;
 203              		.loc 1 62 9 discriminator 1 view .LVU44
  61:Bsp/periph_adc.c ****         ;
 204              		.loc 1 61 11 discriminator 1 view .LVU45
  61:Bsp/periph_adc.c ****         ;
 205              		.loc 1 61 13 is_stmt 0 discriminator 1 view .LVU46
 206 0016 0221     		movs	r1, #2
 207 0018 0448     		ldr	r0, .L11
 208 001a FFF7FEFF 		bl	ADC_GetFlagStatus
 209              	.LVL13:
  61:Bsp/periph_adc.c ****         ;
 210              		.loc 1 61 11 discriminator 1 view .LVU47
 211 001e 0028     		cmp	r0, #0
 212 0020 F9D0     		beq	.L9
  63:Bsp/periph_adc.c ****     return ADC_GetConversionValue(ADC1);
 213              		.loc 1 63 5 is_stmt 1 view .LVU48
 214              		.loc 1 63 12 is_stmt 0 view .LVU49
 215 0022 0248     		ldr	r0, .L11
 216 0024 FFF7FEFF 		bl	ADC_GetConversionValue
 217              	.LVL14:
  64:Bsp/periph_adc.c **** }
 218              		.loc 1 64 1 view .LVU50
 219 0028 10BD     		pop	{r4, pc}
 220              	.L12:
 221 002a 00BF     		.align	2
 222              	.L11:
 223 002c 00200140 		.word	1073815552
 224              		.cfi_endproc
 225              	.LFE126:
ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 6


 227              		.section	.rodata.ADC_IO_Init,"a"
 228              		.align	2
 229              		.set	.LANCHOR0,. + 0
 232              	ADC_IO_Init:
 233 0000 00000000 		.word	GPIO_ADC1_Channel0_IO_Init
 234 0004 00000000 		.word	GPIO_ADC1_Channel1_IO_Init
 235 0008 00000000 		.word	GPIO_ADC1_Channel2_IO_Init
 236 000c 00000000 		.word	GPIO_ADC1_Channel3_IO_Init
 237 0010 00000000 		.word	GPIO_ADC1_Channel4_IO_Init
 238 0014 00000000 		.word	GPIO_ADC1_Channel5_IO_Init
 239 0018 00000000 		.word	GPIO_ADC1_Channel6_IO_Init
 240 001c 00000000 		.word	GPIO_ADC1_Channel7_IO_Init
 241 0020 00000000 		.word	GPIO_ADC1_Channel8_IO_Init
 242 0024 00000000 		.word	GPIO_ADC1_Channel9_IO_Init
 243 0028 00000000 		.word	GPIO_ADC1_Channel10_IO_Init
 244 002c 00000000 		.word	GPIO_ADC1_Channel11_IO_Init
 245 0030 00000000 		.word	GPIO_ADC1_Channel12_IO_Init
 246 0034 00000000 		.word	GPIO_ADC1_Channel13_IO_Init
 247 0038 00000000 		.word	GPIO_ADC1_Channel14_IO_Init
 248              		.text
 249              	.Letext0:
 250              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\inc
 251              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\inc
 252              		.file 4 "Bsp/periph_adc.h"
 253              		.file 5 "USER/stm32f4xx.h"
 254              		.file 6 "FWLIB/inc/stm32f4xx_adc.h"
ARM GAS  C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 periph_adc.c
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:18     .text.Periph_ADC_IO_Init:00000000 $t
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:26     .text.Periph_ADC_IO_Init:00000000 Periph_ADC_IO_Init
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:52     .text.Periph_ADC_IO_Init:0000000c $d
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:57     .text.Periph_ADC_Init:00000000 $t
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:64     .text.Periph_ADC_Init:00000000 Periph_ADC_Init
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:144    .text.Periph_ADC_Close:00000000 $t
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:151    .text.Periph_ADC_Close:00000000 Periph_ADC_Close
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:165    .text.Periph_ADC_GetValue:00000000 $t
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:172    .text.Periph_ADC_GetValue:00000000 Periph_ADC_GetValue
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:223    .text.Periph_ADC_GetValue:0000002c $d
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:228    .rodata.ADC_IO_Init:00000000 $d
C:\Users\huav\AppData\Local\Temp\ccXNQ0yx.s:232    .rodata.ADC_IO_Init:00000000 ADC_IO_Init

UNDEFINED SYMBOLS
ADC_CommonInit
ADC_Init
ADC_Cmd
ADC_RegularChannelConfig
ADC_SoftwareStartConv
ADC_GetFlagStatus
ADC_GetConversionValue
GPIO_ADC1_Channel0_IO_Init
GPIO_ADC1_Channel1_IO_Init
GPIO_ADC1_Channel2_IO_Init
GPIO_ADC1_Channel3_IO_Init
GPIO_ADC1_Channel4_IO_Init
GPIO_ADC1_Channel5_IO_Init
GPIO_ADC1_Channel6_IO_Init
GPIO_ADC1_Channel7_IO_Init
GPIO_ADC1_Channel8_IO_Init
GPIO_ADC1_Channel9_IO_Init
GPIO_ADC1_Channel10_IO_Init
GPIO_ADC1_Channel11_IO_Init
GPIO_ADC1_Channel12_IO_Init
GPIO_ADC1_Channel13_IO_Init
GPIO_ADC1_Channel14_IO_Init
