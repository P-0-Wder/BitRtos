ARM GAS  /tmp/ccehrpyJ.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"periph_adc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Periph_ADC_IO_Init,"ax",%progbits
  18              		.align	1
  19              		.global	Periph_ADC_IO_Init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	Periph_ADC_IO_Init:
  26              	.LFB123:
  27              		.file 1 "Bsp/periph_adc.c"
   1:Bsp/periph_adc.c **** #include "periph_adc.h"
   2:Bsp/periph_adc.c **** #include "periph_gpio.h"
   3:Bsp/periph_adc.c **** #include "stm32f4xx_adc.h"
   4:Bsp/periph_adc.c **** #include "stm32f4xx_rcc.h"
   5:Bsp/periph_adc.c **** #include "stm32f4xx_gpio.h"
   6:Bsp/periph_adc.c **** 
   7:Bsp/periph_adc.c **** static void (*ADC_IO_Init[])(void) = {
   8:Bsp/periph_adc.c ****     GPIO_ADC1_Channel0_IO_Init,
   9:Bsp/periph_adc.c ****     GPIO_ADC1_Channel1_IO_Init,
  10:Bsp/periph_adc.c ****     GPIO_ADC1_Channel2_IO_Init,
  11:Bsp/periph_adc.c ****     GPIO_ADC1_Channel3_IO_Init,
  12:Bsp/periph_adc.c ****     GPIO_ADC1_Channel4_IO_Init,
  13:Bsp/periph_adc.c ****     GPIO_ADC1_Channel5_IO_Init,
  14:Bsp/periph_adc.c ****     GPIO_ADC1_Channel6_IO_Init,
  15:Bsp/periph_adc.c ****     GPIO_ADC1_Channel7_IO_Init,
  16:Bsp/periph_adc.c ****     GPIO_ADC1_Channel8_IO_Init,
  17:Bsp/periph_adc.c ****     GPIO_ADC1_Channel9_IO_Init,
  18:Bsp/periph_adc.c ****     GPIO_ADC1_Channel10_IO_Init,
  19:Bsp/periph_adc.c ****     GPIO_ADC1_Channel11_IO_Init,
  20:Bsp/periph_adc.c ****     GPIO_ADC1_Channel12_IO_Init,
  21:Bsp/periph_adc.c ****     GPIO_ADC1_Channel13_IO_Init,
  22:Bsp/periph_adc.c ****     GPIO_ADC1_Channel14_IO_Init,
  23:Bsp/periph_adc.c **** };
  24:Bsp/periph_adc.c **** 
  25:Bsp/periph_adc.c **** void Periph_ADC_IO_Init(ADC_Channel_List ADCx_Channelx)
  26:Bsp/periph_adc.c **** {
  28              		.loc 1 26 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
ARM GAS  /tmp/ccehrpyJ.s 			page 2


  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  27:Bsp/periph_adc.c ****     ADC_IO_Init[ADCx_Channelx]();
  38              		.loc 1 27 0
  39 0002 024B     		ldr	r3, .L3
  40 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
  41 0008 9847     		blx	r3
  42              	.LVL1:
  43 000a 08BD     		pop	{r3, pc}
  44              	.L4:
  45              		.align	2
  46              	.L3:
  47 000c 00000000 		.word	.LANCHOR0
  48              		.cfi_endproc
  49              	.LFE123:
  51              		.section	.text.Periph_ADC_Init,"ax",%progbits
  52              		.align	1
  53              		.global	Periph_ADC_Init
  54              		.syntax unified
  55              		.thumb
  56              		.thumb_func
  57              		.fpu fpv4-sp-d16
  59              	Periph_ADC_Init:
  60              	.LFB124:
  28:Bsp/periph_adc.c **** }
  29:Bsp/periph_adc.c **** 
  30:Bsp/periph_adc.c **** void Periph_ADC_Init(uint8_t channel_sum)
  31:Bsp/periph_adc.c **** {
  61              		.loc 1 31 0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 40
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65              	.LVL2:
  66 0000 30B5     		push	{r4, r5, lr}
  67              	.LCFI1:
  68              		.cfi_def_cfa_offset 12
  69              		.cfi_offset 4, -12
  70              		.cfi_offset 5, -8
  71              		.cfi_offset 14, -4
  72 0002 8BB0     		sub	sp, sp, #44
  73              	.LCFI2:
  74              		.cfi_def_cfa_offset 56
  75 0004 0546     		mov	r5, r0
  32:Bsp/periph_adc.c ****     ADC_InitTypeDef ADC_InitStructure;
  33:Bsp/periph_adc.c ****     ADC_CommonInitTypeDef ADC_CommonInitStructure;
  34:Bsp/periph_adc.c **** 
  35:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_DMAAccessMode = ADC_DMAAccessMode_Disabled;
  76              		.loc 1 35 0
  77 0006 0024     		movs	r4, #0
  78 0008 0294     		str	r4, [sp, #8]
  36:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_Mode = ADC_Mode_Independent;
  79              		.loc 1 36 0
  80 000a 0094     		str	r4, [sp]
  37:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_Prescaler = ADC_Prescaler_Div4;
ARM GAS  /tmp/ccehrpyJ.s 			page 3


  81              		.loc 1 37 0
  82 000c 4FF48033 		mov	r3, #65536
  83 0010 0193     		str	r3, [sp, #4]
  38:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_TwoSamplingDelay = ADC_TwoSamplingDelay_5Cycles;
  84              		.loc 1 38 0
  85 0012 0394     		str	r4, [sp, #12]
  39:Bsp/periph_adc.c ****     ADC_CommonInit(&ADC_CommonInitStructure);
  86              		.loc 1 39 0
  87 0014 6846     		mov	r0, sp
  88              	.LVL3:
  89 0016 FFF7FEFF 		bl	ADC_CommonInit
  90              	.LVL4:
  40:Bsp/periph_adc.c **** 
  41:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_Resolution = ADC_Resolution_12b;
  91              		.loc 1 41 0
  92 001a 0494     		str	r4, [sp, #16]
  42:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ScanConvMode = DISABLE;
  93              		.loc 1 42 0
  94 001c 8DF81440 		strb	r4, [sp, #20]
  43:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ContinuousConvMode = DISABLE;
  95              		.loc 1 43 0
  96 0020 8DF81540 		strb	r4, [sp, #21]
  44:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_None;
  97              		.loc 1 44 0
  98 0024 0694     		str	r4, [sp, #24]
  45:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
  99              		.loc 1 45 0
 100 0026 0894     		str	r4, [sp, #32]
  46:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_NbrOfConversion = channel_sum;
 101              		.loc 1 46 0
 102 0028 8DF82450 		strb	r5, [sp, #36]
  47:Bsp/periph_adc.c ****     ADC_Init(ADC1, &ADC_InitStructure);
 103              		.loc 1 47 0
 104 002c 04F18044 		add	r4, r4, #1073741824
 105 0030 04F59034 		add	r4, r4, #73728
 106 0034 04A9     		add	r1, sp, #16
 107 0036 2046     		mov	r0, r4
 108 0038 FFF7FEFF 		bl	ADC_Init
 109              	.LVL5:
  48:Bsp/periph_adc.c **** 
  49:Bsp/periph_adc.c ****     ADC_Cmd(ADC1, ENABLE);
 110              		.loc 1 49 0
 111 003c 0121     		movs	r1, #1
 112 003e 2046     		mov	r0, r4
 113 0040 FFF7FEFF 		bl	ADC_Cmd
 114              	.LVL6:
  50:Bsp/periph_adc.c **** }
 115              		.loc 1 50 0
 116 0044 0BB0     		add	sp, sp, #44
 117              	.LCFI3:
 118              		.cfi_def_cfa_offset 12
 119              		@ sp needed
 120 0046 30BD     		pop	{r4, r5, pc}
 121              		.cfi_endproc
 122              	.LFE124:
 124              		.section	.text.Periph_ADC_Close,"ax",%progbits
 125              		.align	1
ARM GAS  /tmp/ccehrpyJ.s 			page 4


 126              		.global	Periph_ADC_Close
 127              		.syntax unified
 128              		.thumb
 129              		.thumb_func
 130              		.fpu fpv4-sp-d16
 132              	Periph_ADC_Close:
 133              	.LFB125:
  51:Bsp/periph_adc.c **** 
  52:Bsp/periph_adc.c **** void Periph_ADC_Close(ADC_Channel_List ADCx_Channelx)
  53:Bsp/periph_adc.c **** {
 134              		.loc 1 53 0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 0
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138              		@ link register save eliminated.
 139              	.LVL7:
 140 0000 7047     		bx	lr
 141              		.cfi_endproc
 142              	.LFE125:
 144              		.section	.text.Periph_ADC_GetValue,"ax",%progbits
 145              		.align	1
 146              		.global	Periph_ADC_GetValue
 147              		.syntax unified
 148              		.thumb
 149              		.thumb_func
 150              		.fpu fpv4-sp-d16
 152              	Periph_ADC_GetValue:
 153              	.LFB126:
  54:Bsp/periph_adc.c **** }
  55:Bsp/periph_adc.c **** 
  56:Bsp/periph_adc.c **** uint16_t Periph_ADC_GetValue(ADC_Channel_List ADCx_Channelx, uint8_t sequence)
  57:Bsp/periph_adc.c **** {
 154              		.loc 1 57 0
 155              		.cfi_startproc
 156              		@ args = 0, pretend = 0, frame = 0
 157              		@ frame_needed = 0, uses_anonymous_args = 0
 158              	.LVL8:
 159              		.loc 1 57 0
 160 0000 10B5     		push	{r4, lr}
 161              	.LCFI4:
 162              		.cfi_def_cfa_offset 8
 163              		.cfi_offset 4, -8
 164              		.cfi_offset 14, -4
  58:Bsp/periph_adc.c ****     ADC_RegularChannelConfig(ADC1, ADCx_Channelx, sequence, ADC_SampleTime_480Cycles);
 165              		.loc 1 58 0
 166 0002 0A4C     		ldr	r4, .L11
 167 0004 0723     		movs	r3, #7
 168 0006 0A46     		mov	r2, r1
 169 0008 0146     		mov	r1, r0
 170              	.LVL9:
 171 000a 2046     		mov	r0, r4
 172              	.LVL10:
 173 000c FFF7FEFF 		bl	ADC_RegularChannelConfig
 174              	.LVL11:
  59:Bsp/periph_adc.c ****     ADC_SoftwareStartConv(ADC1);
 175              		.loc 1 59 0
 176 0010 2046     		mov	r0, r4
ARM GAS  /tmp/ccehrpyJ.s 			page 5


 177 0012 FFF7FEFF 		bl	ADC_SoftwareStartConv
 178              	.LVL12:
 179              	.L9:
  60:Bsp/periph_adc.c **** 
  61:Bsp/periph_adc.c ****     while (!ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC))
 180              		.loc 1 61 0 discriminator 1
 181 0016 0221     		movs	r1, #2
 182 0018 0448     		ldr	r0, .L11
 183 001a FFF7FEFF 		bl	ADC_GetFlagStatus
 184              	.LVL13:
 185 001e 0028     		cmp	r0, #0
 186 0020 F9D0     		beq	.L9
  62:Bsp/periph_adc.c ****         ;
  63:Bsp/periph_adc.c ****     return ADC_GetConversionValue(ADC1);
 187              		.loc 1 63 0
 188 0022 0248     		ldr	r0, .L11
 189 0024 FFF7FEFF 		bl	ADC_GetConversionValue
 190              	.LVL14:
  64:Bsp/periph_adc.c **** }
 191              		.loc 1 64 0
 192 0028 10BD     		pop	{r4, pc}
 193              	.L12:
 194 002a 00BF     		.align	2
 195              	.L11:
 196 002c 00200140 		.word	1073815552
 197              		.cfi_endproc
 198              	.LFE126:
 200              		.section	.rodata.ADC_IO_Init,"a",%progbits
 201              		.align	2
 202              		.set	.LANCHOR0,. + 0
 205              	ADC_IO_Init:
 206 0000 00000000 		.word	GPIO_ADC1_Channel0_IO_Init
 207 0004 00000000 		.word	GPIO_ADC1_Channel1_IO_Init
 208 0008 00000000 		.word	GPIO_ADC1_Channel2_IO_Init
 209 000c 00000000 		.word	GPIO_ADC1_Channel3_IO_Init
 210 0010 00000000 		.word	GPIO_ADC1_Channel4_IO_Init
 211 0014 00000000 		.word	GPIO_ADC1_Channel5_IO_Init
 212 0018 00000000 		.word	GPIO_ADC1_Channel6_IO_Init
 213 001c 00000000 		.word	GPIO_ADC1_Channel7_IO_Init
 214 0020 00000000 		.word	GPIO_ADC1_Channel8_IO_Init
 215 0024 00000000 		.word	GPIO_ADC1_Channel9_IO_Init
 216 0028 00000000 		.word	GPIO_ADC1_Channel10_IO_Init
 217 002c 00000000 		.word	GPIO_ADC1_Channel11_IO_Init
 218 0030 00000000 		.word	GPIO_ADC1_Channel12_IO_Init
 219 0034 00000000 		.word	GPIO_ADC1_Channel13_IO_Init
 220 0038 00000000 		.word	GPIO_ADC1_Channel14_IO_Init
 221              		.text
 222              	.Letext0:
 223              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 224              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 225              		.file 4 "Bsp/periph_adc.h"
 226              		.file 5 "F4_CORE/core_cm4.h"
 227              		.file 6 "USER/system_stm32f4xx.h"
 228              		.file 7 "USER/stm32f4xx.h"
 229              		.file 8 "FWLIB/inc/stm32f4xx_adc.h"
ARM GAS  /tmp/ccehrpyJ.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 periph_adc.c
     /tmp/ccehrpyJ.s:18     .text.Periph_ADC_IO_Init:0000000000000000 $t
     /tmp/ccehrpyJ.s:25     .text.Periph_ADC_IO_Init:0000000000000000 Periph_ADC_IO_Init
     /tmp/ccehrpyJ.s:47     .text.Periph_ADC_IO_Init:000000000000000c $d
     /tmp/ccehrpyJ.s:52     .text.Periph_ADC_Init:0000000000000000 $t
     /tmp/ccehrpyJ.s:59     .text.Periph_ADC_Init:0000000000000000 Periph_ADC_Init
     /tmp/ccehrpyJ.s:125    .text.Periph_ADC_Close:0000000000000000 $t
     /tmp/ccehrpyJ.s:132    .text.Periph_ADC_Close:0000000000000000 Periph_ADC_Close
     /tmp/ccehrpyJ.s:145    .text.Periph_ADC_GetValue:0000000000000000 $t
     /tmp/ccehrpyJ.s:152    .text.Periph_ADC_GetValue:0000000000000000 Periph_ADC_GetValue
     /tmp/ccehrpyJ.s:196    .text.Periph_ADC_GetValue:000000000000002c $d
     /tmp/ccehrpyJ.s:201    .rodata.ADC_IO_Init:0000000000000000 $d
     /tmp/ccehrpyJ.s:205    .rodata.ADC_IO_Init:0000000000000000 ADC_IO_Init
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
ADC_CommonInit
ADC_Init
ADC_Cmd
ADC_RegularChannelConfig
ADC_SoftwareStartConv
ADC_GetFlagStatus
ADC_GetConversionValue
GPIO_ADC1_Channel0_IO_Init
GPIO_ADC1_Channel1_IO_Init
GPIO_ADC1_Channel2_IO_Init
GPIO_ADC1_Channel3_IO_Init
GPIO_ADC1_Channel4_IO_Init
GPIO_ADC1_Channel5_IO_Init
GPIO_ADC1_Channel6_IO_Init
GPIO_ADC1_Channel7_IO_Init
GPIO_ADC1_Channel8_IO_Init
GPIO_ADC1_Channel9_IO_Init
GPIO_ADC1_Channel10_IO_Init
GPIO_ADC1_Channel11_IO_Init
GPIO_ADC1_Channel12_IO_Init
GPIO_ADC1_Channel13_IO_Init
GPIO_ADC1_Channel14_IO_Init
