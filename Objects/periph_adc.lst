ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"periph_adc.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.Periph_ADC_IO_Init,"ax",%progbits
  22              		.align	2
  23              		.global	Periph_ADC_IO_Init
  24              		.thumb
  25              		.thumb_func
  27              	Periph_ADC_IO_Init:
  28              	.LFB123:
  29              		.file 1 "Bsp/periph_adc.c"
   1:Bsp/periph_adc.c **** #include "periph_adc.h"
   2:Bsp/periph_adc.c **** #include "periph_gpio.h"
   3:Bsp/periph_adc.c **** #include "stm32f4xx_adc.h"
   4:Bsp/periph_adc.c **** #include "stm32f4xx_rcc.h"
   5:Bsp/periph_adc.c **** #include "stm32f4xx_gpio.h"
   6:Bsp/periph_adc.c **** 
   7:Bsp/periph_adc.c **** static void (*ADC_IO_Init[])(void) = {
   8:Bsp/periph_adc.c ****     GPIO_ADC1_Channel0_IO_Init,
   9:Bsp/periph_adc.c ****     GPIO_ADC1_Channel1_IO_Init,
  10:Bsp/periph_adc.c ****     GPIO_ADC1_Channel2_IO_Init,
  11:Bsp/periph_adc.c ****     GPIO_ADC1_Channel3_IO_Init,
  12:Bsp/periph_adc.c ****     GPIO_ADC1_Channel4_IO_Init,
  13:Bsp/periph_adc.c ****     GPIO_ADC1_Channel5_IO_Init,
  14:Bsp/periph_adc.c ****     GPIO_ADC1_Channel6_IO_Init,
  15:Bsp/periph_adc.c ****     GPIO_ADC1_Channel7_IO_Init,
  16:Bsp/periph_adc.c ****     GPIO_ADC1_Channel8_IO_Init,
  17:Bsp/periph_adc.c ****     GPIO_ADC1_Channel9_IO_Init,
  18:Bsp/periph_adc.c ****     GPIO_ADC1_Channel10_IO_Init,
  19:Bsp/periph_adc.c ****     GPIO_ADC1_Channel11_IO_Init,
  20:Bsp/periph_adc.c ****     GPIO_ADC1_Channel12_IO_Init,
  21:Bsp/periph_adc.c ****     GPIO_ADC1_Channel13_IO_Init,
  22:Bsp/periph_adc.c ****     GPIO_ADC1_Channel14_IO_Init,
  23:Bsp/periph_adc.c **** };
  24:Bsp/periph_adc.c **** 
  25:Bsp/periph_adc.c **** void Periph_ADC_IO_Init(ADC_Channel_List ADCx_Channelx)
  26:Bsp/periph_adc.c **** {
  30              		.loc 1 26 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s 			page 2


  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              	.LVL0:
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
  27:Bsp/periph_adc.c ****     ADC_IO_Init[ADCx_Channelx]();
  40              		.loc 1 27 0
  41 0002 024B     		ldr	r3, .L3
  42 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
  43 0008 9847     		blx	r3
  44              	.LVL1:
  45 000a 08BD     		pop	{r3, pc}
  46              	.L4:
  47              		.align	2
  48              	.L3:
  49 000c 00000000 		.word	.LANCHOR0
  50              		.cfi_endproc
  51              	.LFE123:
  53              		.section	.text.Periph_ADC_Init,"ax",%progbits
  54              		.align	2
  55              		.global	Periph_ADC_Init
  56              		.thumb
  57              		.thumb_func
  59              	Periph_ADC_Init:
  60              	.LFB124:
  28:Bsp/periph_adc.c **** }
  29:Bsp/periph_adc.c **** 
  30:Bsp/periph_adc.c **** void Periph_ADC_Init(uint8_t channel_sum)
  31:Bsp/periph_adc.c **** {
  61              		.loc 1 31 0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 40
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65              	.LVL2:
  66 0000 30B5     		push	{r4, r5, lr}
  67              	.LCFI1:
  68              		.cfi_def_cfa_offset 12
  69              		.cfi_offset 4, -12
  70              		.cfi_offset 5, -8
  71              		.cfi_offset 14, -4
  72 0002 8BB0     		sub	sp, sp, #44
  73              	.LCFI2:
  74              		.cfi_def_cfa_offset 56
  75 0004 0546     		mov	r5, r0
  32:Bsp/periph_adc.c ****     ADC_InitTypeDef ADC_InitStructure;
  33:Bsp/periph_adc.c ****     ADC_CommonInitTypeDef ADC_CommonInitStructure;
  34:Bsp/periph_adc.c **** 
  35:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_DMAAccessMode = ADC_DMAAccessMode_Disabled;
  76              		.loc 1 35 0
  77 0006 0024     		movs	r4, #0
  78 0008 0294     		str	r4, [sp, #8]
  36:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_Mode = ADC_Mode_Independent;
  79              		.loc 1 36 0
  80 000a 0094     		str	r4, [sp]
  37:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_Prescaler = ADC_Prescaler_Div4;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s 			page 3


  81              		.loc 1 37 0
  82 000c 4FF48033 		mov	r3, #65536
  83 0010 0193     		str	r3, [sp, #4]
  38:Bsp/periph_adc.c ****     ADC_CommonInitStructure.ADC_TwoSamplingDelay = ADC_TwoSamplingDelay_5Cycles;
  84              		.loc 1 38 0
  85 0012 0394     		str	r4, [sp, #12]
  39:Bsp/periph_adc.c ****     ADC_CommonInit(&ADC_CommonInitStructure);
  86              		.loc 1 39 0
  87 0014 6846     		mov	r0, sp
  88              	.LVL3:
  89 0016 FFF7FEFF 		bl	ADC_CommonInit
  90              	.LVL4:
  40:Bsp/periph_adc.c **** 
  41:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_Resolution = ADC_Resolution_12b;
  91              		.loc 1 41 0
  92 001a 0494     		str	r4, [sp, #16]
  42:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ScanConvMode = DISABLE;
  93              		.loc 1 42 0
  94 001c 8DF81440 		strb	r4, [sp, #20]
  43:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ContinuousConvMode = DISABLE;
  95              		.loc 1 43 0
  96 0020 8DF81540 		strb	r4, [sp, #21]
  44:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_None;
  97              		.loc 1 44 0
  98 0024 0694     		str	r4, [sp, #24]
  45:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;
  99              		.loc 1 45 0
 100 0026 0894     		str	r4, [sp, #32]
  46:Bsp/periph_adc.c ****     ADC_InitStructure.ADC_NbrOfConversion = channel_sum;
 101              		.loc 1 46 0
 102 0028 8DF82450 		strb	r5, [sp, #36]
  47:Bsp/periph_adc.c ****     ADC_Init(ADC1, &ADC_InitStructure);
 103              		.loc 1 47 0
 104 002c 04F18044 		add	r4, r4, #1073741824
 105 0030 04F59034 		add	r4, r4, #73728
 106 0034 04A9     		add	r1, sp, #16
 107 0036 2046     		mov	r0, r4
 108 0038 FFF7FEFF 		bl	ADC_Init
 109              	.LVL5:
  48:Bsp/periph_adc.c **** 
  49:Bsp/periph_adc.c ****     ADC_Cmd(ADC1, ENABLE);
 110              		.loc 1 49 0
 111 003c 0121     		movs	r1, #1
 112 003e 2046     		mov	r0, r4
 113 0040 FFF7FEFF 		bl	ADC_Cmd
 114              	.LVL6:
  50:Bsp/periph_adc.c **** }
 115              		.loc 1 50 0
 116 0044 0BB0     		add	sp, sp, #44
 117              	.LCFI3:
 118              		.cfi_def_cfa_offset 12
 119              		@ sp needed
 120 0046 30BD     		pop	{r4, r5, pc}
 121              		.cfi_endproc
 122              	.LFE124:
 124              		.section	.text.Periph_ADC_Close,"ax",%progbits
 125              		.align	2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s 			page 4


 126              		.global	Periph_ADC_Close
 127              		.thumb
 128              		.thumb_func
 130              	Periph_ADC_Close:
 131              	.LFB125:
  51:Bsp/periph_adc.c **** 
  52:Bsp/periph_adc.c **** void Periph_ADC_Close(ADC_Channel_List ADCx_Channelx)
  53:Bsp/periph_adc.c **** {
 132              		.loc 1 53 0
 133              		.cfi_startproc
 134              		@ args = 0, pretend = 0, frame = 0
 135              		@ frame_needed = 0, uses_anonymous_args = 0
 136              		@ link register save eliminated.
 137              	.LVL7:
 138 0000 7047     		bx	lr
 139              		.cfi_endproc
 140              	.LFE125:
 142 0002 00BF     		.section	.text.Periph_ADC_GetValue,"ax",%progbits
 143              		.align	2
 144              		.global	Periph_ADC_GetValue
 145              		.thumb
 146              		.thumb_func
 148              	Periph_ADC_GetValue:
 149              	.LFB126:
  54:Bsp/periph_adc.c **** }
  55:Bsp/periph_adc.c **** 
  56:Bsp/periph_adc.c **** uint16_t Periph_ADC_GetValue(ADC_Channel_List ADCx_Channelx, uint8_t sequence)
  57:Bsp/periph_adc.c **** {
 150              		.loc 1 57 0
 151              		.cfi_startproc
 152              		@ args = 0, pretend = 0, frame = 0
 153              		@ frame_needed = 0, uses_anonymous_args = 0
 154              	.LVL8:
 155              		.loc 1 57 0
 156 0000 10B5     		push	{r4, lr}
 157              	.LCFI4:
 158              		.cfi_def_cfa_offset 8
 159              		.cfi_offset 4, -8
 160              		.cfi_offset 14, -4
  58:Bsp/periph_adc.c ****     ADC_RegularChannelConfig(ADC1, ADCx_Channelx, sequence, ADC_SampleTime_480Cycles);
 161              		.loc 1 58 0
 162 0002 0A4C     		ldr	r4, .L11
 163 0004 0723     		movs	r3, #7
 164 0006 0A46     		mov	r2, r1
 165 0008 0146     		mov	r1, r0
 166              	.LVL9:
 167 000a 2046     		mov	r0, r4
 168              	.LVL10:
 169 000c FFF7FEFF 		bl	ADC_RegularChannelConfig
 170              	.LVL11:
  59:Bsp/periph_adc.c ****     ADC_SoftwareStartConv(ADC1);
 171              		.loc 1 59 0
 172 0010 2046     		mov	r0, r4
 173 0012 FFF7FEFF 		bl	ADC_SoftwareStartConv
 174              	.LVL12:
 175              	.L9:
  60:Bsp/periph_adc.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s 			page 5


  61:Bsp/periph_adc.c ****     while (!ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC))
 176              		.loc 1 61 0 discriminator 1
 177 0016 0221     		movs	r1, #2
 178 0018 0448     		ldr	r0, .L11
 179 001a FFF7FEFF 		bl	ADC_GetFlagStatus
 180              	.LVL13:
 181 001e 0028     		cmp	r0, #0
 182 0020 F9D0     		beq	.L9
  62:Bsp/periph_adc.c ****         ;
  63:Bsp/periph_adc.c ****     return ADC_GetConversionValue(ADC1);
 183              		.loc 1 63 0
 184 0022 0248     		ldr	r0, .L11
 185 0024 FFF7FEFF 		bl	ADC_GetConversionValue
 186              	.LVL14:
  64:Bsp/periph_adc.c **** }
 187              		.loc 1 64 0
 188 0028 10BD     		pop	{r4, pc}
 189              	.L12:
 190 002a 00BF     		.align	2
 191              	.L11:
 192 002c 00200140 		.word	1073815552
 193              		.cfi_endproc
 194              	.LFE126:
 196              		.section	.rodata.ADC_IO_Init,"a",%progbits
 197              		.align	2
 198              		.set	.LANCHOR0,. + 0
 201              	ADC_IO_Init:
 202 0000 00000000 		.word	GPIO_ADC1_Channel0_IO_Init
 203 0004 00000000 		.word	GPIO_ADC1_Channel1_IO_Init
 204 0008 00000000 		.word	GPIO_ADC1_Channel2_IO_Init
 205 000c 00000000 		.word	GPIO_ADC1_Channel3_IO_Init
 206 0010 00000000 		.word	GPIO_ADC1_Channel4_IO_Init
 207 0014 00000000 		.word	GPIO_ADC1_Channel5_IO_Init
 208 0018 00000000 		.word	GPIO_ADC1_Channel6_IO_Init
 209 001c 00000000 		.word	GPIO_ADC1_Channel7_IO_Init
 210 0020 00000000 		.word	GPIO_ADC1_Channel8_IO_Init
 211 0024 00000000 		.word	GPIO_ADC1_Channel9_IO_Init
 212 0028 00000000 		.word	GPIO_ADC1_Channel10_IO_Init
 213 002c 00000000 		.word	GPIO_ADC1_Channel11_IO_Init
 214 0030 00000000 		.word	GPIO_ADC1_Channel12_IO_Init
 215 0034 00000000 		.word	GPIO_ADC1_Channel13_IO_Init
 216 0038 00000000 		.word	GPIO_ADC1_Channel14_IO_Init
 217              		.text
 218              	.Letext0:
 219              		.file 2 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\machine\\_default_types.h"
 220              		.file 3 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\sys\\_stdint.h"
 221              		.file 4 "Bsp/periph_adc.h"
 222              		.file 5 "USER/stm32f4xx.h"
 223              		.file 6 "FWLIB/inc/stm32f4xx_adc.h"
 224              		.file 7 "F4_CORE/core_cm4.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 periph_adc.c
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:22     .text.Periph_ADC_IO_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:27     .text.Periph_ADC_IO_Init:00000000 Periph_ADC_IO_Init
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:49     .text.Periph_ADC_IO_Init:0000000c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:54     .text.Periph_ADC_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:59     .text.Periph_ADC_Init:00000000 Periph_ADC_Init
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:125    .text.Periph_ADC_Close:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:130    .text.Periph_ADC_Close:00000000 Periph_ADC_Close
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:143    .text.Periph_ADC_GetValue:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:148    .text.Periph_ADC_GetValue:00000000 Periph_ADC_GetValue
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:192    .text.Periph_ADC_GetValue:0000002c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:197    .rodata.ADC_IO_Init:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cc7FObmN.s:201    .rodata.ADC_IO_Init:00000000 ADC_IO_Init
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
ADC_CommonInit
ADC_Init
ADC_Cmd
ADC_RegularChannelConfig
ADC_SoftwareStartConv
ADC_GetFlagStatus
ADC_GetConversionValue
GPIO_ADC1_Channel0_IO_Init
GPIO_ADC1_Channel1_IO_Init
GPIO_ADC1_Channel2_IO_Init
GPIO_ADC1_Channel3_IO_Init
GPIO_ADC1_Channel4_IO_Init
GPIO_ADC1_Channel5_IO_Init
GPIO_ADC1_Channel6_IO_Init
GPIO_ADC1_Channel7_IO_Init
GPIO_ADC1_Channel8_IO_Init
GPIO_ADC1_Channel9_IO_Init
GPIO_ADC1_Channel10_IO_Init
GPIO_ADC1_Channel11_IO_Init
GPIO_ADC1_Channel12_IO_Init
GPIO_ADC1_Channel13_IO_Init
GPIO_ADC1_Channel14_IO_Init
