ARM GAS  /tmp/ccOOS6q9.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"tm_stm32f4_usb_vcp.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.TM_USB_VCP_BufferEmpty,"ax",%progbits
  18              		.align	1
  19              		.global	TM_USB_VCP_BufferEmpty
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	TM_USB_VCP_BufferEmpty:
  27              	.LFB127:
  28              		.file 1 "USB/config/tm_stm32f4_usb_vcp.c"
   1:USB/config/tm_stm32f4_usb_vcp.c **** /**	
   2:USB/config/tm_stm32f4_usb_vcp.c ****  * |----------------------------------------------------------------------
   3:USB/config/tm_stm32f4_usb_vcp.c ****  * | Copyright (C) Tilen Majerle, 2014
   4:USB/config/tm_stm32f4_usb_vcp.c ****  * | 
   5:USB/config/tm_stm32f4_usb_vcp.c ****  * | This program is free software: you can redistribute it and/or modify
   6:USB/config/tm_stm32f4_usb_vcp.c ****  * | it under the terms of the GNU General Public License as published by
   7:USB/config/tm_stm32f4_usb_vcp.c ****  * | the Free Software Foundation, either version 3 of the License, or
   8:USB/config/tm_stm32f4_usb_vcp.c ****  * | any later version.
   9:USB/config/tm_stm32f4_usb_vcp.c ****  * |  
  10:USB/config/tm_stm32f4_usb_vcp.c ****  * | This program is distributed in the hope that it will be useful,
  11:USB/config/tm_stm32f4_usb_vcp.c ****  * | but WITHOUT ANY WARRANTY; without even the implied warranty of
  12:USB/config/tm_stm32f4_usb_vcp.c ****  * | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  13:USB/config/tm_stm32f4_usb_vcp.c ****  * | GNU General Public License for more details.
  14:USB/config/tm_stm32f4_usb_vcp.c ****  * | 
  15:USB/config/tm_stm32f4_usb_vcp.c ****  * | You should have received a copy of the GNU General Public License
  16:USB/config/tm_stm32f4_usb_vcp.c ****  * | along with this program.  If not, see <http://www.gnu.org/licenses/>.
  17:USB/config/tm_stm32f4_usb_vcp.c ****  * |----------------------------------------------------------------------
  18:USB/config/tm_stm32f4_usb_vcp.c ****  */
  19:USB/config/tm_stm32f4_usb_vcp.c **** #include "tm_stm32f4_usb_vcp.h"
  20:USB/config/tm_stm32f4_usb_vcp.c **** #include "usbd_usr.h"
  21:USB/config/tm_stm32f4_usb_vcp.c **** #include "usb_conf.h"
  22:USB/config/tm_stm32f4_usb_vcp.c **** #include "usbd_desc.h"
  23:USB/config/tm_stm32f4_usb_vcp.c **** 
  24:USB/config/tm_stm32f4_usb_vcp.c **** const uint8_t PackEnd[2] = {0X0D, 0X0A};
  25:USB/config/tm_stm32f4_usb_vcp.c **** 
  26:USB/config/tm_stm32f4_usb_vcp.c **** /* Private */
  27:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_IRQ_Data TM_IRQ_Data;
  28:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_IRQ TM_USB_VCP_IRQ_Status = TM_USB_VCP_IRQ_RESET;
  29:USB/config/tm_stm32f4_usb_vcp.c **** uint8_t TM_INT_USB_VCP_ReceiveBuffer[USB_VCP_RECEIVE_BUFFER_LENGTH];
  30:USB/config/tm_stm32f4_usb_vcp.c **** uint32_t tm_int_usb_vcp_buf_in, tm_int_usb_vcp_buf_out, tm_int_usb_vcp_buf_num;
ARM GAS  /tmp/ccOOS6q9.s 			page 2


  31:USB/config/tm_stm32f4_usb_vcp.c **** extern TM_USB_VCP_Result TM_USB_VCP_INT_Status;
  32:USB/config/tm_stm32f4_usb_vcp.c **** extern LINE_CODING linecoding;
  33:USB/config/tm_stm32f4_usb_vcp.c **** uint8_t TM_USB_VCP_INT_Init = 0;
  34:USB/config/tm_stm32f4_usb_vcp.c **** USB_OTG_CORE_HANDLE USB_OTG_dev;
  35:USB/config/tm_stm32f4_usb_vcp.c **** 
  36:USB/config/tm_stm32f4_usb_vcp.c **** /* USB VCP Internal receive buffer */
  37:USB/config/tm_stm32f4_usb_vcp.c **** extern uint8_t TM_INT_USB_VCP_ReceiveBuffer[USB_VCP_RECEIVE_BUFFER_LENGTH];
  38:USB/config/tm_stm32f4_usb_vcp.c **** 
  39:USB/config/tm_stm32f4_usb_vcp.c **** void TM_USB_VCP_Reset_IRQ(void);
  40:USB/config/tm_stm32f4_usb_vcp.c **** 
  41:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_Init(void)
  42:USB/config/tm_stm32f4_usb_vcp.c **** {
  43:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Initialize USB */
  44:USB/config/tm_stm32f4_usb_vcp.c **** 	USBD_Init(&USB_OTG_dev,
  45:USB/config/tm_stm32f4_usb_vcp.c **** #ifdef USE_USB_OTG_FS
  46:USB/config/tm_stm32f4_usb_vcp.c **** 			  USB_OTG_FS_CORE_ID,
  47:USB/config/tm_stm32f4_usb_vcp.c **** #else
  48:USB/config/tm_stm32f4_usb_vcp.c **** 			  USB_OTG_HS_CORE_ID,
  49:USB/config/tm_stm32f4_usb_vcp.c **** #endif
  50:USB/config/tm_stm32f4_usb_vcp.c **** 			  &USR_desc,
  51:USB/config/tm_stm32f4_usb_vcp.c **** 			  &USBD_CDC_cb,
  52:USB/config/tm_stm32f4_usb_vcp.c **** 			  &USR_cb);
  53:USB/config/tm_stm32f4_usb_vcp.c **** 
  54:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Reset buffer counters */
  55:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_in = 0;
  56:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_out = 0;
  57:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_num = 0;
  58:USB/config/tm_stm32f4_usb_vcp.c **** 
  59:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Initialized */
  60:USB/config/tm_stm32f4_usb_vcp.c **** 	TM_USB_VCP_INT_Init = 1;
  61:USB/config/tm_stm32f4_usb_vcp.c **** 
  62:USB/config/tm_stm32f4_usb_vcp.c **** 	TM_USB_VCP_Reset_IRQ();
  63:USB/config/tm_stm32f4_usb_vcp.c **** 
  64:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return OK */
  65:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_OK;
  66:USB/config/tm_stm32f4_usb_vcp.c **** }
  67:USB/config/tm_stm32f4_usb_vcp.c **** 
  68:USB/config/tm_stm32f4_usb_vcp.c **** uint8_t TM_USB_VCP_BufferEmpty(void)
  69:USB/config/tm_stm32f4_usb_vcp.c **** {
  29              		.loc 1 69 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  70:USB/config/tm_stm32f4_usb_vcp.c **** 	return (tm_int_usb_vcp_buf_num == 0);
  34              		.loc 1 70 2 view .LVU1
  35              		.loc 1 70 33 is_stmt 0 view .LVU2
  36 0000 024B     		ldr	r3, .L2
  37 0002 1868     		ldr	r0, [r3]
  71:USB/config/tm_stm32f4_usb_vcp.c **** }
  38              		.loc 1 71 1 view .LVU3
  39 0004 B0FA80F0 		clz	r0, r0
  40 0008 4009     		lsrs	r0, r0, #5
  41 000a 7047     		bx	lr
  42              	.L3:
  43              		.align	2
  44              	.L2:
ARM GAS  /tmp/ccOOS6q9.s 			page 3


  45 000c 00000000 		.word	tm_int_usb_vcp_buf_num
  46              		.cfi_endproc
  47              	.LFE127:
  49              		.section	.text.TM_USB_VCP_BufferFull,"ax",%progbits
  50              		.align	1
  51              		.global	TM_USB_VCP_BufferFull
  52              		.syntax unified
  53              		.thumb
  54              		.thumb_func
  55              		.fpu fpv4-sp-d16
  57              	TM_USB_VCP_BufferFull:
  58              	.LFB128:
  72:USB/config/tm_stm32f4_usb_vcp.c **** 
  73:USB/config/tm_stm32f4_usb_vcp.c **** uint8_t TM_USB_VCP_BufferFull(void)
  74:USB/config/tm_stm32f4_usb_vcp.c **** {
  59              		.loc 1 74 1 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
  75:USB/config/tm_stm32f4_usb_vcp.c **** 	return (tm_int_usb_vcp_buf_num == USB_VCP_RECEIVE_BUFFER_LENGTH);
  64              		.loc 1 75 2 view .LVU5
  65              		.loc 1 75 33 is_stmt 0 view .LVU6
  66 0000 034B     		ldr	r3, .L5
  67 0002 1868     		ldr	r0, [r3]
  76:USB/config/tm_stm32f4_usb_vcp.c **** }
  68              		.loc 1 76 1 view .LVU7
  69 0004 B0F5807F 		cmp	r0, #256
  70 0008 14BF     		ite	ne
  71 000a 0020     		movne	r0, #0
  72 000c 0120     		moveq	r0, #1
  73 000e 7047     		bx	lr
  74              	.L6:
  75              		.align	2
  76              	.L5:
  77 0010 00000000 		.word	tm_int_usb_vcp_buf_num
  78              		.cfi_endproc
  79              	.LFE128:
  81              		.section	.text.TM_USB_VCP_FindCharacter,"ax",%progbits
  82              		.align	1
  83              		.global	TM_USB_VCP_FindCharacter
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv4-sp-d16
  89              	TM_USB_VCP_FindCharacter:
  90              	.LVL0:
  91              	.LFB129:
  77:USB/config/tm_stm32f4_usb_vcp.c **** 
  78:USB/config/tm_stm32f4_usb_vcp.c **** uint8_t TM_USB_VCP_FindCharacter(volatile char c)
  79:USB/config/tm_stm32f4_usb_vcp.c **** {
  92              		.loc 1 79 1 is_stmt 1 view -0
  93              		.cfi_startproc
  94              		@ args = 0, pretend = 0, frame = 8
  95              		@ frame_needed = 0, uses_anonymous_args = 0
  96              		@ link register save eliminated.
  97              		.loc 1 79 1 is_stmt 0 view .LVU9
ARM GAS  /tmp/ccOOS6q9.s 			page 4


  98 0000 82B0     		sub	sp, sp, #8
  99              	.LCFI0:
 100              		.cfi_def_cfa_offset 8
 101 0002 8DF80700 		strb	r0, [sp, #7]
  80:USB/config/tm_stm32f4_usb_vcp.c **** 	uint16_t num, out;
 102              		.loc 1 80 2 is_stmt 1 view .LVU10
  81:USB/config/tm_stm32f4_usb_vcp.c **** 
  82:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Temp variables */
  83:USB/config/tm_stm32f4_usb_vcp.c **** 	num = tm_int_usb_vcp_buf_num;
 103              		.loc 1 83 2 view .LVU11
 104              		.loc 1 83 6 is_stmt 0 view .LVU12
 105 0006 0D4B     		ldr	r3, .L16
 106 0008 1A88     		ldrh	r2, [r3]
 107              	.LVL1:
  84:USB/config/tm_stm32f4_usb_vcp.c **** 	out = tm_int_usb_vcp_buf_out;
 108              		.loc 1 84 2 is_stmt 1 view .LVU13
 109              		.loc 1 84 6 is_stmt 0 view .LVU14
 110 000a 0D4B     		ldr	r3, .L16+4
 111 000c 1B88     		ldrh	r3, [r3]
 112              	.LVL2:
  85:USB/config/tm_stm32f4_usb_vcp.c **** 
  86:USB/config/tm_stm32f4_usb_vcp.c **** 	while (num > 0)
 113              		.loc 1 86 2 is_stmt 1 view .LVU15
 114              		.loc 1 86 8 is_stmt 0 view .LVU16
 115 000e 0AE0     		b	.L8
 116              	.LVL3:
 117              	.L9:
  87:USB/config/tm_stm32f4_usb_vcp.c **** 	{
  88:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Check overflow */
  89:USB/config/tm_stm32f4_usb_vcp.c **** 		if (out == USB_VCP_RECEIVE_BUFFER_LENGTH)
  90:USB/config/tm_stm32f4_usb_vcp.c **** 		{
  91:USB/config/tm_stm32f4_usb_vcp.c **** 			out = 0;
  92:USB/config/tm_stm32f4_usb_vcp.c **** 		}
  93:USB/config/tm_stm32f4_usb_vcp.c **** 		if (TM_INT_USB_VCP_ReceiveBuffer[out] == c)
 118              		.loc 1 93 3 is_stmt 1 view .LVU17
 119              		.loc 1 93 35 is_stmt 0 view .LVU18
 120 0010 0C49     		ldr	r1, .L16+8
 121 0012 C85C     		ldrb	r0, [r1, r3]	@ zero_extendqisi2
 122              		.loc 1 93 41 view .LVU19
 123 0014 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 124 0018 C9B2     		uxtb	r1, r1
 125              		.loc 1 93 6 view .LVU20
 126 001a 8842     		cmp	r0, r1
 127 001c 0CD0     		beq	.L13
  94:USB/config/tm_stm32f4_usb_vcp.c **** 		{
  95:USB/config/tm_stm32f4_usb_vcp.c **** 			/* Character found */
  96:USB/config/tm_stm32f4_usb_vcp.c **** 			return 1;
  97:USB/config/tm_stm32f4_usb_vcp.c **** 		}
  98:USB/config/tm_stm32f4_usb_vcp.c **** 		out++;
 128              		.loc 1 98 3 is_stmt 1 view .LVU21
 129              		.loc 1 98 6 is_stmt 0 view .LVU22
 130 001e 0133     		adds	r3, r3, #1
 131              	.LVL4:
 132              		.loc 1 98 6 view .LVU23
 133 0020 9BB2     		uxth	r3, r3
 134              	.LVL5:
  99:USB/config/tm_stm32f4_usb_vcp.c **** 		num--;
ARM GAS  /tmp/ccOOS6q9.s 			page 5


 135              		.loc 1 99 3 is_stmt 1 view .LVU24
 136              		.loc 1 99 6 is_stmt 0 view .LVU25
 137 0022 013A     		subs	r2, r2, #1
 138              	.LVL6:
 139              		.loc 1 99 6 view .LVU26
 140 0024 92B2     		uxth	r2, r2
 141              	.LVL7:
 142              	.L8:
  86:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 143              		.loc 1 86 8 view .LVU27
 144 0026 22B1     		cbz	r2, .L15
  89:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 145              		.loc 1 89 3 is_stmt 1 view .LVU28
  89:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 146              		.loc 1 89 6 is_stmt 0 view .LVU29
 147 0028 B3F5807F 		cmp	r3, #256
 148 002c F0D1     		bne	.L9
  91:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 149              		.loc 1 91 8 view .LVU30
 150 002e 0023     		movs	r3, #0
 151              	.LVL8:
  91:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 152              		.loc 1 91 8 view .LVU31
 153 0030 EEE7     		b	.L9
 154              	.LVL9:
 155              	.L15:
 100:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 101:USB/config/tm_stm32f4_usb_vcp.c **** 
 102:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Character is not in buffer */
 103:USB/config/tm_stm32f4_usb_vcp.c **** 	return 0;
 156              		.loc 1 103 9 view .LVU32
 157 0032 0020     		movs	r0, #0
 158              	.L10:
 104:USB/config/tm_stm32f4_usb_vcp.c **** }
 159              		.loc 1 104 1 view .LVU33
 160 0034 02B0     		add	sp, sp, #8
 161              	.LCFI1:
 162              		.cfi_remember_state
 163              		.cfi_def_cfa_offset 0
 164              		@ sp needed
 165 0036 7047     		bx	lr
 166              	.L13:
 167              	.LCFI2:
 168              		.cfi_restore_state
  96:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 169              		.loc 1 96 11 view .LVU34
 170 0038 0120     		movs	r0, #1
 171 003a FBE7     		b	.L10
 172              	.L17:
 173              		.align	2
 174              	.L16:
 175 003c 00000000 		.word	tm_int_usb_vcp_buf_num
 176 0040 00000000 		.word	tm_int_usb_vcp_buf_out
 177 0044 00000000 		.word	TM_INT_USB_VCP_ReceiveBuffer
 178              		.cfi_endproc
 179              	.LFE129:
 181              		.section	.text.TM_USB_VCP_Getc,"ax",%progbits
ARM GAS  /tmp/ccOOS6q9.s 			page 6


 182              		.align	1
 183              		.global	TM_USB_VCP_Getc
 184              		.syntax unified
 185              		.thumb
 186              		.thumb_func
 187              		.fpu fpv4-sp-d16
 189              	TM_USB_VCP_Getc:
 190              	.LVL10:
 191              	.LFB130:
 105:USB/config/tm_stm32f4_usb_vcp.c **** 
 106:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_Getc(uint8_t *c)
 107:USB/config/tm_stm32f4_usb_vcp.c **** {
 192              		.loc 1 107 1 is_stmt 1 view -0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		@ link register save eliminated.
 108:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Any data in buffer */
 109:USB/config/tm_stm32f4_usb_vcp.c **** 	if (tm_int_usb_vcp_buf_num > 0)
 197              		.loc 1 109 2 view .LVU36
 198              		.loc 1 109 29 is_stmt 0 view .LVU37
 199 0000 0E4B     		ldr	r3, .L23
 200 0002 1B68     		ldr	r3, [r3]
 201              		.loc 1 109 5 view .LVU38
 202 0004 1BB9     		cbnz	r3, .L22
 110:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 111:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Check overflow */
 112:USB/config/tm_stm32f4_usb_vcp.c **** 		if (tm_int_usb_vcp_buf_out >= USB_VCP_RECEIVE_BUFFER_LENGTH)
 113:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 114:USB/config/tm_stm32f4_usb_vcp.c **** 			tm_int_usb_vcp_buf_out = 0;
 115:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 116:USB/config/tm_stm32f4_usb_vcp.c **** 		*c = TM_INT_USB_VCP_ReceiveBuffer[tm_int_usb_vcp_buf_out];
 117:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_INT_USB_VCP_ReceiveBuffer[tm_int_usb_vcp_buf_out] = 0;
 118:USB/config/tm_stm32f4_usb_vcp.c **** 
 119:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Set counters */
 120:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_out++;
 121:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_num--;
 122:USB/config/tm_stm32f4_usb_vcp.c **** 
 123:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Data OK */
 124:USB/config/tm_stm32f4_usb_vcp.c **** 		return TM_USB_VCP_DATA_OK;
 125:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 126:USB/config/tm_stm32f4_usb_vcp.c **** 	*c = 0;
 203              		.loc 1 126 2 is_stmt 1 view .LVU39
 204              		.loc 1 126 5 is_stmt 0 view .LVU40
 205 0006 0023     		movs	r3, #0
 206 0008 0370     		strb	r3, [r0]
 127:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Data not ready */
 128:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_DATA_EMPTY;
 207              		.loc 1 128 2 is_stmt 1 view .LVU41
 208              		.loc 1 128 9 is_stmt 0 view .LVU42
 209 000a 0420     		movs	r0, #4
 210              	.LVL11:
 129:USB/config/tm_stm32f4_usb_vcp.c **** }
 211              		.loc 1 129 1 view .LVU43
 212 000c 7047     		bx	lr
 213              	.LVL12:
 214              	.L22:
ARM GAS  /tmp/ccOOS6q9.s 			page 7


 112:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 215              		.loc 1 112 3 is_stmt 1 view .LVU44
 112:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 216              		.loc 1 112 30 is_stmt 0 view .LVU45
 217 000e 0C4B     		ldr	r3, .L23+4
 218 0010 1B68     		ldr	r3, [r3]
 112:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 219              		.loc 1 112 6 view .LVU46
 220 0012 FF2B     		cmp	r3, #255
 221 0014 02D9     		bls	.L20
 114:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 222              		.loc 1 114 4 is_stmt 1 view .LVU47
 114:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 223              		.loc 1 114 27 is_stmt 0 view .LVU48
 224 0016 0A4B     		ldr	r3, .L23+4
 225 0018 0022     		movs	r2, #0
 226 001a 1A60     		str	r2, [r3]
 227              	.L20:
 116:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_INT_USB_VCP_ReceiveBuffer[tm_int_usb_vcp_buf_out] = 0;
 228              		.loc 1 116 3 is_stmt 1 view .LVU49
 116:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_INT_USB_VCP_ReceiveBuffer[tm_int_usb_vcp_buf_out] = 0;
 229              		.loc 1 116 36 is_stmt 0 view .LVU50
 230 001c 0949     		ldr	r1, .L23+8
 231 001e 084A     		ldr	r2, .L23+4
 232 0020 1368     		ldr	r3, [r2]
 233 0022 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 116:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_INT_USB_VCP_ReceiveBuffer[tm_int_usb_vcp_buf_out] = 0;
 234              		.loc 1 116 6 view .LVU51
 235 0024 0370     		strb	r3, [r0]
 117:USB/config/tm_stm32f4_usb_vcp.c **** 
 236              		.loc 1 117 3 is_stmt 1 view .LVU52
 117:USB/config/tm_stm32f4_usb_vcp.c **** 
 237              		.loc 1 117 31 is_stmt 0 view .LVU53
 238 0026 1368     		ldr	r3, [r2]
 117:USB/config/tm_stm32f4_usb_vcp.c **** 
 239              		.loc 1 117 56 view .LVU54
 240 0028 0020     		movs	r0, #0
 241              	.LVL13:
 117:USB/config/tm_stm32f4_usb_vcp.c **** 
 242              		.loc 1 117 56 view .LVU55
 243 002a C854     		strb	r0, [r1, r3]
 120:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_num--;
 244              		.loc 1 120 3 is_stmt 1 view .LVU56
 120:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_num--;
 245              		.loc 1 120 25 is_stmt 0 view .LVU57
 246 002c 0133     		adds	r3, r3, #1
 247 002e 1360     		str	r3, [r2]
 121:USB/config/tm_stm32f4_usb_vcp.c **** 
 248              		.loc 1 121 3 is_stmt 1 view .LVU58
 121:USB/config/tm_stm32f4_usb_vcp.c **** 
 249              		.loc 1 121 25 is_stmt 0 view .LVU59
 250 0030 024A     		ldr	r2, .L23
 251 0032 1368     		ldr	r3, [r2]
 252 0034 013B     		subs	r3, r3, #1
 253 0036 1360     		str	r3, [r2]
 124:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 254              		.loc 1 124 3 is_stmt 1 view .LVU60
ARM GAS  /tmp/ccOOS6q9.s 			page 8


 124:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 255              		.loc 1 124 10 is_stmt 0 view .LVU61
 256 0038 0320     		movs	r0, #3
 257 003a 7047     		bx	lr
 258              	.L24:
 259              		.align	2
 260              	.L23:
 261 003c 00000000 		.word	tm_int_usb_vcp_buf_num
 262 0040 00000000 		.word	tm_int_usb_vcp_buf_out
 263 0044 00000000 		.word	TM_INT_USB_VCP_ReceiveBuffer
 264              		.cfi_endproc
 265              	.LFE130:
 267              		.section	.text.TM_USB_VCP_Putc,"ax",%progbits
 268              		.align	1
 269              		.global	TM_USB_VCP_Putc
 270              		.syntax unified
 271              		.thumb
 272              		.thumb_func
 273              		.fpu fpv4-sp-d16
 275              	TM_USB_VCP_Putc:
 276              	.LVL14:
 277              	.LFB131:
 130:USB/config/tm_stm32f4_usb_vcp.c **** 
 131:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_Putc(volatile char c)
 132:USB/config/tm_stm32f4_usb_vcp.c **** {
 278              		.loc 1 132 1 is_stmt 1 view -0
 279              		.cfi_startproc
 280              		@ args = 0, pretend = 0, frame = 16
 281              		@ frame_needed = 0, uses_anonymous_args = 0
 282              		.loc 1 132 1 is_stmt 0 view .LVU63
 283 0000 00B5     		push	{lr}
 284              	.LCFI3:
 285              		.cfi_def_cfa_offset 4
 286              		.cfi_offset 14, -4
 287 0002 85B0     		sub	sp, sp, #20
 288              	.LCFI4:
 289              		.cfi_def_cfa_offset 24
 290 0004 8DF80700 		strb	r0, [sp, #7]
 133:USB/config/tm_stm32f4_usb_vcp.c **** 	uint8_t ce = (uint8_t)c;
 291              		.loc 1 133 2 is_stmt 1 view .LVU64
 292              		.loc 1 133 10 is_stmt 0 view .LVU65
 293 0008 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 294              	.LVL15:
 295              		.loc 1 133 10 view .LVU66
 296 000c 8DF80F30 		strb	r3, [sp, #15]
 134:USB/config/tm_stm32f4_usb_vcp.c **** 
 135:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Send data over USB */
 136:USB/config/tm_stm32f4_usb_vcp.c **** 	VCP_DataTx(&ce, 1);
 297              		.loc 1 136 2 is_stmt 1 view .LVU67
 298 0010 0121     		movs	r1, #1
 299 0012 0DF10F00 		add	r0, sp, #15
 300 0016 FFF7FEFF 		bl	VCP_DataTx
 301              	.LVL16:
 137:USB/config/tm_stm32f4_usb_vcp.c **** 
 138:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return OK */
 139:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_OK;
 302              		.loc 1 139 2 view .LVU68
ARM GAS  /tmp/ccOOS6q9.s 			page 9


 140:USB/config/tm_stm32f4_usb_vcp.c **** }
 303              		.loc 1 140 1 is_stmt 0 view .LVU69
 304 001a 0020     		movs	r0, #0
 305 001c 05B0     		add	sp, sp, #20
 306              	.LCFI5:
 307              		.cfi_def_cfa_offset 4
 308              		@ sp needed
 309 001e 5DF804FB 		ldr	pc, [sp], #4
 310              		.cfi_endproc
 311              	.LFE131:
 313              		.section	.text.TM_USB_VCP_Puts,"ax",%progbits
 314              		.align	1
 315              		.global	TM_USB_VCP_Puts
 316              		.syntax unified
 317              		.thumb
 318              		.thumb_func
 319              		.fpu fpv4-sp-d16
 321              	TM_USB_VCP_Puts:
 322              	.LVL17:
 323              	.LFB132:
 141:USB/config/tm_stm32f4_usb_vcp.c **** 
 142:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_Puts(char *str)
 143:USB/config/tm_stm32f4_usb_vcp.c **** {
 324              		.loc 1 143 1 is_stmt 1 view -0
 325              		.cfi_startproc
 326              		@ args = 0, pretend = 0, frame = 0
 327              		@ frame_needed = 0, uses_anonymous_args = 0
 328              		.loc 1 143 1 is_stmt 0 view .LVU71
 329 0000 10B5     		push	{r4, lr}
 330              	.LCFI6:
 331              		.cfi_def_cfa_offset 8
 332              		.cfi_offset 4, -8
 333              		.cfi_offset 14, -4
 334 0002 0446     		mov	r4, r0
 144:USB/config/tm_stm32f4_usb_vcp.c **** 	while (*str)
 335              		.loc 1 144 2 is_stmt 1 view .LVU72
 336              	.LVL18:
 337              	.L28:
 338              		.loc 1 144 9 is_stmt 0 view .LVU73
 339 0004 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 340              		.loc 1 144 8 view .LVU74
 341 0006 18B1     		cbz	r0, .L31
 145:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 146:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_USB_VCP_Putc(*str++);
 342              		.loc 1 146 3 is_stmt 1 view .LVU75
 343              		.loc 1 146 23 is_stmt 0 view .LVU76
 344 0008 0134     		adds	r4, r4, #1
 345              	.LVL19:
 346              		.loc 1 146 3 view .LVU77
 347 000a FFF7FEFF 		bl	TM_USB_VCP_Putc
 348              	.LVL20:
 349 000e F9E7     		b	.L28
 350              	.L31:
 147:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 148:USB/config/tm_stm32f4_usb_vcp.c **** 
 149:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return OK */
 150:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_OK;
ARM GAS  /tmp/ccOOS6q9.s 			page 10


 151:USB/config/tm_stm32f4_usb_vcp.c **** }
 351              		.loc 1 151 1 view .LVU78
 352 0010 10BD     		pop	{r4, pc}
 353              		.loc 1 151 1 view .LVU79
 354              		.cfi_endproc
 355              	.LFE132:
 357              		.section	.text.TM_USB_VCP_Send,"ax",%progbits
 358              		.align	1
 359              		.global	TM_USB_VCP_Send
 360              		.syntax unified
 361              		.thumb
 362              		.thumb_func
 363              		.fpu fpv4-sp-d16
 365              	TM_USB_VCP_Send:
 366              	.LVL21:
 367              	.LFB133:
 152:USB/config/tm_stm32f4_usb_vcp.c **** 
 153:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_Send(uint8_t *DataArray, uint32_t Length)
 154:USB/config/tm_stm32f4_usb_vcp.c **** {
 368              		.loc 1 154 1 is_stmt 1 view -0
 369              		.cfi_startproc
 370              		@ args = 0, pretend = 0, frame = 0
 371              		@ frame_needed = 0, uses_anonymous_args = 0
 372              		.loc 1 154 1 is_stmt 0 view .LVU81
 373 0000 08B5     		push	{r3, lr}
 374              	.LCFI7:
 375              		.cfi_def_cfa_offset 8
 376              		.cfi_offset 3, -8
 377              		.cfi_offset 14, -4
 155:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Send array */
 156:USB/config/tm_stm32f4_usb_vcp.c **** 	VCP_DataTx(DataArray, Length);
 378              		.loc 1 156 2 is_stmt 1 view .LVU82
 379 0002 FFF7FEFF 		bl	VCP_DataTx
 380              	.LVL22:
 157:USB/config/tm_stm32f4_usb_vcp.c **** 
 158:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return OK */
 159:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_OK;
 381              		.loc 1 159 2 view .LVU83
 160:USB/config/tm_stm32f4_usb_vcp.c **** }
 382              		.loc 1 160 1 is_stmt 0 view .LVU84
 383 0006 0020     		movs	r0, #0
 384 0008 08BD     		pop	{r3, pc}
 385              		.cfi_endproc
 386              	.LFE133:
 388              		.section	.text.TM_USB_VCP_Gets,"ax",%progbits
 389              		.align	1
 390              		.global	TM_USB_VCP_Gets
 391              		.syntax unified
 392              		.thumb
 393              		.thumb_func
 394              		.fpu fpv4-sp-d16
 396              	TM_USB_VCP_Gets:
 397              	.LVL23:
 398              	.LFB134:
 161:USB/config/tm_stm32f4_usb_vcp.c **** 
 162:USB/config/tm_stm32f4_usb_vcp.c **** uint16_t TM_USB_VCP_Gets(char *buffer, uint16_t bufsize)
 163:USB/config/tm_stm32f4_usb_vcp.c **** {
ARM GAS  /tmp/ccOOS6q9.s 			page 11


 399              		.loc 1 163 1 is_stmt 1 view -0
 400              		.cfi_startproc
 401              		@ args = 0, pretend = 0, frame = 8
 402              		@ frame_needed = 0, uses_anonymous_args = 0
 403              		.loc 1 163 1 is_stmt 0 view .LVU86
 404 0000 70B5     		push	{r4, r5, r6, lr}
 405              	.LCFI8:
 406              		.cfi_def_cfa_offset 16
 407              		.cfi_offset 4, -16
 408              		.cfi_offset 5, -12
 409              		.cfi_offset 6, -8
 410              		.cfi_offset 14, -4
 411 0002 82B0     		sub	sp, sp, #8
 412              	.LCFI9:
 413              		.cfi_def_cfa_offset 24
 414 0004 0546     		mov	r5, r0
 415 0006 0E46     		mov	r6, r1
 164:USB/config/tm_stm32f4_usb_vcp.c **** 	uint16_t i = 0;
 416              		.loc 1 164 2 is_stmt 1 view .LVU87
 417              	.LVL24:
 165:USB/config/tm_stm32f4_usb_vcp.c **** 	uint8_t c;
 418              		.loc 1 165 2 view .LVU88
 166:USB/config/tm_stm32f4_usb_vcp.c **** 
 167:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Check for any data on USART */
 168:USB/config/tm_stm32f4_usb_vcp.c **** 	if (TM_USB_VCP_BufferEmpty() || (!TM_USB_VCP_FindCharacter('\n') && !TM_USB_VCP_BufferFull()))
 419              		.loc 1 168 2 view .LVU89
 420              		.loc 1 168 6 is_stmt 0 view .LVU90
 421 0008 FFF7FEFF 		bl	TM_USB_VCP_BufferEmpty
 422              	.LVL25:
 423              		.loc 1 168 5 view .LVU91
 424 000c 18B1     		cbz	r0, .L45
 425              	.L35:
 169:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 170:USB/config/tm_stm32f4_usb_vcp.c **** 		return 0;
 426              		.loc 1 170 3 is_stmt 1 view .LVU92
 427              		.loc 1 170 10 is_stmt 0 view .LVU93
 428 000e 0024     		movs	r4, #0
 429              	.LVL26:
 430              	.L37:
 171:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 172:USB/config/tm_stm32f4_usb_vcp.c **** 
 173:USB/config/tm_stm32f4_usb_vcp.c **** 	/* If available buffer size is more than 0 characters */
 174:USB/config/tm_stm32f4_usb_vcp.c **** 	while (i < (bufsize - 1))
 175:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 176:USB/config/tm_stm32f4_usb_vcp.c **** 		/* We have available data */
 177:USB/config/tm_stm32f4_usb_vcp.c **** 		while (TM_USB_VCP_Getc(&c) != TM_USB_VCP_DATA_OK)
 178:USB/config/tm_stm32f4_usb_vcp.c **** 			;
 179:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Save new data */
 180:USB/config/tm_stm32f4_usb_vcp.c **** 		buffer[i] = (char)c;
 181:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Check for end of string */
 182:USB/config/tm_stm32f4_usb_vcp.c **** 		if (buffer[i] == '\n')
 183:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 184:USB/config/tm_stm32f4_usb_vcp.c **** 			i++;
 185:USB/config/tm_stm32f4_usb_vcp.c **** 			/* Done */
 186:USB/config/tm_stm32f4_usb_vcp.c **** 			break;
 187:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 188:USB/config/tm_stm32f4_usb_vcp.c **** 		else
ARM GAS  /tmp/ccOOS6q9.s 			page 12


 189:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 190:USB/config/tm_stm32f4_usb_vcp.c **** 			i++;
 191:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 192:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 193:USB/config/tm_stm32f4_usb_vcp.c **** 
 194:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Add zero to the end of string */
 195:USB/config/tm_stm32f4_usb_vcp.c **** 	buffer[i] = 0;
 196:USB/config/tm_stm32f4_usb_vcp.c **** 
 197:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return number of characters in string */
 198:USB/config/tm_stm32f4_usb_vcp.c **** 	return i;
 199:USB/config/tm_stm32f4_usb_vcp.c **** }
 431              		.loc 1 199 1 view .LVU94
 432 0010 2046     		mov	r0, r4
 433 0012 02B0     		add	sp, sp, #8
 434              	.LCFI10:
 435              		.cfi_remember_state
 436              		.cfi_def_cfa_offset 16
 437              		@ sp needed
 438 0014 70BD     		pop	{r4, r5, r6, pc}
 439              	.LVL27:
 440              	.L45:
 441              	.LCFI11:
 442              		.cfi_restore_state
 168:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 443              		.loc 1 168 36 discriminator 1 view .LVU95
 444 0016 0A20     		movs	r0, #10
 445 0018 FFF7FEFF 		bl	TM_USB_VCP_FindCharacter
 446              	.LVL28:
 168:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 447              		.loc 1 168 31 discriminator 1 view .LVU96
 448 001c 50B9     		cbnz	r0, .L42
 168:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 449              		.loc 1 168 71 discriminator 2 view .LVU97
 450 001e FFF7FEFF 		bl	TM_USB_VCP_BufferFull
 451              	.LVL29:
 168:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 452              		.loc 1 168 67 discriminator 2 view .LVU98
 453 0022 0028     		cmp	r0, #0
 454 0024 F3D0     		beq	.L35
 455 0026 0024     		movs	r4, #0
 456 0028 05E0     		b	.L41
 457              	.LVL30:
 458              	.L46:
 184:USB/config/tm_stm32f4_usb_vcp.c **** 			/* Done */
 459              		.loc 1 184 4 is_stmt 1 view .LVU99
 184:USB/config/tm_stm32f4_usb_vcp.c **** 			/* Done */
 460              		.loc 1 184 5 is_stmt 0 view .LVU100
 461 002a 0134     		adds	r4, r4, #1
 462              	.LVL31:
 184:USB/config/tm_stm32f4_usb_vcp.c **** 			/* Done */
 463              		.loc 1 184 5 view .LVU101
 464 002c A4B2     		uxth	r4, r4
 465              	.LVL32:
 186:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 466              		.loc 1 186 4 is_stmt 1 view .LVU102
 467              	.L40:
 195:USB/config/tm_stm32f4_usb_vcp.c **** 
ARM GAS  /tmp/ccOOS6q9.s 			page 13


 468              		.loc 1 195 2 view .LVU103
 195:USB/config/tm_stm32f4_usb_vcp.c **** 
 469              		.loc 1 195 12 is_stmt 0 view .LVU104
 470 002e 0023     		movs	r3, #0
 471 0030 2B55     		strb	r3, [r5, r4]
 198:USB/config/tm_stm32f4_usb_vcp.c **** }
 472              		.loc 1 198 2 is_stmt 1 view .LVU105
 198:USB/config/tm_stm32f4_usb_vcp.c **** }
 473              		.loc 1 198 9 is_stmt 0 view .LVU106
 474 0032 EDE7     		b	.L37
 475              	.LVL33:
 476              	.L42:
 198:USB/config/tm_stm32f4_usb_vcp.c **** }
 477              		.loc 1 198 9 view .LVU107
 478 0034 0024     		movs	r4, #0
 479              	.LVL34:
 480              	.L41:
 174:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 481              		.loc 1 174 22 view .LVU108
 482 0036 731E     		subs	r3, r6, #1
 174:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 483              		.loc 1 174 8 view .LVU109
 484 0038 9C42     		cmp	r4, r3
 485 003a F8DA     		bge	.L40
 486              	.L38:
 178:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Save new data */
 487              		.loc 1 178 4 is_stmt 1 discriminator 1 view .LVU110
 177:USB/config/tm_stm32f4_usb_vcp.c **** 			;
 488              		.loc 1 177 10 is_stmt 0 discriminator 1 view .LVU111
 489 003c 0DF10700 		add	r0, sp, #7
 490 0040 FFF7FEFF 		bl	TM_USB_VCP_Getc
 491              	.LVL35:
 177:USB/config/tm_stm32f4_usb_vcp.c **** 			;
 492              		.loc 1 177 9 discriminator 1 view .LVU112
 493 0044 0328     		cmp	r0, #3
 494 0046 F9D1     		bne	.L38
 180:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Check for end of string */
 495              		.loc 1 180 3 is_stmt 1 view .LVU113
 180:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Check for end of string */
 496              		.loc 1 180 13 is_stmt 0 view .LVU114
 497 0048 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 498 004c 2B55     		strb	r3, [r5, r4]
 182:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 499              		.loc 1 182 3 is_stmt 1 view .LVU115
 182:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 500              		.loc 1 182 6 is_stmt 0 view .LVU116
 501 004e 0A2B     		cmp	r3, #10
 502 0050 EBD0     		beq	.L46
 190:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 503              		.loc 1 190 4 is_stmt 1 view .LVU117
 190:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 504              		.loc 1 190 5 is_stmt 0 view .LVU118
 505 0052 0134     		adds	r4, r4, #1
 506              	.LVL36:
 190:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 507              		.loc 1 190 5 view .LVU119
 508 0054 A4B2     		uxth	r4, r4
ARM GAS  /tmp/ccOOS6q9.s 			page 14


 509              	.LVL37:
 190:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 510              		.loc 1 190 5 view .LVU120
 511 0056 EEE7     		b	.L41
 512              		.cfi_endproc
 513              	.LFE134:
 515              		.section	.text.TM_INT_USB_VCP_AddReceived,"ax",%progbits
 516              		.align	1
 517              		.global	TM_INT_USB_VCP_AddReceived
 518              		.syntax unified
 519              		.thumb
 520              		.thumb_func
 521              		.fpu fpv4-sp-d16
 523              	TM_INT_USB_VCP_AddReceived:
 524              	.LVL38:
 525              	.LFB135:
 200:USB/config/tm_stm32f4_usb_vcp.c **** 
 201:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_INT_USB_VCP_AddReceived(uint8_t c)
 202:USB/config/tm_stm32f4_usb_vcp.c **** {
 526              		.loc 1 202 1 is_stmt 1 view -0
 527              		.cfi_startproc
 528              		@ args = 0, pretend = 0, frame = 0
 529              		@ frame_needed = 0, uses_anonymous_args = 0
 530              		@ link register save eliminated.
 203:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Still available data in buffer */
 204:USB/config/tm_stm32f4_usb_vcp.c **** 	if (tm_int_usb_vcp_buf_num < USB_VCP_RECEIVE_BUFFER_LENGTH)
 531              		.loc 1 204 2 view .LVU122
 532              		.loc 1 204 29 is_stmt 0 view .LVU123
 533 0000 0D4B     		ldr	r3, .L56
 534 0002 1B68     		ldr	r3, [r3]
 535              		.loc 1 204 5 view .LVU124
 536 0004 FF2B     		cmp	r3, #255
 537 0006 01D9     		bls	.L55
 205:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 206:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Check for overflow */
 207:USB/config/tm_stm32f4_usb_vcp.c **** 		if (tm_int_usb_vcp_buf_in >= USB_VCP_RECEIVE_BUFFER_LENGTH)
 208:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 209:USB/config/tm_stm32f4_usb_vcp.c **** 			tm_int_usb_vcp_buf_in = 0;
 210:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 211:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Add character to buffer */
 212:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_INT_USB_VCP_ReceiveBuffer[tm_int_usb_vcp_buf_in] = c;
 213:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Increase counters */
 214:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_in++;
 215:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_num++;
 216:USB/config/tm_stm32f4_usb_vcp.c **** 
 217:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Return OK */
 218:USB/config/tm_stm32f4_usb_vcp.c **** 		return TM_USB_VCP_OK;
 219:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 220:USB/config/tm_stm32f4_usb_vcp.c **** 
 221:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return Buffer full */
 222:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_RECEIVE_BUFFER_FULL;
 538              		.loc 1 222 9 view .LVU125
 539 0008 0220     		movs	r0, #2
 540              	.LVL39:
 223:USB/config/tm_stm32f4_usb_vcp.c **** }
 541              		.loc 1 223 1 view .LVU126
 542 000a 7047     		bx	lr
ARM GAS  /tmp/ccOOS6q9.s 			page 15


 543              	.LVL40:
 544              	.L55:
 202:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Still available data in buffer */
 545              		.loc 1 202 1 view .LVU127
 546 000c 10B4     		push	{r4}
 547              	.LCFI12:
 548              		.cfi_def_cfa_offset 4
 549              		.cfi_offset 4, -4
 207:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 550              		.loc 1 207 3 is_stmt 1 view .LVU128
 207:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 551              		.loc 1 207 29 is_stmt 0 view .LVU129
 552 000e 0B4A     		ldr	r2, .L56+4
 553 0010 1268     		ldr	r2, [r2]
 207:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 554              		.loc 1 207 6 view .LVU130
 555 0012 FF2A     		cmp	r2, #255
 556 0014 02D9     		bls	.L49
 209:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 557              		.loc 1 209 4 is_stmt 1 view .LVU131
 209:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 558              		.loc 1 209 26 is_stmt 0 view .LVU132
 559 0016 094A     		ldr	r2, .L56+4
 560 0018 0021     		movs	r1, #0
 561 001a 1160     		str	r1, [r2]
 562              	.L49:
 212:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Increase counters */
 563              		.loc 1 212 3 is_stmt 1 view .LVU133
 212:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Increase counters */
 564              		.loc 1 212 31 is_stmt 0 view .LVU134
 565 001c 0749     		ldr	r1, .L56+4
 566 001e 0A68     		ldr	r2, [r1]
 212:USB/config/tm_stm32f4_usb_vcp.c **** 		/* Increase counters */
 567              		.loc 1 212 55 view .LVU135
 568 0020 074C     		ldr	r4, .L56+8
 569 0022 A054     		strb	r0, [r4, r2]
 214:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_num++;
 570              		.loc 1 214 3 is_stmt 1 view .LVU136
 214:USB/config/tm_stm32f4_usb_vcp.c **** 		tm_int_usb_vcp_buf_num++;
 571              		.loc 1 214 24 is_stmt 0 view .LVU137
 572 0024 0132     		adds	r2, r2, #1
 573 0026 0A60     		str	r2, [r1]
 215:USB/config/tm_stm32f4_usb_vcp.c **** 
 574              		.loc 1 215 3 is_stmt 1 view .LVU138
 215:USB/config/tm_stm32f4_usb_vcp.c **** 
 575              		.loc 1 215 25 is_stmt 0 view .LVU139
 576 0028 0133     		adds	r3, r3, #1
 577 002a 034A     		ldr	r2, .L56
 578 002c 1360     		str	r3, [r2]
 218:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 579              		.loc 1 218 3 is_stmt 1 view .LVU140
 218:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 580              		.loc 1 218 10 is_stmt 0 view .LVU141
 581 002e 0020     		movs	r0, #0
 582              	.LVL41:
 583              		.loc 1 223 1 view .LVU142
 584 0030 5DF8044B 		ldr	r4, [sp], #4
ARM GAS  /tmp/ccOOS6q9.s 			page 16


 585              	.LCFI13:
 586              		.cfi_restore 4
 587              		.cfi_def_cfa_offset 0
 588              	.LVL42:
 589              		.loc 1 223 1 view .LVU143
 590 0034 7047     		bx	lr
 591              	.L57:
 592 0036 00BF     		.align	2
 593              	.L56:
 594 0038 00000000 		.word	tm_int_usb_vcp_buf_num
 595 003c 00000000 		.word	tm_int_usb_vcp_buf_in
 596 0040 00000000 		.word	TM_INT_USB_VCP_ReceiveBuffer
 597              		.cfi_endproc
 598              	.LFE135:
 600              		.section	.text.TM_USB_VCP_GetStatus,"ax",%progbits
 601              		.align	1
 602              		.global	TM_USB_VCP_GetStatus
 603              		.syntax unified
 604              		.thumb
 605              		.thumb_func
 606              		.fpu fpv4-sp-d16
 608              	TM_USB_VCP_GetStatus:
 609              	.LFB136:
 224:USB/config/tm_stm32f4_usb_vcp.c **** 
 225:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_GetStatus(void)
 226:USB/config/tm_stm32f4_usb_vcp.c **** {
 610              		.loc 1 226 1 is_stmt 1 view -0
 611              		.cfi_startproc
 612              		@ args = 0, pretend = 0, frame = 0
 613              		@ frame_needed = 0, uses_anonymous_args = 0
 614              		@ link register save eliminated.
 227:USB/config/tm_stm32f4_usb_vcp.c **** 	if (TM_USB_VCP_INT_Init)
 615              		.loc 1 227 2 view .LVU145
 616              		.loc 1 227 6 is_stmt 0 view .LVU146
 617 0000 034B     		ldr	r3, .L62
 618 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 619              		.loc 1 227 5 view .LVU147
 620 0004 0BB9     		cbnz	r3, .L61
 228:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 229:USB/config/tm_stm32f4_usb_vcp.c **** 		return TM_USB_VCP_INT_Status;
 230:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 231:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_ERROR;
 621              		.loc 1 231 9 view .LVU148
 622 0006 0120     		movs	r0, #1
 232:USB/config/tm_stm32f4_usb_vcp.c **** }
 623              		.loc 1 232 1 view .LVU149
 624 0008 7047     		bx	lr
 625              	.L61:
 229:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 626              		.loc 1 229 3 is_stmt 1 view .LVU150
 229:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 627              		.loc 1 229 10 is_stmt 0 view .LVU151
 628 000a 024B     		ldr	r3, .L62+4
 629 000c 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 630 000e 7047     		bx	lr
 631              	.L63:
 632              		.align	2
ARM GAS  /tmp/ccOOS6q9.s 			page 17


 633              	.L62:
 634 0010 00000000 		.word	.LANCHOR0
 635 0014 00000000 		.word	TM_USB_VCP_INT_Status
 636              		.cfi_endproc
 637              	.LFE136:
 639              		.section	.text.TM_USB_VCP_GetSettings,"ax",%progbits
 640              		.align	1
 641              		.global	TM_USB_VCP_GetSettings
 642              		.syntax unified
 643              		.thumb
 644              		.thumb_func
 645              		.fpu fpv4-sp-d16
 647              	TM_USB_VCP_GetSettings:
 648              	.LVL43:
 649              	.LFB137:
 233:USB/config/tm_stm32f4_usb_vcp.c **** 
 234:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_Result TM_USB_VCP_GetSettings(TM_USB_VCP_Settings_t *Settings)
 235:USB/config/tm_stm32f4_usb_vcp.c **** {
 650              		.loc 1 235 1 is_stmt 1 view -0
 651              		.cfi_startproc
 652              		@ args = 0, pretend = 0, frame = 0
 653              		@ frame_needed = 0, uses_anonymous_args = 0
 654              		@ link register save eliminated.
 236:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Fill data */
 237:USB/config/tm_stm32f4_usb_vcp.c **** 	Settings->Baudrate = linecoding.bitrate;
 655              		.loc 1 237 2 view .LVU153
 656              		.loc 1 237 33 is_stmt 0 view .LVU154
 657 0000 064B     		ldr	r3, .L65
 658 0002 1A68     		ldr	r2, [r3]
 659              		.loc 1 237 21 view .LVU155
 660 0004 0260     		str	r2, [r0]
 238:USB/config/tm_stm32f4_usb_vcp.c **** 	Settings->DataBits = linecoding.datatype;
 661              		.loc 1 238 2 is_stmt 1 view .LVU156
 662              		.loc 1 238 33 is_stmt 0 view .LVU157
 663 0006 9A79     		ldrb	r2, [r3, #6]	@ zero_extendqisi2
 664              		.loc 1 238 21 view .LVU158
 665 0008 4271     		strb	r2, [r0, #5]
 239:USB/config/tm_stm32f4_usb_vcp.c **** 	Settings->Parity = linecoding.paritytype;
 666              		.loc 1 239 2 is_stmt 1 view .LVU159
 667              		.loc 1 239 31 is_stmt 0 view .LVU160
 668 000a 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 669              		.loc 1 239 19 view .LVU161
 670 000c 8271     		strb	r2, [r0, #6]
 240:USB/config/tm_stm32f4_usb_vcp.c **** 	Settings->Stopbits = linecoding.format;
 671              		.loc 1 240 2 is_stmt 1 view .LVU162
 672              		.loc 1 240 33 is_stmt 0 view .LVU163
 673 000e 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 674              		.loc 1 240 21 view .LVU164
 675 0010 0271     		strb	r2, [r0, #4]
 241:USB/config/tm_stm32f4_usb_vcp.c **** 	Settings->Changed = linecoding.changed;
 676              		.loc 1 241 2 is_stmt 1 view .LVU165
 677              		.loc 1 241 32 is_stmt 0 view .LVU166
 678 0012 DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 679              		.loc 1 241 20 view .LVU167
 680 0014 C271     		strb	r2, [r0, #7]
 242:USB/config/tm_stm32f4_usb_vcp.c **** 
 243:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Clear changed flag */
ARM GAS  /tmp/ccOOS6q9.s 			page 18


 244:USB/config/tm_stm32f4_usb_vcp.c **** 	linecoding.changed = 0;
 681              		.loc 1 244 2 is_stmt 1 view .LVU168
 682              		.loc 1 244 21 is_stmt 0 view .LVU169
 683 0016 0020     		movs	r0, #0
 684              	.LVL44:
 685              		.loc 1 244 21 view .LVU170
 686 0018 D871     		strb	r0, [r3, #7]
 245:USB/config/tm_stm32f4_usb_vcp.c **** 
 246:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Return OK */
 247:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_OK;
 687              		.loc 1 247 2 is_stmt 1 view .LVU171
 248:USB/config/tm_stm32f4_usb_vcp.c **** }
 688              		.loc 1 248 1 is_stmt 0 view .LVU172
 689 001a 7047     		bx	lr
 690              	.L66:
 691              		.align	2
 692              	.L65:
 693 001c 00000000 		.word	linecoding
 694              		.cfi_endproc
 695              	.LFE137:
 697              		.section	.text.TM_USB_VCP_Set_IRQ,"ax",%progbits
 698              		.align	1
 699              		.global	TM_USB_VCP_Set_IRQ
 700              		.syntax unified
 701              		.thumb
 702              		.thumb_func
 703              		.fpu fpv4-sp-d16
 705              	TM_USB_VCP_Set_IRQ:
 706              	.LVL45:
 707              	.LFB138:
 249:USB/config/tm_stm32f4_usb_vcp.c **** 
 250:USB/config/tm_stm32f4_usb_vcp.c **** void TM_USB_VCP_Set_IRQ(uint8_t *data, uint16_t data_len)
 251:USB/config/tm_stm32f4_usb_vcp.c **** {
 708              		.loc 1 251 1 is_stmt 1 view -0
 709              		.cfi_startproc
 710              		@ args = 0, pretend = 0, frame = 0
 711              		@ frame_needed = 0, uses_anonymous_args = 0
 712              		@ link register save eliminated.
 252:USB/config/tm_stm32f4_usb_vcp.c **** 
 253:USB/config/tm_stm32f4_usb_vcp.c **** 	for (uint16_t i = 0; i < data_len; i++)
 713              		.loc 1 253 2 view .LVU174
 714              	.LBB2:
 715              		.loc 1 253 7 view .LVU175
 716              		.loc 1 253 16 is_stmt 0 view .LVU176
 717 0000 0023     		movs	r3, #0
 718              	.LVL46:
 719              		.loc 1 253 2 view .LVU177
 720 0002 8B42     		cmp	r3, r1
 721 0004 18D2     		bcs	.L76
 722              	.LBE2:
 251:USB/config/tm_stm32f4_usb_vcp.c **** 
 723              		.loc 1 251 1 view .LVU178
 724 0006 30B4     		push	{r4, r5}
 725              	.LCFI14:
 726              		.cfi_def_cfa_offset 8
 727              		.cfi_offset 4, -8
 728              		.cfi_offset 5, -4
ARM GAS  /tmp/ccOOS6q9.s 			page 19


 729 0008 06E0     		b	.L71
 730              	.L69:
 731              	.LBB3:
 254:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 255:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_IRQ_Data.Buff[TM_IRQ_Data.Data_Len] = data[i];
 256:USB/config/tm_stm32f4_usb_vcp.c **** 
 257:USB/config/tm_stm32f4_usb_vcp.c **** 		if ((data[i] == PackEnd[0]) && (data[i + 1] == PackEnd[1]))
 258:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 259:USB/config/tm_stm32f4_usb_vcp.c **** 			TM_USB_VCP_IRQ_Status = TM_USB_VCP_IRQ_SET;
 260:USB/config/tm_stm32f4_usb_vcp.c **** 			break;
 261:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 262:USB/config/tm_stm32f4_usb_vcp.c **** 		else
 263:USB/config/tm_stm32f4_usb_vcp.c **** 			TM_IRQ_Data.Data_Len++;
 732              		.loc 1 263 4 is_stmt 1 discriminator 2 view .LVU179
 733              		.loc 1 263 24 is_stmt 0 discriminator 2 view .LVU180
 734 000a 0134     		adds	r4, r4, #1
 735 000c 0B4A     		ldr	r2, .L77
 736 000e 1480     		strh	r4, [r2]	@ movhi
 253:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 737              		.loc 1 253 38 discriminator 2 view .LVU181
 738 0010 0133     		adds	r3, r3, #1
 739              	.LVL47:
 253:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 740              		.loc 1 253 38 discriminator 2 view .LVU182
 741 0012 9BB2     		uxth	r3, r3
 742              	.LVL48:
 253:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 743              		.loc 1 253 2 discriminator 2 view .LVU183
 744 0014 8B42     		cmp	r3, r1
 745 0016 0DD2     		bcs	.L67
 746              	.L71:
 255:USB/config/tm_stm32f4_usb_vcp.c **** 
 747              		.loc 1 255 3 is_stmt 1 view .LVU184
 255:USB/config/tm_stm32f4_usb_vcp.c **** 
 748              		.loc 1 255 31 is_stmt 0 view .LVU185
 749 0018 084A     		ldr	r2, .L77
 750 001a 1488     		ldrh	r4, [r2]
 255:USB/config/tm_stm32f4_usb_vcp.c **** 
 751              		.loc 1 255 48 view .LVU186
 752 001c C55C     		ldrb	r5, [r0, r3]	@ zero_extendqisi2
 255:USB/config/tm_stm32f4_usb_vcp.c **** 
 753              		.loc 1 255 42 view .LVU187
 754 001e 2244     		add	r2, r2, r4
 755 0020 9570     		strb	r5, [r2, #2]
 257:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 756              		.loc 1 257 3 is_stmt 1 view .LVU188
 257:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 757              		.loc 1 257 6 is_stmt 0 view .LVU189
 758 0022 0D2D     		cmp	r5, #13
 759 0024 F1D1     		bne	.L69
 257:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 760              		.loc 1 257 39 discriminator 1 view .LVU190
 761 0026 C218     		adds	r2, r0, r3
 762 0028 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 257:USB/config/tm_stm32f4_usb_vcp.c **** 		{
 763              		.loc 1 257 31 discriminator 1 view .LVU191
 764 002a 0A2A     		cmp	r2, #10
ARM GAS  /tmp/ccOOS6q9.s 			page 20


 765 002c EDD1     		bne	.L69
 259:USB/config/tm_stm32f4_usb_vcp.c **** 			break;
 766              		.loc 1 259 4 is_stmt 1 view .LVU192
 259:USB/config/tm_stm32f4_usb_vcp.c **** 			break;
 767              		.loc 1 259 26 is_stmt 0 view .LVU193
 768 002e 044B     		ldr	r3, .L77+4
 769              	.LVL49:
 259:USB/config/tm_stm32f4_usb_vcp.c **** 			break;
 770              		.loc 1 259 26 view .LVU194
 771 0030 0122     		movs	r2, #1
 772 0032 1A70     		strb	r2, [r3]
 260:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 773              		.loc 1 260 4 is_stmt 1 view .LVU195
 774              	.L67:
 260:USB/config/tm_stm32f4_usb_vcp.c **** 		}
 775              		.loc 1 260 4 is_stmt 0 view .LVU196
 776              	.LBE3:
 264:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 265:USB/config/tm_stm32f4_usb_vcp.c **** }
 777              		.loc 1 265 1 view .LVU197
 778 0034 30BC     		pop	{r4, r5}
 779              	.LCFI15:
 780              		.cfi_restore 5
 781              		.cfi_restore 4
 782              		.cfi_def_cfa_offset 0
 783 0036 7047     		bx	lr
 784              	.LVL50:
 785              	.L76:
 786              		.loc 1 265 1 view .LVU198
 787 0038 7047     		bx	lr
 788              	.L78:
 789 003a 00BF     		.align	2
 790              	.L77:
 791 003c 00000000 		.word	TM_IRQ_Data
 792 0040 00000000 		.word	.LANCHOR1
 793              		.cfi_endproc
 794              	.LFE138:
 796              		.section	.text.TM_USB_VCP_Get_IRQState,"ax",%progbits
 797              		.align	1
 798              		.global	TM_USB_VCP_Get_IRQState
 799              		.syntax unified
 800              		.thumb
 801              		.thumb_func
 802              		.fpu fpv4-sp-d16
 804              	TM_USB_VCP_Get_IRQState:
 805              	.LFB139:
 266:USB/config/tm_stm32f4_usb_vcp.c **** 
 267:USB/config/tm_stm32f4_usb_vcp.c **** TM_USB_VCP_IRQ TM_USB_VCP_Get_IRQState(void)
 268:USB/config/tm_stm32f4_usb_vcp.c **** {
 806              		.loc 1 268 1 is_stmt 1 view -0
 807              		.cfi_startproc
 808              		@ args = 0, pretend = 0, frame = 0
 809              		@ frame_needed = 0, uses_anonymous_args = 0
 810              		@ link register save eliminated.
 269:USB/config/tm_stm32f4_usb_vcp.c **** 	return TM_USB_VCP_IRQ_Status;
 811              		.loc 1 269 2 view .LVU200
 270:USB/config/tm_stm32f4_usb_vcp.c **** }
ARM GAS  /tmp/ccOOS6q9.s 			page 21


 812              		.loc 1 270 1 is_stmt 0 view .LVU201
 813 0000 014B     		ldr	r3, .L80
 814 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 815 0004 7047     		bx	lr
 816              	.L81:
 817 0006 00BF     		.align	2
 818              	.L80:
 819 0008 00000000 		.word	.LANCHOR1
 820              		.cfi_endproc
 821              	.LFE139:
 823              		.section	.text.TM_USB_VCP_Set_IRQPRC,"ax",%progbits
 824              		.align	1
 825              		.global	TM_USB_VCP_Set_IRQPRC
 826              		.syntax unified
 827              		.thumb
 828              		.thumb_func
 829              		.fpu fpv4-sp-d16
 831              	TM_USB_VCP_Set_IRQPRC:
 832              	.LFB140:
 271:USB/config/tm_stm32f4_usb_vcp.c **** 
 272:USB/config/tm_stm32f4_usb_vcp.c **** void TM_USB_VCP_Set_IRQPRC(void)
 273:USB/config/tm_stm32f4_usb_vcp.c **** {
 833              		.loc 1 273 1 is_stmt 1 view -0
 834              		.cfi_startproc
 835              		@ args = 0, pretend = 0, frame = 0
 836              		@ frame_needed = 0, uses_anonymous_args = 0
 837              		@ link register save eliminated.
 274:USB/config/tm_stm32f4_usb_vcp.c **** 	TM_USB_VCP_IRQ_Status = TM_USB_VCP_IRQ_PRC;
 838              		.loc 1 274 2 view .LVU203
 839              		.loc 1 274 24 is_stmt 0 view .LVU204
 840 0000 014B     		ldr	r3, .L83
 841 0002 0222     		movs	r2, #2
 842 0004 1A70     		strb	r2, [r3]
 275:USB/config/tm_stm32f4_usb_vcp.c **** }
 843              		.loc 1 275 1 view .LVU205
 844 0006 7047     		bx	lr
 845              	.L84:
 846              		.align	2
 847              	.L83:
 848 0008 00000000 		.word	.LANCHOR1
 849              		.cfi_endproc
 850              	.LFE140:
 852              		.section	.text.TM_USB_VCP_Reset_IRQ,"ax",%progbits
 853              		.align	1
 854              		.global	TM_USB_VCP_Reset_IRQ
 855              		.syntax unified
 856              		.thumb
 857              		.thumb_func
 858              		.fpu fpv4-sp-d16
 860              	TM_USB_VCP_Reset_IRQ:
 861              	.LFB141:
 276:USB/config/tm_stm32f4_usb_vcp.c **** 
 277:USB/config/tm_stm32f4_usb_vcp.c **** void TM_USB_VCP_Reset_IRQ(void)
 278:USB/config/tm_stm32f4_usb_vcp.c **** {
 862              		.loc 1 278 1 is_stmt 1 view -0
 863              		.cfi_startproc
 864              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccOOS6q9.s 			page 22


 865              		@ frame_needed = 0, uses_anonymous_args = 0
 866              		@ link register save eliminated.
 279:USB/config/tm_stm32f4_usb_vcp.c **** 	TM_USB_VCP_IRQ_Status = TM_USB_VCP_IRQ_RESET;
 867              		.loc 1 279 2 view .LVU207
 868              		.loc 1 279 24 is_stmt 0 view .LVU208
 869 0000 0023     		movs	r3, #0
 870 0002 074A     		ldr	r2, .L89
 871 0004 1370     		strb	r3, [r2]
 280:USB/config/tm_stm32f4_usb_vcp.c **** 
 281:USB/config/tm_stm32f4_usb_vcp.c **** 	TM_IRQ_Data.Data_Len = 0;
 872              		.loc 1 281 2 is_stmt 1 view .LVU209
 873              		.loc 1 281 23 is_stmt 0 view .LVU210
 874 0006 074A     		ldr	r2, .L89+4
 875 0008 1380     		strh	r3, [r2]	@ movhi
 282:USB/config/tm_stm32f4_usb_vcp.c **** 
 283:USB/config/tm_stm32f4_usb_vcp.c **** 	for (uint16_t i = 0; i < USB_VCP_RECEIVE_BUFFER_LENGTH; i++)
 876              		.loc 1 283 2 is_stmt 1 view .LVU211
 877              	.LBB4:
 878              		.loc 1 283 7 view .LVU212
 879              	.LVL51:
 880              	.L86:
 881              		.loc 1 283 2 is_stmt 0 discriminator 1 view .LVU213
 882 000a FF2B     		cmp	r3, #255
 883 000c 06D8     		bhi	.L88
 284:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 285:USB/config/tm_stm32f4_usb_vcp.c **** 		TM_IRQ_Data.Buff[i] = 0;
 884              		.loc 1 285 3 is_stmt 1 discriminator 3 view .LVU214
 885              		.loc 1 285 23 is_stmt 0 discriminator 3 view .LVU215
 886 000e 054A     		ldr	r2, .L89+4
 887 0010 1A44     		add	r2, r2, r3
 888 0012 0021     		movs	r1, #0
 889 0014 9170     		strb	r1, [r2, #2]
 283:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 890              		.loc 1 283 59 discriminator 3 view .LVU216
 891 0016 0133     		adds	r3, r3, #1
 892              	.LVL52:
 283:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 893              		.loc 1 283 59 discriminator 3 view .LVU217
 894 0018 9BB2     		uxth	r3, r3
 895              	.LVL53:
 283:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 896              		.loc 1 283 59 discriminator 3 view .LVU218
 897 001a F6E7     		b	.L86
 898              	.L88:
 283:USB/config/tm_stm32f4_usb_vcp.c **** 	{
 899              		.loc 1 283 59 discriminator 3 view .LVU219
 900              	.LBE4:
 286:USB/config/tm_stm32f4_usb_vcp.c **** 	}
 287:USB/config/tm_stm32f4_usb_vcp.c **** }
 901              		.loc 1 287 1 view .LVU220
 902 001c 7047     		bx	lr
 903              	.L90:
 904 001e 00BF     		.align	2
 905              	.L89:
 906 0020 00000000 		.word	.LANCHOR1
 907 0024 00000000 		.word	TM_IRQ_Data
 908              		.cfi_endproc
ARM GAS  /tmp/ccOOS6q9.s 			page 23


 909              	.LFE141:
 911              		.section	.text.TM_USB_VCP_Init,"ax",%progbits
 912              		.align	1
 913              		.global	TM_USB_VCP_Init
 914              		.syntax unified
 915              		.thumb
 916              		.thumb_func
 917              		.fpu fpv4-sp-d16
 919              	TM_USB_VCP_Init:
 920              	.LFB126:
  42:USB/config/tm_stm32f4_usb_vcp.c **** 	/* Initialize USB */
 921              		.loc 1 42 1 is_stmt 1 view -0
 922              		.cfi_startproc
 923              		@ args = 0, pretend = 0, frame = 0
 924              		@ frame_needed = 0, uses_anonymous_args = 0
 925 0000 10B5     		push	{r4, lr}
 926              	.LCFI16:
 927              		.cfi_def_cfa_offset 8
 928              		.cfi_offset 4, -8
 929              		.cfi_offset 14, -4
 930 0002 82B0     		sub	sp, sp, #8
 931              	.LCFI17:
 932              		.cfi_def_cfa_offset 16
  44:USB/config/tm_stm32f4_usb_vcp.c **** #ifdef USE_USB_OTG_FS
 933              		.loc 1 44 2 view .LVU222
 934 0004 0B4B     		ldr	r3, .L93
 935 0006 0093     		str	r3, [sp]
 936 0008 0B4B     		ldr	r3, .L93+4
 937 000a 0C4A     		ldr	r2, .L93+8
 938 000c 0121     		movs	r1, #1
 939 000e 0C48     		ldr	r0, .L93+12
 940 0010 FFF7FEFF 		bl	USBD_Init
 941              	.LVL54:
  55:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_out = 0;
 942              		.loc 1 55 2 view .LVU223
  55:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_out = 0;
 943              		.loc 1 55 24 is_stmt 0 view .LVU224
 944 0014 0024     		movs	r4, #0
 945 0016 0B4B     		ldr	r3, .L93+16
 946 0018 1C60     		str	r4, [r3]
  56:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_num = 0;
 947              		.loc 1 56 2 is_stmt 1 view .LVU225
  56:USB/config/tm_stm32f4_usb_vcp.c **** 	tm_int_usb_vcp_buf_num = 0;
 948              		.loc 1 56 25 is_stmt 0 view .LVU226
 949 001a 0B4B     		ldr	r3, .L93+20
 950 001c 1C60     		str	r4, [r3]
  57:USB/config/tm_stm32f4_usb_vcp.c **** 
 951              		.loc 1 57 2 is_stmt 1 view .LVU227
  57:USB/config/tm_stm32f4_usb_vcp.c **** 
 952              		.loc 1 57 25 is_stmt 0 view .LVU228
 953 001e 0B4B     		ldr	r3, .L93+24
 954 0020 1C60     		str	r4, [r3]
  60:USB/config/tm_stm32f4_usb_vcp.c **** 
 955              		.loc 1 60 2 is_stmt 1 view .LVU229
  60:USB/config/tm_stm32f4_usb_vcp.c **** 
 956              		.loc 1 60 22 is_stmt 0 view .LVU230
 957 0022 0B4B     		ldr	r3, .L93+28
ARM GAS  /tmp/ccOOS6q9.s 			page 24


 958 0024 0122     		movs	r2, #1
 959 0026 1A70     		strb	r2, [r3]
  62:USB/config/tm_stm32f4_usb_vcp.c **** 
 960              		.loc 1 62 2 is_stmt 1 view .LVU231
 961 0028 FFF7FEFF 		bl	TM_USB_VCP_Reset_IRQ
 962              	.LVL55:
  65:USB/config/tm_stm32f4_usb_vcp.c **** }
 963              		.loc 1 65 2 view .LVU232
  66:USB/config/tm_stm32f4_usb_vcp.c **** 
 964              		.loc 1 66 1 is_stmt 0 view .LVU233
 965 002c 2046     		mov	r0, r4
 966 002e 02B0     		add	sp, sp, #8
 967              	.LCFI18:
 968              		.cfi_def_cfa_offset 8
 969              		@ sp needed
 970 0030 10BD     		pop	{r4, pc}
 971              	.L94:
 972 0032 00BF     		.align	2
 973              	.L93:
 974 0034 00000000 		.word	USR_cb
 975 0038 00000000 		.word	USBD_CDC_cb
 976 003c 00000000 		.word	USR_desc
 977 0040 00000000 		.word	USB_OTG_dev
 978 0044 00000000 		.word	tm_int_usb_vcp_buf_in
 979 0048 00000000 		.word	tm_int_usb_vcp_buf_out
 980 004c 00000000 		.word	tm_int_usb_vcp_buf_num
 981 0050 00000000 		.word	.LANCHOR0
 982              		.cfi_endproc
 983              	.LFE126:
 985              		.comm	USB_OTG_dev,1524,4
 986              		.global	TM_USB_VCP_INT_Init
 987              		.comm	tm_int_usb_vcp_buf_num,4,4
 988              		.comm	tm_int_usb_vcp_buf_out,4,4
 989              		.comm	tm_int_usb_vcp_buf_in,4,4
 990              		.comm	TM_INT_USB_VCP_ReceiveBuffer,256,4
 991              		.global	TM_USB_VCP_IRQ_Status
 992              		.comm	TM_IRQ_Data,258,4
 993              		.global	PackEnd
 994              		.section	.bss.TM_USB_VCP_INT_Init,"aw",%nobits
 995              		.set	.LANCHOR0,. + 0
 998              	TM_USB_VCP_INT_Init:
 999 0000 00       		.space	1
 1000              		.section	.bss.TM_USB_VCP_IRQ_Status,"aw",%nobits
 1001              		.set	.LANCHOR1,. + 0
 1004              	TM_USB_VCP_IRQ_Status:
 1005 0000 00       		.space	1
 1006              		.section	.rodata.PackEnd,"a"
 1007              		.align	2
 1010              	PackEnd:
 1011 0000 0D       		.byte	13
 1012 0001 0A       		.byte	10
 1013              		.text
 1014              	.Letext0:
 1015              		.file 2 "/home/bt0/stm32/compile-tool/gcc-arm-none-eabi-8-2018-q4-major-linux/gcc-arm-none-eabi-8-
 1016              		.file 3 "/home/bt0/stm32/compile-tool/gcc-arm-none-eabi-8-2018-q4-major-linux/gcc-arm-none-eabi-8-
 1017              		.file 4 "F4_CORE/core_cm4.h"
 1018              		.file 5 "USER/system_stm32f4xx.h"
ARM GAS  /tmp/ccOOS6q9.s 			page 25


 1019              		.file 6 "/home/bt0/stm32/compile-tool/gcc-arm-none-eabi-8-2018-q4-major-linux/gcc-arm-none-eabi-8-
 1020              		.file 7 "/home/bt0/stm32/compile-tool/gcc-arm-none-eabi-8-2018-q4-major-linux/gcc-arm-none-eabi-8-
 1021              		.file 8 "/home/bt0/stm32/compile-tool/gcc-arm-none-eabi-8-2018-q4-major-linux/gcc-arm-none-eabi-8-
 1022              		.file 9 "/home/bt0/stm32/compile-tool/gcc-arm-none-eabi-8-2018-q4-major-linux/gcc-arm-none-eabi-8-
 1023              		.file 10 "USB/core/usb_regs.h"
 1024              		.file 11 "USB/core/usb_core.h"
 1025              		.file 12 "USB/core/usbd_cdc_core.h"
 1026              		.file 13 "USB/core/usbd_desc.h"
 1027              		.file 14 "USB/core/usbd_cdc_vcp.h"
 1028              		.file 15 "USB/core/usb_defines.h"
 1029              		.file 16 "USB/config/tm_stm32f4_usb_vcp.h"
 1030              		.file 17 "USB/core/usbd_usr.h"
 1031              		.file 18 "USB/core/usbd_core.h"
ARM GAS  /tmp/ccOOS6q9.s 			page 26


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tm_stm32f4_usb_vcp.c
     /tmp/ccOOS6q9.s:18     .text.TM_USB_VCP_BufferEmpty:0000000000000000 $t
     /tmp/ccOOS6q9.s:26     .text.TM_USB_VCP_BufferEmpty:0000000000000000 TM_USB_VCP_BufferEmpty
     /tmp/ccOOS6q9.s:45     .text.TM_USB_VCP_BufferEmpty:000000000000000c $d
                            *COM*:0000000000000004 tm_int_usb_vcp_buf_num
     /tmp/ccOOS6q9.s:50     .text.TM_USB_VCP_BufferFull:0000000000000000 $t
     /tmp/ccOOS6q9.s:57     .text.TM_USB_VCP_BufferFull:0000000000000000 TM_USB_VCP_BufferFull
     /tmp/ccOOS6q9.s:77     .text.TM_USB_VCP_BufferFull:0000000000000010 $d
     /tmp/ccOOS6q9.s:82     .text.TM_USB_VCP_FindCharacter:0000000000000000 $t
     /tmp/ccOOS6q9.s:89     .text.TM_USB_VCP_FindCharacter:0000000000000000 TM_USB_VCP_FindCharacter
     /tmp/ccOOS6q9.s:175    .text.TM_USB_VCP_FindCharacter:000000000000003c $d
                            *COM*:0000000000000004 tm_int_usb_vcp_buf_out
                            *COM*:0000000000000100 TM_INT_USB_VCP_ReceiveBuffer
     /tmp/ccOOS6q9.s:182    .text.TM_USB_VCP_Getc:0000000000000000 $t
     /tmp/ccOOS6q9.s:189    .text.TM_USB_VCP_Getc:0000000000000000 TM_USB_VCP_Getc
     /tmp/ccOOS6q9.s:261    .text.TM_USB_VCP_Getc:000000000000003c $d
     /tmp/ccOOS6q9.s:268    .text.TM_USB_VCP_Putc:0000000000000000 $t
     /tmp/ccOOS6q9.s:275    .text.TM_USB_VCP_Putc:0000000000000000 TM_USB_VCP_Putc
     /tmp/ccOOS6q9.s:314    .text.TM_USB_VCP_Puts:0000000000000000 $t
     /tmp/ccOOS6q9.s:321    .text.TM_USB_VCP_Puts:0000000000000000 TM_USB_VCP_Puts
     /tmp/ccOOS6q9.s:358    .text.TM_USB_VCP_Send:0000000000000000 $t
     /tmp/ccOOS6q9.s:365    .text.TM_USB_VCP_Send:0000000000000000 TM_USB_VCP_Send
     /tmp/ccOOS6q9.s:389    .text.TM_USB_VCP_Gets:0000000000000000 $t
     /tmp/ccOOS6q9.s:396    .text.TM_USB_VCP_Gets:0000000000000000 TM_USB_VCP_Gets
     /tmp/ccOOS6q9.s:516    .text.TM_INT_USB_VCP_AddReceived:0000000000000000 $t
     /tmp/ccOOS6q9.s:523    .text.TM_INT_USB_VCP_AddReceived:0000000000000000 TM_INT_USB_VCP_AddReceived
     /tmp/ccOOS6q9.s:594    .text.TM_INT_USB_VCP_AddReceived:0000000000000038 $d
                            *COM*:0000000000000004 tm_int_usb_vcp_buf_in
     /tmp/ccOOS6q9.s:601    .text.TM_USB_VCP_GetStatus:0000000000000000 $t
     /tmp/ccOOS6q9.s:608    .text.TM_USB_VCP_GetStatus:0000000000000000 TM_USB_VCP_GetStatus
     /tmp/ccOOS6q9.s:634    .text.TM_USB_VCP_GetStatus:0000000000000010 $d
     /tmp/ccOOS6q9.s:640    .text.TM_USB_VCP_GetSettings:0000000000000000 $t
     /tmp/ccOOS6q9.s:647    .text.TM_USB_VCP_GetSettings:0000000000000000 TM_USB_VCP_GetSettings
     /tmp/ccOOS6q9.s:693    .text.TM_USB_VCP_GetSettings:000000000000001c $d
     /tmp/ccOOS6q9.s:698    .text.TM_USB_VCP_Set_IRQ:0000000000000000 $t
     /tmp/ccOOS6q9.s:705    .text.TM_USB_VCP_Set_IRQ:0000000000000000 TM_USB_VCP_Set_IRQ
     /tmp/ccOOS6q9.s:791    .text.TM_USB_VCP_Set_IRQ:000000000000003c $d
                            *COM*:0000000000000102 TM_IRQ_Data
     /tmp/ccOOS6q9.s:797    .text.TM_USB_VCP_Get_IRQState:0000000000000000 $t
     /tmp/ccOOS6q9.s:804    .text.TM_USB_VCP_Get_IRQState:0000000000000000 TM_USB_VCP_Get_IRQState
     /tmp/ccOOS6q9.s:819    .text.TM_USB_VCP_Get_IRQState:0000000000000008 $d
     /tmp/ccOOS6q9.s:824    .text.TM_USB_VCP_Set_IRQPRC:0000000000000000 $t
     /tmp/ccOOS6q9.s:831    .text.TM_USB_VCP_Set_IRQPRC:0000000000000000 TM_USB_VCP_Set_IRQPRC
     /tmp/ccOOS6q9.s:848    .text.TM_USB_VCP_Set_IRQPRC:0000000000000008 $d
     /tmp/ccOOS6q9.s:853    .text.TM_USB_VCP_Reset_IRQ:0000000000000000 $t
     /tmp/ccOOS6q9.s:860    .text.TM_USB_VCP_Reset_IRQ:0000000000000000 TM_USB_VCP_Reset_IRQ
     /tmp/ccOOS6q9.s:906    .text.TM_USB_VCP_Reset_IRQ:0000000000000020 $d
     /tmp/ccOOS6q9.s:912    .text.TM_USB_VCP_Init:0000000000000000 $t
     /tmp/ccOOS6q9.s:919    .text.TM_USB_VCP_Init:0000000000000000 TM_USB_VCP_Init
     /tmp/ccOOS6q9.s:974    .text.TM_USB_VCP_Init:0000000000000034 $d
                            *COM*:00000000000005f4 USB_OTG_dev
     /tmp/ccOOS6q9.s:998    .bss.TM_USB_VCP_INT_Init:0000000000000000 TM_USB_VCP_INT_Init
     /tmp/ccOOS6q9.s:1004   .bss.TM_USB_VCP_IRQ_Status:0000000000000000 TM_USB_VCP_IRQ_Status
     /tmp/ccOOS6q9.s:1010   .rodata.PackEnd:0000000000000000 PackEnd
     /tmp/ccOOS6q9.s:999    .bss.TM_USB_VCP_INT_Init:0000000000000000 $d
     /tmp/ccOOS6q9.s:1005   .bss.TM_USB_VCP_IRQ_Status:0000000000000000 $d
ARM GAS  /tmp/ccOOS6q9.s 			page 27


     /tmp/ccOOS6q9.s:1007   .rodata.PackEnd:0000000000000000 $d

UNDEFINED SYMBOLS
VCP_DataTx
TM_USB_VCP_INT_Status
linecoding
USBD_Init
USR_cb
USBD_CDC_cb
USR_desc
