ARM GAS  /tmp/ccVNN7NQ.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"queue.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Queue_GetState,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	Queue_GetState:
  25              	.LFB126:
  26              		.file 1 "SYS/data_structure/queue.c"
   1:SYS/data_structure/queue.c **** #include "queue.h"
   2:SYS/data_structure/queue.c **** #include <stdio.h>
   3:SYS/data_structure/queue.c **** #include <string.h>
   4:SYS/data_structure/queue.c **** 
   5:SYS/data_structure/queue.c **** static uint8_t Cur_Crtd_Queue = 0;
   6:SYS/data_structure/queue.c **** 
   7:SYS/data_structure/queue.c **** Queue_state Queue_Init(queue_s *queue, char *name, QueueData_OutType type)
   8:SYS/data_structure/queue.c **** {
   9:SYS/data_structure/queue.c ****     if (Cur_Crtd_Queue < MAX_QUEUE_NUM)
  10:SYS/data_structure/queue.c ****     {
  11:SYS/data_structure/queue.c ****         Cur_Crtd_Queue++;
  12:SYS/data_structure/queue.c ****         queue->state = Queue_ok;
  13:SYS/data_structure/queue.c ****     }
  14:SYS/data_structure/queue.c ****     else
  15:SYS/data_structure/queue.c ****         queue->state = Queue_CreateFailed;
  16:SYS/data_structure/queue.c **** 
  17:SYS/data_structure/queue.c ****     memset(queue->buff, NULL, QUEUE_MAX_SIZE);
  18:SYS/data_structure/queue.c ****     queue->name = name;
  19:SYS/data_structure/queue.c ****     queue->end_pos = 0;
  20:SYS/data_structure/queue.c ****     queue->head_pos = 0;
  21:SYS/data_structure/queue.c ****     queue->size = 0;
  22:SYS/data_structure/queue.c ****     queue->output_type = type;
  23:SYS/data_structure/queue.c **** 
  24:SYS/data_structure/queue.c ****     for (uint8_t i = 0; i < QUEUE_ERROR_TYPENUM; i++)
  25:SYS/data_structure/queue.c ****     {
  26:SYS/data_structure/queue.c ****         queue->error_times[i] = 0;
  27:SYS/data_structure/queue.c ****     }
  28:SYS/data_structure/queue.c ****     queue->total_error_times = 0;
  29:SYS/data_structure/queue.c **** 
  30:SYS/data_structure/queue.c ****     return queue->state;
  31:SYS/data_structure/queue.c **** }
  32:SYS/data_structure/queue.c **** 
ARM GAS  /tmp/ccVNN7NQ.s 			page 2


  33:SYS/data_structure/queue.c **** Queue_state Queue_Reset(queue_s *queue)
  34:SYS/data_structure/queue.c **** {
  35:SYS/data_structure/queue.c ****     return Queue_init(queue, queue->name);
  36:SYS/data_structure/queue.c **** }
  37:SYS/data_structure/queue.c **** 
  38:SYS/data_structure/queue.c **** static Queue_state Queue_GetState(queue_s *queue)
  39:SYS/data_structure/queue.c **** {
  27              		.loc 1 39 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
  40:SYS/data_structure/queue.c ****     if ((queue->head_pos == queue->end_pos) || (queue->size == 0))
  33              		.loc 1 40 0
  34 0000 0289     		ldrh	r2, [r0, #8]
  35 0002 4389     		ldrh	r3, [r0, #10]
  36 0004 9A42     		cmp	r2, r3
  37 0006 01D0     		beq	.L2
  38              		.loc 1 40 0 is_stmt 0 discriminator 1
  39 0008 8188     		ldrh	r1, [r0, #4]
  40 000a 69B9     		cbnz	r1, .L3
  41              	.L2:
  41:SYS/data_structure/queue.c ****     {
  42:SYS/data_structure/queue.c ****         queue->error_times[GET_QUEUE_ERROR_INDEX(Queue_empty)]++;
  42              		.loc 1 42 0 is_stmt 1
  43 000c D0F81832 		ldr	r3, [r0, #536]
  44 0010 0133     		adds	r3, r3, #1
  45 0012 C0F81832 		str	r3, [r0, #536]
  43:SYS/data_structure/queue.c ****         queue->total_error_times++;
  46              		.loc 1 43 0
  47 0016 D0F82032 		ldr	r3, [r0, #544]
  48 001a 0133     		adds	r3, r3, #1
  49 001c C0F82032 		str	r3, [r0, #544]
  44:SYS/data_structure/queue.c ****         queue->state = Queue_empty;
  50              		.loc 1 44 0
  51 0020 0423     		movs	r3, #4
  52 0022 8371     		strb	r3, [r0, #6]
  45:SYS/data_structure/queue.c ****         return Queue_empty;
  53              		.loc 1 45 0
  54 0024 1846     		mov	r0, r3
  55              	.LVL1:
  56 0026 7047     		bx	lr
  57              	.LVL2:
  58              	.L3:
  46:SYS/data_structure/queue.c ****     }
  47:SYS/data_structure/queue.c **** 
  48:SYS/data_structure/queue.c ****     if (((queue->end_pos + 1) % QUEUE_MAX_SIZE) == queue->head_pos)
  59              		.loc 1 48 0
  60 0028 0133     		adds	r3, r3, #1
  61 002a 5942     		rsbs	r1, r3, #0
  62 002c C3F30803 		ubfx	r3, r3, #0, #9
  63 0030 C1F30801 		ubfx	r1, r1, #0, #9
  64 0034 58BF     		it	pl
  65 0036 4B42     		rsbpl	r3, r1, #0
  66 0038 9342     		cmp	r3, r2
  67 003a 03D0     		beq	.L6
ARM GAS  /tmp/ccVNN7NQ.s 			page 3


  49:SYS/data_structure/queue.c ****     {
  50:SYS/data_structure/queue.c ****         queue->error_times[GET_QUEUE_ERROR_INDEX(Queue_full)]++;
  51:SYS/data_structure/queue.c ****         queue->total_error_times++;
  52:SYS/data_structure/queue.c ****         queue->state = Queue_full;
  53:SYS/data_structure/queue.c ****         return Queue_full;
  54:SYS/data_structure/queue.c ****     }
  55:SYS/data_structure/queue.c **** 
  56:SYS/data_structure/queue.c ****     queue->state = Queue_ok;
  68              		.loc 1 56 0
  69 003c 0023     		movs	r3, #0
  70 003e 8371     		strb	r3, [r0, #6]
  57:SYS/data_structure/queue.c ****     return Queue_ok;
  71              		.loc 1 57 0
  72 0040 1846     		mov	r0, r3
  73              	.LVL3:
  58:SYS/data_structure/queue.c **** }
  74              		.loc 1 58 0
  75 0042 7047     		bx	lr
  76              	.LVL4:
  77              	.L6:
  50:SYS/data_structure/queue.c ****         queue->total_error_times++;
  78              		.loc 1 50 0
  79 0044 D0F81C32 		ldr	r3, [r0, #540]
  80 0048 0133     		adds	r3, r3, #1
  81 004a C0F81C32 		str	r3, [r0, #540]
  51:SYS/data_structure/queue.c ****         queue->state = Queue_full;
  82              		.loc 1 51 0
  83 004e D0F82032 		ldr	r3, [r0, #544]
  84 0052 0133     		adds	r3, r3, #1
  85 0054 C0F82032 		str	r3, [r0, #544]
  52:SYS/data_structure/queue.c ****         return Queue_full;
  86              		.loc 1 52 0
  87 0058 0523     		movs	r3, #5
  88 005a 8371     		strb	r3, [r0, #6]
  53:SYS/data_structure/queue.c ****     }
  89              		.loc 1 53 0
  90 005c 1846     		mov	r0, r3
  91              	.LVL5:
  92 005e 7047     		bx	lr
  93              		.cfi_endproc
  94              	.LFE126:
  96              		.section	.text.Queue_Init,"ax",%progbits
  97              		.align	1
  98              		.global	Queue_Init
  99              		.syntax unified
 100              		.thumb
 101              		.thumb_func
 102              		.fpu fpv4-sp-d16
 104              	Queue_Init:
 105              	.LFB124:
   8:SYS/data_structure/queue.c ****     if (Cur_Crtd_Queue < MAX_QUEUE_NUM)
 106              		.loc 1 8 0
 107              		.cfi_startproc
 108              		@ args = 0, pretend = 0, frame = 0
 109              		@ frame_needed = 0, uses_anonymous_args = 0
 110              	.LVL6:
 111 0000 70B5     		push	{r4, r5, r6, lr}
ARM GAS  /tmp/ccVNN7NQ.s 			page 4


 112              	.LCFI0:
 113              		.cfi_def_cfa_offset 16
 114              		.cfi_offset 4, -16
 115              		.cfi_offset 5, -12
 116              		.cfi_offset 6, -8
 117              		.cfi_offset 14, -4
 118 0002 0446     		mov	r4, r0
 119 0004 0E46     		mov	r6, r1
 120 0006 1546     		mov	r5, r2
   9:SYS/data_structure/queue.c ****     {
 121              		.loc 1 9 0
 122 0008 144B     		ldr	r3, .L13
 123 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 124 000c 092B     		cmp	r3, #9
 125 000e 13D8     		bhi	.L8
  11:SYS/data_structure/queue.c ****         queue->state = Queue_ok;
 126              		.loc 1 11 0
 127 0010 0133     		adds	r3, r3, #1
 128 0012 124A     		ldr	r2, .L13
 129              	.LVL7:
 130 0014 1370     		strb	r3, [r2]
  12:SYS/data_structure/queue.c ****     }
 131              		.loc 1 12 0
 132 0016 0023     		movs	r3, #0
 133 0018 8371     		strb	r3, [r0, #6]
 134              	.L9:
  17:SYS/data_structure/queue.c ****     queue->name = name;
 135              		.loc 1 17 0
 136 001a 4FF40072 		mov	r2, #512
 137 001e 0021     		movs	r1, #0
 138              	.LVL8:
 139 0020 04F10C00 		add	r0, r4, #12
 140              	.LVL9:
 141 0024 FFF7FEFF 		bl	memset
 142              	.LVL10:
  18:SYS/data_structure/queue.c ****     queue->end_pos = 0;
 143              		.loc 1 18 0
 144 0028 2660     		str	r6, [r4]
  19:SYS/data_structure/queue.c ****     queue->head_pos = 0;
 145              		.loc 1 19 0
 146 002a 0023     		movs	r3, #0
 147 002c 6381     		strh	r3, [r4, #10]	@ movhi
  20:SYS/data_structure/queue.c ****     queue->size = 0;
 148              		.loc 1 20 0
 149 002e 2381     		strh	r3, [r4, #8]	@ movhi
  21:SYS/data_structure/queue.c ****     queue->output_type = type;
 150              		.loc 1 21 0
 151 0030 A380     		strh	r3, [r4, #4]	@ movhi
  22:SYS/data_structure/queue.c **** 
 152              		.loc 1 22 0
 153 0032 84F80C52 		strb	r5, [r4, #524]
 154              	.LVL11:
 155              	.LBB2:
  24:SYS/data_structure/queue.c ****     {
 156              		.loc 1 24 0
 157 0036 09E0     		b	.L10
 158              	.LVL12:
ARM GAS  /tmp/ccVNN7NQ.s 			page 5


 159              	.L8:
 160              	.LBE2:
  15:SYS/data_structure/queue.c **** 
 161              		.loc 1 15 0
 162 0038 0623     		movs	r3, #6
 163 003a 8371     		strb	r3, [r0, #6]
 164 003c EDE7     		b	.L9
 165              	.LVL13:
 166              	.L11:
 167              	.LBB3:
  26:SYS/data_structure/queue.c ****     }
 168              		.loc 1 26 0 discriminator 3
 169 003e 03F18402 		add	r2, r3, #132
 170 0042 0021     		movs	r1, #0
 171 0044 44F82210 		str	r1, [r4, r2, lsl #2]
  24:SYS/data_structure/queue.c ****     {
 172              		.loc 1 24 0 discriminator 3
 173 0048 0133     		adds	r3, r3, #1
 174              	.LVL14:
 175 004a DBB2     		uxtb	r3, r3
 176              	.LVL15:
 177              	.L10:
  24:SYS/data_structure/queue.c ****     {
 178              		.loc 1 24 0 is_stmt 0 discriminator 1
 179 004c 032B     		cmp	r3, #3
 180 004e F6D9     		bls	.L11
 181              	.LBE3:
  28:SYS/data_structure/queue.c **** 
 182              		.loc 1 28 0 is_stmt 1
 183 0050 0023     		movs	r3, #0
 184              	.LVL16:
 185 0052 C4F82032 		str	r3, [r4, #544]
  31:SYS/data_structure/queue.c **** 
 186              		.loc 1 31 0
 187 0056 A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 188 0058 70BD     		pop	{r4, r5, r6, pc}
 189              	.LVL17:
 190              	.L14:
 191 005a 00BF     		.align	2
 192              	.L13:
 193 005c 00000000 		.word	.LANCHOR0
 194              		.cfi_endproc
 195              	.LFE124:
 197              		.section	.text.Queue_Reset,"ax",%progbits
 198              		.align	1
 199              		.global	Queue_Reset
 200              		.syntax unified
 201              		.thumb
 202              		.thumb_func
 203              		.fpu fpv4-sp-d16
 205              	Queue_Reset:
 206              	.LFB125:
  34:SYS/data_structure/queue.c ****     return Queue_init(queue, queue->name);
 207              		.loc 1 34 0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 0
 210              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccVNN7NQ.s 			page 6


 211              	.LVL18:
 212 0000 08B5     		push	{r3, lr}
 213              	.LCFI1:
 214              		.cfi_def_cfa_offset 8
 215              		.cfi_offset 3, -8
 216              		.cfi_offset 14, -4
  35:SYS/data_structure/queue.c **** }
 217              		.loc 1 35 0
 218 0002 0168     		ldr	r1, [r0]
 219 0004 FFF7FEFF 		bl	Queue_init
 220              	.LVL19:
  36:SYS/data_structure/queue.c **** 
 221              		.loc 1 36 0
 222 0008 C0B2     		uxtb	r0, r0
 223 000a 08BD     		pop	{r3, pc}
 224              		.cfi_endproc
 225              	.LFE125:
 227              		.section	.text.Queue_PushChar,"ax",%progbits
 228              		.align	1
 229              		.global	Queue_PushChar
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 233              		.fpu fpv4-sp-d16
 235              	Queue_PushChar:
 236              	.LFB127:
  59:SYS/data_structure/queue.c **** 
  60:SYS/data_structure/queue.c **** Queue_state Queue_PushChar(queue_s *queue, char data)
  61:SYS/data_structure/queue.c **** {
 237              		.loc 1 61 0
 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 0
 240              		@ frame_needed = 0, uses_anonymous_args = 0
 241              	.LVL20:
 242 0000 10B5     		push	{r4, lr}
 243              	.LCFI2:
 244              		.cfi_def_cfa_offset 8
 245              		.cfi_offset 4, -8
 246              		.cfi_offset 14, -4
 247 0002 0446     		mov	r4, r0
  62:SYS/data_structure/queue.c ****     if (queue->state == Queue_ok)
 248              		.loc 1 62 0
 249 0004 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 250 0006 0BB1     		cbz	r3, .L20
 251              	.LVL21:
 252              	.L18:
  63:SYS/data_structure/queue.c ****     {
  64:SYS/data_structure/queue.c ****         queue->buff[queue->end_pos] = data;
  65:SYS/data_structure/queue.c **** 
  66:SYS/data_structure/queue.c ****         queue->end_pos = (queue->end_pos + 1) % QUEUE_MAX_SIZE;
  67:SYS/data_structure/queue.c ****         queue->size++;
  68:SYS/data_structure/queue.c **** 
  69:SYS/data_structure/queue.c ****         Queue_GetState(queue);
  70:SYS/data_structure/queue.c ****     }
  71:SYS/data_structure/queue.c **** 
  72:SYS/data_structure/queue.c ****     return queue->state;
  73:SYS/data_structure/queue.c **** }
ARM GAS  /tmp/ccVNN7NQ.s 			page 7


 253              		.loc 1 73 0
 254 0008 A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 255 000a 10BD     		pop	{r4, pc}
 256              	.LVL22:
 257              	.L20:
  64:SYS/data_structure/queue.c **** 
 258              		.loc 1 64 0
 259 000c 4389     		ldrh	r3, [r0, #10]
 260 000e C218     		adds	r2, r0, r3
 261 0010 1173     		strb	r1, [r2, #12]
  66:SYS/data_structure/queue.c ****         queue->size++;
 262              		.loc 1 66 0
 263 0012 0133     		adds	r3, r3, #1
 264 0014 5A42     		rsbs	r2, r3, #0
 265 0016 C3F30803 		ubfx	r3, r3, #0, #9
 266 001a C2F30802 		ubfx	r2, r2, #0, #9
 267 001e 58BF     		it	pl
 268 0020 5342     		rsbpl	r3, r2, #0
 269 0022 4381     		strh	r3, [r0, #10]	@ movhi
  67:SYS/data_structure/queue.c **** 
 270              		.loc 1 67 0
 271 0024 8388     		ldrh	r3, [r0, #4]
 272 0026 0133     		adds	r3, r3, #1
 273 0028 8380     		strh	r3, [r0, #4]	@ movhi
  69:SYS/data_structure/queue.c ****     }
 274              		.loc 1 69 0
 275 002a FFF7FEFF 		bl	Queue_GetState
 276              	.LVL23:
 277 002e EBE7     		b	.L18
 278              		.cfi_endproc
 279              	.LFE127:
 281              		.section	.text.Queue_PushLenChar,"ax",%progbits
 282              		.align	1
 283              		.global	Queue_PushLenChar
 284              		.syntax unified
 285              		.thumb
 286              		.thumb_func
 287              		.fpu fpv4-sp-d16
 289              	Queue_PushLenChar:
 290              	.LFB128:
  74:SYS/data_structure/queue.c **** 
  75:SYS/data_structure/queue.c **** Queue_state Queue_PushLenChar(queue_s *queue, uint16_t len, char *data)
  76:SYS/data_structure/queue.c **** {
 291              		.loc 1 76 0
 292              		.cfi_startproc
 293              		@ args = 0, pretend = 0, frame = 0
 294              		@ frame_needed = 0, uses_anonymous_args = 0
 295              	.LVL24:
 296 0000 70B5     		push	{r4, r5, r6, lr}
 297              	.LCFI3:
 298              		.cfi_def_cfa_offset 16
 299              		.cfi_offset 4, -16
 300              		.cfi_offset 5, -12
 301              		.cfi_offset 6, -8
 302              		.cfi_offset 14, -4
 303 0002 0446     		mov	r4, r0
  77:SYS/data_structure/queue.c ****     if ((queue->state == Queue_ok) || (queue->state == Queue_empty))
ARM GAS  /tmp/ccVNN7NQ.s 			page 8


 304              		.loc 1 77 0
 305 0004 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 306 0006 1BB1     		cbz	r3, .L22
 307              		.loc 1 77 0 is_stmt 0 discriminator 1
 308 0008 042B     		cmp	r3, #4
 309 000a 01D0     		beq	.L22
 310              	.LVL25:
 311              	.L23:
  78:SYS/data_structure/queue.c ****     {
  79:SYS/data_structure/queue.c ****         if (len <= (QUEUE_MAX_SIZE - queue->size))
  80:SYS/data_structure/queue.c ****         {
  81:SYS/data_structure/queue.c ****             for (uint16_t index = 0; index < len; index++)
  82:SYS/data_structure/queue.c ****             {
  83:SYS/data_structure/queue.c ****                 queue->buff[queue->end_pos + index] = data[index];
  84:SYS/data_structure/queue.c ****             }
  85:SYS/data_structure/queue.c **** 
  86:SYS/data_structure/queue.c ****             queue->end_pos = (queue->end_pos + len) % QUEUE_MAX_SIZE;
  87:SYS/data_structure/queue.c ****             queue->size += len;
  88:SYS/data_structure/queue.c ****             Queue_GetState(queue);
  89:SYS/data_structure/queue.c ****         }
  90:SYS/data_structure/queue.c ****         else
  91:SYS/data_structure/queue.c ****         {
  92:SYS/data_structure/queue.c ****             queue->error_times[GET_QUEUE_ERROR_INDEX(Queue_overflow_w)]++;
  93:SYS/data_structure/queue.c ****             queue->total_error_times++;
  94:SYS/data_structure/queue.c ****             return Queue_overflow_w;
  95:SYS/data_structure/queue.c ****         }
  96:SYS/data_structure/queue.c ****     }
  97:SYS/data_structure/queue.c **** 
  98:SYS/data_structure/queue.c ****     return queue->state;
 312              		.loc 1 98 0 is_stmt 1
 313 000c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
  99:SYS/data_structure/queue.c **** }
 314              		.loc 1 99 0
 315 000e 70BD     		pop	{r4, r5, r6, pc}
 316              	.LVL26:
 317              	.L22:
  79:SYS/data_structure/queue.c ****         {
 318              		.loc 1 79 0
 319 0010 A688     		ldrh	r6, [r4, #4]
 320 0012 C6F50073 		rsb	r3, r6, #512
 321 0016 9942     		cmp	r1, r3
 322 0018 1FDD     		ble	.L31
  92:SYS/data_structure/queue.c ****             queue->total_error_times++;
 323              		.loc 1 92 0
 324 001a D4F81032 		ldr	r3, [r4, #528]
 325 001e 0133     		adds	r3, r3, #1
 326 0020 C4F81032 		str	r3, [r4, #528]
  93:SYS/data_structure/queue.c ****             return Queue_overflow_w;
 327              		.loc 1 93 0
 328 0024 D4F82032 		ldr	r3, [r4, #544]
 329 0028 0133     		adds	r3, r3, #1
 330 002a C4F82032 		str	r3, [r4, #544]
  94:SYS/data_structure/queue.c ****         }
 331              		.loc 1 94 0
 332 002e 0220     		movs	r0, #2
 333              	.LVL27:
 334 0030 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/ccVNN7NQ.s 			page 9


 335              	.LVL28:
 336              	.L26:
 337              	.LBB4:
  83:SYS/data_structure/queue.c ****             }
 338              		.loc 1 83 0 discriminator 3
 339 0032 6089     		ldrh	r0, [r4, #10]
 340 0034 1844     		add	r0, r0, r3
 341 0036 D55C     		ldrb	r5, [r2, r3]	@ zero_extendqisi2
 342 0038 2044     		add	r0, r0, r4
 343 003a 0573     		strb	r5, [r0, #12]
  81:SYS/data_structure/queue.c ****             {
 344              		.loc 1 81 0 discriminator 3
 345 003c 0133     		adds	r3, r3, #1
 346              	.LVL29:
 347 003e 9BB2     		uxth	r3, r3
 348              	.LVL30:
 349              	.L24:
  81:SYS/data_structure/queue.c ****             {
 350              		.loc 1 81 0 is_stmt 0 discriminator 1
 351 0040 8B42     		cmp	r3, r1
 352 0042 F6D3     		bcc	.L26
 353              	.LBE4:
  86:SYS/data_structure/queue.c ****             queue->size += len;
 354              		.loc 1 86 0 is_stmt 1
 355 0044 6389     		ldrh	r3, [r4, #10]
 356              	.LVL31:
 357 0046 0B44     		add	r3, r3, r1
 358 0048 C3F30803 		ubfx	r3, r3, #0, #9
 359 004c 6381     		strh	r3, [r4, #10]	@ movhi
  87:SYS/data_structure/queue.c ****             Queue_GetState(queue);
 360              		.loc 1 87 0
 361 004e 3144     		add	r1, r1, r6
 362              	.LVL32:
 363 0050 A180     		strh	r1, [r4, #4]	@ movhi
  88:SYS/data_structure/queue.c ****         }
 364              		.loc 1 88 0
 365 0052 2046     		mov	r0, r4
 366 0054 FFF7FEFF 		bl	Queue_GetState
 367              	.LVL33:
 368 0058 D8E7     		b	.L23
 369              	.LVL34:
 370              	.L31:
 371 005a 0023     		movs	r3, #0
 372 005c F0E7     		b	.L24
 373              		.cfi_endproc
 374              	.LFE128:
 376              		.section	.text.Queue_PopCharFromFront,"ax",%progbits
 377              		.align	1
 378              		.global	Queue_PopCharFromFront
 379              		.syntax unified
 380              		.thumb
 381              		.thumb_func
 382              		.fpu fpv4-sp-d16
 384              	Queue_PopCharFromFront:
 385              	.LFB129:
 100:SYS/data_structure/queue.c **** 
 101:SYS/data_structure/queue.c **** Queue_state Queue_PopCharFromFront(queue_s *queue, char *out_data)
ARM GAS  /tmp/ccVNN7NQ.s 			page 10


 102:SYS/data_structure/queue.c **** {
 386              		.loc 1 102 0
 387              		.cfi_startproc
 388              		@ args = 0, pretend = 0, frame = 0
 389              		@ frame_needed = 0, uses_anonymous_args = 0
 390              	.LVL35:
 391 0000 10B5     		push	{r4, lr}
 392              	.LCFI4:
 393              		.cfi_def_cfa_offset 8
 394              		.cfi_offset 4, -8
 395              		.cfi_offset 14, -4
 396 0002 0446     		mov	r4, r0
 103:SYS/data_structure/queue.c ****     if ((queue->state == Queue_ok) || (queue->state == Queue_full))
 397              		.loc 1 103 0
 398 0004 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 399 0006 0BB1     		cbz	r3, .L33
 400              		.loc 1 103 0 is_stmt 0 discriminator 1
 401 0008 052B     		cmp	r3, #5
 402 000a 0DD1     		bne	.L34
 403              	.L33:
 104:SYS/data_structure/queue.c ****     {
 105:SYS/data_structure/queue.c ****         *out_data = queue->buff[queue->head_pos];
 404              		.loc 1 105 0 is_stmt 1
 405 000c 2389     		ldrh	r3, [r4, #8]
 406 000e 2344     		add	r3, r3, r4
 407 0010 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 408 0012 0B70     		strb	r3, [r1]
 106:SYS/data_structure/queue.c ****         queue->buff[queue->head_pos] = NULL;
 409              		.loc 1 106 0
 410 0014 2389     		ldrh	r3, [r4, #8]
 411 0016 2344     		add	r3, r3, r4
 412 0018 0022     		movs	r2, #0
 413 001a 1A73     		strb	r2, [r3, #12]
 107:SYS/data_structure/queue.c **** 
 108:SYS/data_structure/queue.c ****         queue->head_pos == (queue->head_pos + 1) % QUEUE_MAX_SIZE;
 109:SYS/data_structure/queue.c ****         queue->size--;
 414              		.loc 1 109 0
 415 001c A388     		ldrh	r3, [r4, #4]
 416 001e 013B     		subs	r3, r3, #1
 417 0020 A380     		strh	r3, [r4, #4]	@ movhi
 110:SYS/data_structure/queue.c **** 
 111:SYS/data_structure/queue.c ****         Queue_GetState(queue);
 418              		.loc 1 111 0
 419 0022 2046     		mov	r0, r4
 420              	.LVL36:
 421 0024 FFF7FEFF 		bl	Queue_GetState
 422              	.LVL37:
 423              	.L34:
 112:SYS/data_structure/queue.c ****     }
 113:SYS/data_structure/queue.c **** 
 114:SYS/data_structure/queue.c ****     return queue->state;
 115:SYS/data_structure/queue.c **** }
 424              		.loc 1 115 0
 425 0028 A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 426 002a 10BD     		pop	{r4, pc}
 427              		.cfi_endproc
 428              	.LFE129:
ARM GAS  /tmp/ccVNN7NQ.s 			page 11


 430              		.section	.text.Queue_PopCharFromBack,"ax",%progbits
 431              		.align	1
 432              		.global	Queue_PopCharFromBack
 433              		.syntax unified
 434              		.thumb
 435              		.thumb_func
 436              		.fpu fpv4-sp-d16
 438              	Queue_PopCharFromBack:
 439              	.LFB130:
 116:SYS/data_structure/queue.c **** 
 117:SYS/data_structure/queue.c **** //still have bug in this func fix when i start to use it hahahahha boooyaaaaa
 118:SYS/data_structure/queue.c **** Queue_state Queue_PopCharFromBack(queue_s *queue, char *out_data)
 119:SYS/data_structure/queue.c **** {
 440              		.loc 1 119 0
 441              		.cfi_startproc
 442              		@ args = 0, pretend = 0, frame = 0
 443              		@ frame_needed = 0, uses_anonymous_args = 0
 444              	.LVL38:
 445 0000 10B5     		push	{r4, lr}
 446              	.LCFI5:
 447              		.cfi_def_cfa_offset 8
 448              		.cfi_offset 4, -8
 449              		.cfi_offset 14, -4
 450 0002 0446     		mov	r4, r0
 120:SYS/data_structure/queue.c ****     if ((queue->state == Queue_ok) || (queue->state == Queue_full))
 451              		.loc 1 120 0
 452 0004 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 453 0006 0BB1     		cbz	r3, .L37
 454              		.loc 1 120 0 is_stmt 0 discriminator 1
 455 0008 052B     		cmp	r3, #5
 456 000a 17D1     		bne	.L38
 457              	.L37:
 121:SYS/data_structure/queue.c ****     {
 122:SYS/data_structure/queue.c ****         *out_data = queue->buff[queue->end_pos - 1];
 458              		.loc 1 122 0 is_stmt 1
 459 000c 6389     		ldrh	r3, [r4, #10]
 460 000e 013B     		subs	r3, r3, #1
 461 0010 2344     		add	r3, r3, r4
 462 0012 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 463 0014 0B70     		strb	r3, [r1]
 123:SYS/data_structure/queue.c ****         queue->buff[queue->end_pos - 1] = NULL;
 464              		.loc 1 123 0
 465 0016 6389     		ldrh	r3, [r4, #10]
 466 0018 013B     		subs	r3, r3, #1
 467 001a E218     		adds	r2, r4, r3
 468 001c 0021     		movs	r1, #0
 469              	.LVL39:
 470 001e 1173     		strb	r1, [r2, #12]
 124:SYS/data_structure/queue.c **** 
 125:SYS/data_structure/queue.c ****         queue->end_pos = (queue->end_pos - 1) % QUEUE_MAX_SIZE;
 471              		.loc 1 125 0
 472 0020 CA1A     		subs	r2, r1, r3
 473 0022 C3F30803 		ubfx	r3, r3, #0, #9
 474 0026 C2F30802 		ubfx	r2, r2, #0, #9
 475 002a 58BF     		it	pl
 476 002c 5342     		rsbpl	r3, r2, #0
 477 002e 6381     		strh	r3, [r4, #10]	@ movhi
ARM GAS  /tmp/ccVNN7NQ.s 			page 12


 126:SYS/data_structure/queue.c ****         queue->size--;
 478              		.loc 1 126 0
 479 0030 A388     		ldrh	r3, [r4, #4]
 480 0032 013B     		subs	r3, r3, #1
 481 0034 A380     		strh	r3, [r4, #4]	@ movhi
 127:SYS/data_structure/queue.c **** 
 128:SYS/data_structure/queue.c ****         Queue_GetState(queue);
 482              		.loc 1 128 0
 483 0036 2046     		mov	r0, r4
 484              	.LVL40:
 485 0038 FFF7FEFF 		bl	Queue_GetState
 486              	.LVL41:
 487              	.L38:
 129:SYS/data_structure/queue.c ****     }
 130:SYS/data_structure/queue.c **** 
 131:SYS/data_structure/queue.c ****     return queue->state;
 132:SYS/data_structure/queue.c **** }
 488              		.loc 1 132 0
 489 003c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 490 003e 10BD     		pop	{r4, pc}
 491              		.cfi_endproc
 492              	.LFE130:
 494              		.section	.text.Queue_Dump,"ax",%progbits
 495              		.align	1
 496              		.global	Queue_Dump
 497              		.syntax unified
 498              		.thumb
 499              		.thumb_func
 500              		.fpu fpv4-sp-d16
 502              	Queue_Dump:
 503              	.LFB131:
 133:SYS/data_structure/queue.c **** 
 134:SYS/data_structure/queue.c **** Queue_state Queue_Dump(queue_s *queue, char *out_data)
 135:SYS/data_structure/queue.c **** {
 504              		.loc 1 135 0
 505              		.cfi_startproc
 506              		@ args = 0, pretend = 0, frame = 0
 507              		@ frame_needed = 0, uses_anonymous_args = 0
 508              		@ link register save eliminated.
 509              	.LVL42:
 510 0000 10B4     		push	{r4}
 511              	.LCFI6:
 512              		.cfi_def_cfa_offset 4
 513              		.cfi_offset 4, -4
 514              	.LVL43:
 515              	.LBB5:
 136:SYS/data_structure/queue.c **** 
 137:SYS/data_structure/queue.c ****     for (uint16_t index = 0; index < queue->size; index++)
 516              		.loc 1 137 0
 517 0002 0023     		movs	r3, #0
 518 0004 09E0     		b	.L41
 519              	.LVL44:
 520              	.L42:
 138:SYS/data_structure/queue.c ****     {
 139:SYS/data_structure/queue.c ****         if (queue->output_type == Queue_FIFO)
 140:SYS/data_structure/queue.c ****         {
 141:SYS/data_structure/queue.c ****             out_data[index] = queue->buff[index];
ARM GAS  /tmp/ccVNN7NQ.s 			page 13


 142:SYS/data_structure/queue.c ****         }
 143:SYS/data_structure/queue.c ****         else
 144:SYS/data_structure/queue.c ****         {
 145:SYS/data_structure/queue.c ****             out_data[index] = queue->buff[queue->size - 1 - index];
 521              		.loc 1 145 0
 522 0006 013A     		subs	r2, r2, #1
 523 0008 D21A     		subs	r2, r2, r3
 524 000a 0244     		add	r2, r2, r0
 525 000c 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 526 000e CA54     		strb	r2, [r1, r3]
 527              	.L43:
 146:SYS/data_structure/queue.c ****         }
 147:SYS/data_structure/queue.c **** 
 148:SYS/data_structure/queue.c ****         queue->buff[index] = NULL;
 528              		.loc 1 148 0 discriminator 2
 529 0010 C218     		adds	r2, r0, r3
 530 0012 0024     		movs	r4, #0
 531 0014 1473     		strb	r4, [r2, #12]
 137:SYS/data_structure/queue.c ****     {
 532              		.loc 1 137 0 discriminator 2
 533 0016 0133     		adds	r3, r3, #1
 534              	.LVL45:
 535 0018 9BB2     		uxth	r3, r3
 536              	.LVL46:
 537              	.L41:
 137:SYS/data_structure/queue.c ****     {
 538              		.loc 1 137 0 is_stmt 0 discriminator 1
 539 001a 8288     		ldrh	r2, [r0, #4]
 540 001c 9342     		cmp	r3, r2
 541 001e 07D2     		bcs	.L46
 139:SYS/data_structure/queue.c ****         {
 542              		.loc 1 139 0 is_stmt 1
 543 0020 90F80C42 		ldrb	r4, [r0, #524]	@ zero_extendqisi2
 544 0024 002C     		cmp	r4, #0
 545 0026 EED1     		bne	.L42
 141:SYS/data_structure/queue.c ****         }
 546              		.loc 1 141 0
 547 0028 C218     		adds	r2, r0, r3
 548 002a 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 549 002c CA54     		strb	r2, [r1, r3]
 550 002e EFE7     		b	.L43
 551              	.L46:
 552              	.LBE5:
 149:SYS/data_structure/queue.c ****     }
 150:SYS/data_structure/queue.c **** 
 151:SYS/data_structure/queue.c ****     queue->size = 0;
 553              		.loc 1 151 0
 554 0030 0023     		movs	r3, #0
 555              	.LVL47:
 556 0032 8380     		strh	r3, [r0, #4]	@ movhi
 152:SYS/data_structure/queue.c ****     queue->end_pos = 0;
 557              		.loc 1 152 0
 558 0034 4381     		strh	r3, [r0, #10]	@ movhi
 153:SYS/data_structure/queue.c ****     queue->head_pos = 0;
 559              		.loc 1 153 0
 560 0036 0381     		strh	r3, [r0, #8]	@ movhi
 154:SYS/data_structure/queue.c ****     queue->state = Queue_empty;
ARM GAS  /tmp/ccVNN7NQ.s 			page 14


 561              		.loc 1 154 0
 562 0038 0423     		movs	r3, #4
 563 003a 8371     		strb	r3, [r0, #6]
 155:SYS/data_structure/queue.c **** 
 156:SYS/data_structure/queue.c ****     return queue->state;
 157:SYS/data_structure/queue.c **** }
 564              		.loc 1 157 0
 565 003c 1846     		mov	r0, r3
 566              	.LVL48:
 567 003e 5DF8044B 		ldr	r4, [sp], #4
 568              	.LCFI7:
 569              		.cfi_restore 4
 570              		.cfi_def_cfa_offset 0
 571 0042 7047     		bx	lr
 572              		.cfi_endproc
 573              	.LFE131:
 575              		.section	.text.Queue_PopLenCharFromFront,"ax",%progbits
 576              		.align	1
 577              		.global	Queue_PopLenCharFromFront
 578              		.syntax unified
 579              		.thumb
 580              		.thumb_func
 581              		.fpu fpv4-sp-d16
 583              	Queue_PopLenCharFromFront:
 584              	.LFB132:
 158:SYS/data_structure/queue.c **** 
 159:SYS/data_structure/queue.c **** Queue_state Queue_PopLenCharFromFront(queue_s *queue, uint16_t len, char *out_buff)
 160:SYS/data_structure/queue.c **** {
 585              		.loc 1 160 0
 586              		.cfi_startproc
 587              		@ args = 0, pretend = 0, frame = 0
 588              		@ frame_needed = 0, uses_anonymous_args = 0
 589              	.LVL49:
 590 0000 38B5     		push	{r3, r4, r5, lr}
 591              	.LCFI8:
 592              		.cfi_def_cfa_offset 16
 593              		.cfi_offset 3, -16
 594              		.cfi_offset 4, -12
 595              		.cfi_offset 5, -8
 596              		.cfi_offset 14, -4
 161:SYS/data_structure/queue.c ****     static uint32_t test = 0;
 162:SYS/data_structure/queue.c ****     if ((queue->state == Queue_ok) || (queue->state == Queue_full))
 597              		.loc 1 162 0
 598 0002 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 599 0004 1BB1     		cbz	r3, .L48
 600              		.loc 1 162 0 is_stmt 0 discriminator 1
 601 0006 052B     		cmp	r3, #5
 602 0008 01D0     		beq	.L48
 163:SYS/data_structure/queue.c ****     {
 164:SYS/data_structure/queue.c ****         if (len <= queue->size)
 165:SYS/data_structure/queue.c ****         {
 166:SYS/data_structure/queue.c ****             for (uint16_t index = 0; index < len; index++)
 167:SYS/data_structure/queue.c ****             {
 168:SYS/data_structure/queue.c ****                 if (queue->output_type == Queue_FIFO)
 169:SYS/data_structure/queue.c ****                 {
 170:SYS/data_structure/queue.c ****                     //FIFO
 171:SYS/data_structure/queue.c ****                     out_buff[index] = queue->buff[queue->head_pos + index];
ARM GAS  /tmp/ccVNN7NQ.s 			page 15


 172:SYS/data_structure/queue.c ****                     queue->buff[queue->head_pos + index] = NULL;
 173:SYS/data_structure/queue.c ****                 }
 174:SYS/data_structure/queue.c ****                 else
 175:SYS/data_structure/queue.c ****                 {
 176:SYS/data_structure/queue.c ****                     //LIFO
 177:SYS/data_structure/queue.c ****                     out_buff[index] = queue->buff[queue->head_pos + len - 1 - index];
 178:SYS/data_structure/queue.c ****                     queue->buff[queue->head_pos + len - 1 - index] = NULL;
 179:SYS/data_structure/queue.c ****                 }
 180:SYS/data_structure/queue.c ****             }
 181:SYS/data_structure/queue.c **** 
 182:SYS/data_structure/queue.c ****             queue->size -= len;
 183:SYS/data_structure/queue.c ****             queue->head_pos = (queue->head_pos + len) % QUEUE_MAX_SIZE;
 184:SYS/data_structure/queue.c **** 
 185:SYS/data_structure/queue.c ****             Queue_GetState(queue);
 186:SYS/data_structure/queue.c ****             return Queue_ok;
 187:SYS/data_structure/queue.c ****         }
 188:SYS/data_structure/queue.c ****         else
 189:SYS/data_structure/queue.c ****         {
 190:SYS/data_structure/queue.c ****             test++;
 191:SYS/data_structure/queue.c ****             //count error num
 192:SYS/data_structure/queue.c ****             queue->error_times[GET_QUEUE_ERROR_INDEX(Queue_overlimit_r)]++;
 193:SYS/data_structure/queue.c ****             queue->total_error_times++;
 194:SYS/data_structure/queue.c ****             return Queue_overlimit_r;
 195:SYS/data_structure/queue.c ****         }
 196:SYS/data_structure/queue.c ****     }
 197:SYS/data_structure/queue.c ****     else
 198:SYS/data_structure/queue.c ****     {
 199:SYS/data_structure/queue.c ****         return Queue_empty;
 603              		.loc 1 199 0 is_stmt 1
 604 000a 0420     		movs	r0, #4
 605              	.LVL50:
 200:SYS/data_structure/queue.c ****     }
 201:SYS/data_structure/queue.c **** }
 606              		.loc 1 201 0
 607 000c 38BD     		pop	{r3, r4, r5, pc}
 608              	.LVL51:
 609              	.L48:
 164:SYS/data_structure/queue.c ****         {
 610              		.loc 1 164 0
 611 000e 8388     		ldrh	r3, [r0, #4]
 612 0010 8B42     		cmp	r3, r1
 613 0012 30D2     		bcs	.L59
 190:SYS/data_structure/queue.c ****             //count error num
 614              		.loc 1 190 0
 615 0014 1F4A     		ldr	r2, .L61
 616              	.LVL52:
 617 0016 1368     		ldr	r3, [r2]
 618 0018 0133     		adds	r3, r3, #1
 619 001a 1360     		str	r3, [r2]
 192:SYS/data_structure/queue.c ****             queue->total_error_times++;
 620              		.loc 1 192 0
 621 001c D0F81432 		ldr	r3, [r0, #532]
 622 0020 0133     		adds	r3, r3, #1
 623 0022 C0F81432 		str	r3, [r0, #532]
 193:SYS/data_structure/queue.c ****             return Queue_overlimit_r;
 624              		.loc 1 193 0
 625 0026 D0F82032 		ldr	r3, [r0, #544]
ARM GAS  /tmp/ccVNN7NQ.s 			page 16


 626 002a 0133     		adds	r3, r3, #1
 627 002c C0F82032 		str	r3, [r0, #544]
 194:SYS/data_structure/queue.c ****         }
 628              		.loc 1 194 0
 629 0030 0320     		movs	r0, #3
 630              	.LVL53:
 631 0032 38BD     		pop	{r3, r4, r5, pc}
 632              	.LVL54:
 633              	.L52:
 634              	.LBB6:
 177:SYS/data_structure/queue.c ****                     queue->buff[queue->head_pos + len - 1 - index] = NULL;
 635              		.loc 1 177 0
 636 0034 0489     		ldrh	r4, [r0, #8]
 637 0036 0C44     		add	r4, r4, r1
 638 0038 013C     		subs	r4, r4, #1
 639 003a E41A     		subs	r4, r4, r3
 640 003c 0444     		add	r4, r4, r0
 641 003e 247B     		ldrb	r4, [r4, #12]	@ zero_extendqisi2
 642 0040 D454     		strb	r4, [r2, r3]
 178:SYS/data_structure/queue.c ****                 }
 643              		.loc 1 178 0
 644 0042 0489     		ldrh	r4, [r0, #8]
 645 0044 0C44     		add	r4, r4, r1
 646 0046 013C     		subs	r4, r4, #1
 647 0048 E41A     		subs	r4, r4, r3
 648 004a 0444     		add	r4, r4, r0
 649 004c 0025     		movs	r5, #0
 650 004e 2573     		strb	r5, [r4, #12]
 651              	.L53:
 166:SYS/data_structure/queue.c ****             {
 652              		.loc 1 166 0 discriminator 2
 653 0050 0133     		adds	r3, r3, #1
 654              	.LVL55:
 655 0052 9BB2     		uxth	r3, r3
 656              	.LVL56:
 657              	.L50:
 166:SYS/data_structure/queue.c ****             {
 658              		.loc 1 166 0 is_stmt 0 discriminator 1
 659 0054 8B42     		cmp	r3, r1
 660 0056 10D2     		bcs	.L60
 168:SYS/data_structure/queue.c ****                 {
 661              		.loc 1 168 0 is_stmt 1
 662 0058 90F80C42 		ldrb	r4, [r0, #524]	@ zero_extendqisi2
 663 005c 002C     		cmp	r4, #0
 664 005e E9D1     		bne	.L52
 171:SYS/data_structure/queue.c ****                     queue->buff[queue->head_pos + index] = NULL;
 665              		.loc 1 171 0
 666 0060 0489     		ldrh	r4, [r0, #8]
 667 0062 1C44     		add	r4, r4, r3
 668 0064 0444     		add	r4, r4, r0
 669 0066 247B     		ldrb	r4, [r4, #12]	@ zero_extendqisi2
 670 0068 D454     		strb	r4, [r2, r3]
 172:SYS/data_structure/queue.c ****                 }
 671              		.loc 1 172 0
 672 006a 0489     		ldrh	r4, [r0, #8]
 673 006c 1C44     		add	r4, r4, r3
 674 006e 0444     		add	r4, r4, r0
ARM GAS  /tmp/ccVNN7NQ.s 			page 17


 675 0070 0025     		movs	r5, #0
 676 0072 2573     		strb	r5, [r4, #12]
 677 0074 ECE7     		b	.L53
 678              	.LVL57:
 679              	.L59:
 680              	.LBE6:
 681 0076 0023     		movs	r3, #0
 682 0078 ECE7     		b	.L50
 683              	.LVL58:
 684              	.L60:
 182:SYS/data_structure/queue.c ****             queue->head_pos = (queue->head_pos + len) % QUEUE_MAX_SIZE;
 685              		.loc 1 182 0
 686 007a 8388     		ldrh	r3, [r0, #4]
 687              	.LVL59:
 688 007c 5B1A     		subs	r3, r3, r1
 689 007e 8380     		strh	r3, [r0, #4]	@ movhi
 183:SYS/data_structure/queue.c **** 
 690              		.loc 1 183 0
 691 0080 0389     		ldrh	r3, [r0, #8]
 692 0082 1944     		add	r1, r1, r3
 693              	.LVL60:
 694 0084 C1F30801 		ubfx	r1, r1, #0, #9
 695 0088 0181     		strh	r1, [r0, #8]	@ movhi
 185:SYS/data_structure/queue.c ****             return Queue_ok;
 696              		.loc 1 185 0
 697 008a FFF7FEFF 		bl	Queue_GetState
 698              	.LVL61:
 186:SYS/data_structure/queue.c ****         }
 699              		.loc 1 186 0
 700 008e 0020     		movs	r0, #0
 701 0090 38BD     		pop	{r3, r4, r5, pc}
 702              	.L62:
 703 0092 00BF     		.align	2
 704              	.L61:
 705 0094 00000000 		.word	.LANCHOR1
 706              		.cfi_endproc
 707              	.LFE132:
 709              		.section	.text.Queue_PopLenCharFromBack,"ax",%progbits
 710              		.align	1
 711              		.global	Queue_PopLenCharFromBack
 712              		.syntax unified
 713              		.thumb
 714              		.thumb_func
 715              		.fpu fpv4-sp-d16
 717              	Queue_PopLenCharFromBack:
 718              	.LFB133:
 202:SYS/data_structure/queue.c **** 
 203:SYS/data_structure/queue.c **** //func describe same as Queue_PopCharFromBack
 204:SYS/data_structure/queue.c **** Queue_state Queue_PopLenCharFromBack(queue_s *queue, uint16_t len, char *out_buff)
 205:SYS/data_structure/queue.c **** {
 719              		.loc 1 205 0
 720              		.cfi_startproc
 721              		@ args = 0, pretend = 0, frame = 0
 722              		@ frame_needed = 0, uses_anonymous_args = 0
 723              	.LVL62:
 724 0000 38B5     		push	{r3, r4, r5, lr}
 725              	.LCFI9:
ARM GAS  /tmp/ccVNN7NQ.s 			page 18


 726              		.cfi_def_cfa_offset 16
 727              		.cfi_offset 3, -16
 728              		.cfi_offset 4, -12
 729              		.cfi_offset 5, -8
 730              		.cfi_offset 14, -4
 731 0002 0446     		mov	r4, r0
 206:SYS/data_structure/queue.c ****     if ((queue->state == Queue_ok) || (queue->state == Queue_full))
 732              		.loc 1 206 0
 733 0004 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 734 0006 1BB1     		cbz	r3, .L64
 735              		.loc 1 206 0 is_stmt 0 discriminator 1
 736 0008 052B     		cmp	r3, #5
 737 000a 01D0     		beq	.L64
 738              	.LVL63:
 739              	.L65:
 207:SYS/data_structure/queue.c ****     {
 208:SYS/data_structure/queue.c ****         if (len < queue->size)
 209:SYS/data_structure/queue.c ****         {
 210:SYS/data_structure/queue.c ****             for (uint16_t index = 0; index < len; index++)
 211:SYS/data_structure/queue.c ****             {
 212:SYS/data_structure/queue.c ****                 if (queue->output_type == Queue_LIFO)
 213:SYS/data_structure/queue.c ****                 {
 214:SYS/data_structure/queue.c ****                     out_buff[index] = queue->buff[(queue->end_pos - 1) - index];
 215:SYS/data_structure/queue.c ****                     queue->buff[(queue->end_pos - 1) - index] = NULL;
 216:SYS/data_structure/queue.c ****                 }
 217:SYS/data_structure/queue.c ****                 else
 218:SYS/data_structure/queue.c ****                 {
 219:SYS/data_structure/queue.c ****                     out_buff[index] = queue->buff[(queue->end_pos - 1 - len) + index];
 220:SYS/data_structure/queue.c ****                     queue->buff[(queue->end_pos - 1 - len) + index] = NULL;
 221:SYS/data_structure/queue.c ****                 }
 222:SYS/data_structure/queue.c ****             }
 223:SYS/data_structure/queue.c **** 
 224:SYS/data_structure/queue.c ****             queue->size -= len;
 225:SYS/data_structure/queue.c ****             queue->end_pos = (queue->end_pos - len) % QUEUE_MAX_SIZE;
 226:SYS/data_structure/queue.c **** 
 227:SYS/data_structure/queue.c ****             Queue_GetState(queue);
 228:SYS/data_structure/queue.c ****         }
 229:SYS/data_structure/queue.c ****         else
 230:SYS/data_structure/queue.c ****         {
 231:SYS/data_structure/queue.c ****             queue->error_times[GET_QUEUE_ERROR_INDEX(Queue_overlimit_r)]++;
 232:SYS/data_structure/queue.c ****             queue->total_error_times++;
 233:SYS/data_structure/queue.c ****             return Queue_overlimit_r;
 234:SYS/data_structure/queue.c ****         }
 235:SYS/data_structure/queue.c ****     }
 236:SYS/data_structure/queue.c **** 
 237:SYS/data_structure/queue.c ****     return queue->state;
 740              		.loc 1 237 0 is_stmt 1
 741 000c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 238:SYS/data_structure/queue.c **** }
 742              		.loc 1 238 0
 743 000e 38BD     		pop	{r3, r4, r5, pc}
 744              	.LVL64:
 745              	.L64:
 208:SYS/data_structure/queue.c ****         {
 746              		.loc 1 208 0
 747 0010 A388     		ldrh	r3, [r4, #4]
 748 0012 8B42     		cmp	r3, r1
ARM GAS  /tmp/ccVNN7NQ.s 			page 19


 749 0014 2ED8     		bhi	.L75
 231:SYS/data_structure/queue.c ****             queue->total_error_times++;
 750              		.loc 1 231 0
 751 0016 D4F81432 		ldr	r3, [r4, #532]
 752 001a 0133     		adds	r3, r3, #1
 753 001c C4F81432 		str	r3, [r4, #532]
 232:SYS/data_structure/queue.c ****             return Queue_overlimit_r;
 754              		.loc 1 232 0
 755 0020 D4F82032 		ldr	r3, [r4, #544]
 756 0024 0133     		adds	r3, r3, #1
 757 0026 C4F82032 		str	r3, [r4, #544]
 233:SYS/data_structure/queue.c ****         }
 758              		.loc 1 233 0
 759 002a 0320     		movs	r0, #3
 760              	.LVL65:
 761 002c 38BD     		pop	{r3, r4, r5, pc}
 762              	.LVL66:
 763              	.L77:
 764              	.LBB7:
 214:SYS/data_structure/queue.c ****                     queue->buff[(queue->end_pos - 1) - index] = NULL;
 765              		.loc 1 214 0
 766 002e 6089     		ldrh	r0, [r4, #10]
 767 0030 0138     		subs	r0, r0, #1
 768 0032 C01A     		subs	r0, r0, r3
 769 0034 2044     		add	r0, r0, r4
 770 0036 007B     		ldrb	r0, [r0, #12]	@ zero_extendqisi2
 771 0038 D054     		strb	r0, [r2, r3]
 215:SYS/data_structure/queue.c ****                 }
 772              		.loc 1 215 0
 773 003a 6089     		ldrh	r0, [r4, #10]
 774 003c 0138     		subs	r0, r0, #1
 775 003e C01A     		subs	r0, r0, r3
 776 0040 2044     		add	r0, r0, r4
 777 0042 0025     		movs	r5, #0
 778 0044 0573     		strb	r5, [r0, #12]
 779              	.L69:
 210:SYS/data_structure/queue.c ****             {
 780              		.loc 1 210 0 discriminator 2
 781 0046 0133     		adds	r3, r3, #1
 782              	.LVL67:
 783 0048 9BB2     		uxth	r3, r3
 784              	.LVL68:
 785              	.L66:
 210:SYS/data_structure/queue.c ****             {
 786              		.loc 1 210 0 is_stmt 0 discriminator 1
 787 004a 8B42     		cmp	r3, r1
 788 004c 14D2     		bcs	.L76
 212:SYS/data_structure/queue.c ****                 {
 789              		.loc 1 212 0 is_stmt 1
 790 004e 94F80C02 		ldrb	r0, [r4, #524]	@ zero_extendqisi2
 791 0052 0128     		cmp	r0, #1
 792 0054 EBD0     		beq	.L77
 219:SYS/data_structure/queue.c ****                     queue->buff[(queue->end_pos - 1 - len) + index] = NULL;
 793              		.loc 1 219 0
 794 0056 6089     		ldrh	r0, [r4, #10]
 795 0058 0138     		subs	r0, r0, #1
 796 005a 401A     		subs	r0, r0, r1
ARM GAS  /tmp/ccVNN7NQ.s 			page 20


 797 005c 1844     		add	r0, r0, r3
 798 005e 2044     		add	r0, r0, r4
 799 0060 007B     		ldrb	r0, [r0, #12]	@ zero_extendqisi2
 800 0062 D054     		strb	r0, [r2, r3]
 220:SYS/data_structure/queue.c ****                 }
 801              		.loc 1 220 0
 802 0064 6089     		ldrh	r0, [r4, #10]
 803 0066 0138     		subs	r0, r0, #1
 804 0068 401A     		subs	r0, r0, r1
 805 006a 1844     		add	r0, r0, r3
 806 006c 2044     		add	r0, r0, r4
 807 006e 0025     		movs	r5, #0
 808 0070 0573     		strb	r5, [r0, #12]
 809 0072 E8E7     		b	.L69
 810              	.LVL69:
 811              	.L75:
 812              	.LBE7:
 813 0074 0023     		movs	r3, #0
 814 0076 E8E7     		b	.L66
 815              	.LVL70:
 816              	.L76:
 224:SYS/data_structure/queue.c ****             queue->end_pos = (queue->end_pos - len) % QUEUE_MAX_SIZE;
 817              		.loc 1 224 0
 818 0078 A388     		ldrh	r3, [r4, #4]
 819              	.LVL71:
 820 007a 5B1A     		subs	r3, r3, r1
 821 007c A380     		strh	r3, [r4, #4]	@ movhi
 225:SYS/data_structure/queue.c **** 
 822              		.loc 1 225 0
 823 007e 6389     		ldrh	r3, [r4, #10]
 824 0080 591A     		subs	r1, r3, r1
 825              	.LVL72:
 826 0082 4B42     		rsbs	r3, r1, #0
 827 0084 C1F30801 		ubfx	r1, r1, #0, #9
 828 0088 C3F30803 		ubfx	r3, r3, #0, #9
 829 008c 58BF     		it	pl
 830 008e 5942     		rsbpl	r1, r3, #0
 831 0090 6181     		strh	r1, [r4, #10]	@ movhi
 227:SYS/data_structure/queue.c ****         }
 832              		.loc 1 227 0
 833 0092 2046     		mov	r0, r4
 834 0094 FFF7FEFF 		bl	Queue_GetState
 835              	.LVL73:
 836 0098 B8E7     		b	.L65
 837              		.cfi_endproc
 838              	.LFE133:
 840              		.section	.text.Queue_CheckData,"ax",%progbits
 841              		.align	1
 842              		.global	Queue_CheckData
 843              		.syntax unified
 844              		.thumb
 845              		.thumb_func
 846              		.fpu fpv4-sp-d16
 848              	Queue_CheckData:
 849              	.LFB134:
 239:SYS/data_structure/queue.c **** 
 240:SYS/data_structure/queue.c **** Queue_CheckOut_u Queue_CheckData(queue_s queue, uint16_t index)
ARM GAS  /tmp/ccVNN7NQ.s 			page 21


 241:SYS/data_structure/queue.c **** {
 850              		.loc 1 241 0
 851              		.cfi_startproc
 852              		@ args = 552, pretend = 16, frame = 0
 853              		@ frame_needed = 0, uses_anonymous_args = 0
 854              		@ link register save eliminated.
 855              	.LVL74:
 856 0000 84B0     		sub	sp, sp, #16
 857              	.LCFI10:
 858              		.cfi_def_cfa_offset 16
 859 0002 8DE80F00 		stm	sp, {r0, r1, r2, r3}
 860 0006 BDF82432 		ldrh	r3, [sp, #548]
 242:SYS/data_structure/queue.c ****     Queue_CheckOut_u Data_tmp;
 243:SYS/data_structure/queue.c ****     Data_tmp.reg.value = 0;
 861              		.loc 1 243 0
 862 000a 4FF00000 		mov	r0, #0	@ movhi
 863              	.LVL75:
 244:SYS/data_structure/queue.c **** 
 245:SYS/data_structure/queue.c ****     if (queue.state != Queue_empty)
 864              		.loc 1 245 0
 865 000e 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 866 0012 042A     		cmp	r2, #4
 867 0014 17D0     		beq	.L79
 246:SYS/data_structure/queue.c ****     {
 247:SYS/data_structure/queue.c ****         if ((index < QUEUE_MAX_SIZE) && (index <= queue.size))
 868              		.loc 1 247 0
 869 0016 B3F5007F 		cmp	r3, #512
 870 001a 0FD2     		bcs	.L80
 871              		.loc 1 247 0 is_stmt 0 discriminator 1
 872 001c BDF80420 		ldrh	r2, [sp, #4]
 873 0020 9342     		cmp	r3, r2
 874 0022 0BD8     		bhi	.L80
 248:SYS/data_structure/queue.c ****         {
 249:SYS/data_structure/queue.c ****             Data_tmp.reg.state = Queue_ok;
 875              		.loc 1 249 0 is_stmt 1
 876 0024 6FF30700 		bfc	r0, #0, #8
 877              	.LVL76:
 250:SYS/data_structure/queue.c ****             Data_tmp.reg.value = queue.buff[(index + queue.head_pos) % QUEUE_MAX_SIZE];
 878              		.loc 1 250 0
 879 0028 BDF80820 		ldrh	r2, [sp, #8]
 880 002c 1344     		add	r3, r3, r2
 881 002e C3F30803 		ubfx	r3, r3, #0, #9
 882 0032 6B44     		add	r3, r3, sp
 883 0034 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 884 0036 63F30F20 		bfi	r0, r3, #8, #8
 885 003a 02E0     		b	.L81
 886              	.LVL77:
 887              	.L80:
 251:SYS/data_structure/queue.c ****         }
 252:SYS/data_structure/queue.c ****         else
 253:SYS/data_structure/queue.c ****         {
 254:SYS/data_structure/queue.c ****             Data_tmp.reg.state = Queue_CheckErrorPos;
 888              		.loc 1 254 0
 889 003c 0123     		movs	r3, #1
 890 003e 63F30700 		bfi	r0, r3, #0, #8
 891              	.LVL78:
 892              	.L81:
ARM GAS  /tmp/ccVNN7NQ.s 			page 22


 893              	.LVL79:
 255:SYS/data_structure/queue.c ****         }
 256:SYS/data_structure/queue.c ****     }
 257:SYS/data_structure/queue.c ****     else
 258:SYS/data_structure/queue.c ****     {
 259:SYS/data_structure/queue.c ****         Data_tmp.reg.state = Queue_empty;
 260:SYS/data_structure/queue.c ****     }
 261:SYS/data_structure/queue.c **** 
 262:SYS/data_structure/queue.c ****     return Data_tmp;
 263:SYS/data_structure/queue.c **** }
 894              		.loc 1 263 0
 895 0042 04B0     		add	sp, sp, #16
 896              	.LCFI11:
 897              		.cfi_remember_state
 898              		.cfi_def_cfa_offset 0
 899 0044 7047     		bx	lr
 900              	.L79:
 901              	.LCFI12:
 902              		.cfi_restore_state
 259:SYS/data_structure/queue.c ****     }
 903              		.loc 1 259 0
 904 0046 0423     		movs	r3, #4
 905 0048 63F30700 		bfi	r0, r3, #0, #8
 906              	.LVL80:
 907 004c F9E7     		b	.L81
 908              		.cfi_endproc
 909              	.LFE134:
 911              		.section	.text.Queue_Output_ErrorTimes,"ax",%progbits
 912              		.align	1
 913              		.global	Queue_Output_ErrorTimes
 914              		.syntax unified
 915              		.thumb
 916              		.thumb_func
 917              		.fpu fpv4-sp-d16
 919              	Queue_Output_ErrorTimes:
 920              	.LFB135:
 264:SYS/data_structure/queue.c **** 
 265:SYS/data_structure/queue.c **** void Queue_Output_ErrorTimes(queue_s queue)
 266:SYS/data_structure/queue.c **** {
 921              		.loc 1 266 0
 922              		.cfi_startproc
 923              		@ args = 548, pretend = 16, frame = 0
 924              		@ frame_needed = 0, uses_anonymous_args = 0
 925              		@ link register save eliminated.
 926 0000 84B0     		sub	sp, sp, #16
 927              	.LCFI13:
 928              		.cfi_def_cfa_offset 16
 929 0002 8DE80F00 		stm	sp, {r0, r1, r2, r3}
 267:SYS/data_structure/queue.c ****     if (queue.total_error_times)
 930              		.loc 1 267 0
 931 0006 889B     		ldr	r3, [sp, #544]
 932 0008 2BB1     		cbz	r3, .L83
 933 000a 0023     		movs	r3, #0
 934 000c 01E0     		b	.L84
 935              	.LVL81:
 936              	.L86:
 937              	.LBB8:
ARM GAS  /tmp/ccVNN7NQ.s 			page 23


 268:SYS/data_structure/queue.c ****     {
 269:SYS/data_structure/queue.c ****         for (uint8_t i = 0; i < QUEUE_ERROR_TYPENUM; i++)
 938              		.loc 1 269 0
 939 000e 0133     		adds	r3, r3, #1
 940              	.LVL82:
 941 0010 DBB2     		uxtb	r3, r3
 942              	.LVL83:
 943              	.L84:
 944              		.loc 1 269 0 is_stmt 0 discriminator 1
 945 0012 032B     		cmp	r3, #3
 946 0014 FBD9     		bls	.L86
 947              	.LVL84:
 948              	.L83:
 949              	.LBE8:
 270:SYS/data_structure/queue.c ****         {
 271:SYS/data_structure/queue.c ****             if (queue.error_times[i])
 272:SYS/data_structure/queue.c ****             {
 273:SYS/data_structure/queue.c ****                 switch (i + Queue_overflow_w)
 274:SYS/data_structure/queue.c ****                 {
 275:SYS/data_structure/queue.c ****                 case Queue_overflow_w:
 276:SYS/data_structure/queue.c ****                     break;
 277:SYS/data_structure/queue.c **** 
 278:SYS/data_structure/queue.c ****                 case Queue_overlimit_r:
 279:SYS/data_structure/queue.c ****                     break;
 280:SYS/data_structure/queue.c **** 
 281:SYS/data_structure/queue.c ****                 case Queue_empty:
 282:SYS/data_structure/queue.c ****                     break;
 283:SYS/data_structure/queue.c **** 
 284:SYS/data_structure/queue.c ****                 case Queue_full:
 285:SYS/data_structure/queue.c ****                     break;
 286:SYS/data_structure/queue.c **** 
 287:SYS/data_structure/queue.c ****                 case Queue_CreateFailed:
 288:SYS/data_structure/queue.c ****                     break;
 289:SYS/data_structure/queue.c ****                 }
 290:SYS/data_structure/queue.c ****             }
 291:SYS/data_structure/queue.c ****         }
 292:SYS/data_structure/queue.c ****     }
 293:SYS/data_structure/queue.c **** }
 950              		.loc 1 293 0 is_stmt 1
 951 0016 04B0     		add	sp, sp, #16
 952              	.LCFI14:
 953              		.cfi_def_cfa_offset 0
 954 0018 7047     		bx	lr
 955              		.cfi_endproc
 956              	.LFE135:
 958              		.section	.bss.Cur_Crtd_Queue,"aw",%nobits
 959              		.set	.LANCHOR0,. + 0
 962              	Cur_Crtd_Queue:
 963 0000 00       		.space	1
 964              		.section	.bss.test.10076,"aw",%nobits
 965              		.align	2
 966              		.set	.LANCHOR1,. + 0
 969              	test.10076:
 970 0000 00000000 		.space	4
 971              		.text
 972              	.Letext0:
 973              		.file 2 "/usr/include/newlib/machine/_default_types.h"
ARM GAS  /tmp/ccVNN7NQ.s 			page 24


 974              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 975              		.file 4 "F4_CORE/core_cm4.h"
 976              		.file 5 "USER/system_stm32f4xx.h"
 977              		.file 6 "SYS/data_structure/queue.h"
 978              		.file 7 "/usr/include/newlib/sys/lock.h"
 979              		.file 8 "/usr/include/newlib/sys/_types.h"
 980              		.file 9 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 981              		.file 10 "/usr/include/newlib/sys/reent.h"
ARM GAS  /tmp/ccVNN7NQ.s 			page 25


DEFINED SYMBOLS
                            *ABS*:0000000000000000 queue.c
     /tmp/ccVNN7NQ.s:18     .text.Queue_GetState:0000000000000000 $t
     /tmp/ccVNN7NQ.s:24     .text.Queue_GetState:0000000000000000 Queue_GetState
     /tmp/ccVNN7NQ.s:97     .text.Queue_Init:0000000000000000 $t
     /tmp/ccVNN7NQ.s:104    .text.Queue_Init:0000000000000000 Queue_Init
     /tmp/ccVNN7NQ.s:193    .text.Queue_Init:000000000000005c $d
     /tmp/ccVNN7NQ.s:198    .text.Queue_Reset:0000000000000000 $t
     /tmp/ccVNN7NQ.s:205    .text.Queue_Reset:0000000000000000 Queue_Reset
     /tmp/ccVNN7NQ.s:228    .text.Queue_PushChar:0000000000000000 $t
     /tmp/ccVNN7NQ.s:235    .text.Queue_PushChar:0000000000000000 Queue_PushChar
     /tmp/ccVNN7NQ.s:282    .text.Queue_PushLenChar:0000000000000000 $t
     /tmp/ccVNN7NQ.s:289    .text.Queue_PushLenChar:0000000000000000 Queue_PushLenChar
     /tmp/ccVNN7NQ.s:377    .text.Queue_PopCharFromFront:0000000000000000 $t
     /tmp/ccVNN7NQ.s:384    .text.Queue_PopCharFromFront:0000000000000000 Queue_PopCharFromFront
     /tmp/ccVNN7NQ.s:431    .text.Queue_PopCharFromBack:0000000000000000 $t
     /tmp/ccVNN7NQ.s:438    .text.Queue_PopCharFromBack:0000000000000000 Queue_PopCharFromBack
     /tmp/ccVNN7NQ.s:495    .text.Queue_Dump:0000000000000000 $t
     /tmp/ccVNN7NQ.s:502    .text.Queue_Dump:0000000000000000 Queue_Dump
     /tmp/ccVNN7NQ.s:576    .text.Queue_PopLenCharFromFront:0000000000000000 $t
     /tmp/ccVNN7NQ.s:583    .text.Queue_PopLenCharFromFront:0000000000000000 Queue_PopLenCharFromFront
     /tmp/ccVNN7NQ.s:705    .text.Queue_PopLenCharFromFront:0000000000000094 $d
     /tmp/ccVNN7NQ.s:710    .text.Queue_PopLenCharFromBack:0000000000000000 $t
     /tmp/ccVNN7NQ.s:717    .text.Queue_PopLenCharFromBack:0000000000000000 Queue_PopLenCharFromBack
     /tmp/ccVNN7NQ.s:841    .text.Queue_CheckData:0000000000000000 $t
     /tmp/ccVNN7NQ.s:848    .text.Queue_CheckData:0000000000000000 Queue_CheckData
     /tmp/ccVNN7NQ.s:912    .text.Queue_Output_ErrorTimes:0000000000000000 $t
     /tmp/ccVNN7NQ.s:919    .text.Queue_Output_ErrorTimes:0000000000000000 Queue_Output_ErrorTimes
     /tmp/ccVNN7NQ.s:962    .bss.Cur_Crtd_Queue:0000000000000000 Cur_Crtd_Queue
     /tmp/ccVNN7NQ.s:963    .bss.Cur_Crtd_Queue:0000000000000000 $d
     /tmp/ccVNN7NQ.s:965    .bss.test.10076:0000000000000000 $d
     /tmp/ccVNN7NQ.s:969    .bss.test.10076:0000000000000000 test.10076
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
memset
Queue_init
