ARM GAS  /tmp/ccMPWmB0.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usb_dcd_int.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.DCD_HandleResume_ISR,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	DCD_HandleResume_ISR:
  25              	.LFB125:
  26              		.file 1 "USB/core/usb_dcd_int.c"
   1:USB/core/usb_dcd_int.c **** /**
   2:USB/core/usb_dcd_int.c ****   ******************************************************************************
   3:USB/core/usb_dcd_int.c ****   * @file    usb_dcd_int.c
   4:USB/core/usb_dcd_int.c ****   * @author  MCD Application Team
   5:USB/core/usb_dcd_int.c ****   * @version V2.1.0
   6:USB/core/usb_dcd_int.c ****   * @date    19-March-2012
   7:USB/core/usb_dcd_int.c ****   * @brief   Peripheral Device interrupt subroutines
   8:USB/core/usb_dcd_int.c ****   ******************************************************************************
   9:USB/core/usb_dcd_int.c ****   * @attention
  10:USB/core/usb_dcd_int.c ****   *
  11:USB/core/usb_dcd_int.c ****   * <h2><center>&copy; COPYRIGHT 2012 STMicroelectronics</center></h2>
  12:USB/core/usb_dcd_int.c ****   *
  13:USB/core/usb_dcd_int.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  14:USB/core/usb_dcd_int.c ****   * You may not use this file except in compliance with the License.
  15:USB/core/usb_dcd_int.c ****   * You may obtain a copy of the License at:
  16:USB/core/usb_dcd_int.c ****   *
  17:USB/core/usb_dcd_int.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
  18:USB/core/usb_dcd_int.c ****   *
  19:USB/core/usb_dcd_int.c ****   * Unless required by applicable law or agreed to in writing, software 
  20:USB/core/usb_dcd_int.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
  21:USB/core/usb_dcd_int.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  22:USB/core/usb_dcd_int.c ****   * See the License for the specific language governing permissions and
  23:USB/core/usb_dcd_int.c ****   * limitations under the License.
  24:USB/core/usb_dcd_int.c ****   *
  25:USB/core/usb_dcd_int.c ****   ******************************************************************************
  26:USB/core/usb_dcd_int.c ****   */
  27:USB/core/usb_dcd_int.c **** 
  28:USB/core/usb_dcd_int.c **** /* Includes ------------------------------------------------------------------*/
  29:USB/core/usb_dcd_int.c **** #include "usb_dcd_int.h"
  30:USB/core/usb_dcd_int.c **** /** @addtogroup USB_OTG_DRIVER
  31:USB/core/usb_dcd_int.c **** * @{
  32:USB/core/usb_dcd_int.c **** */
ARM GAS  /tmp/ccMPWmB0.s 			page 2


  33:USB/core/usb_dcd_int.c **** 
  34:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT 
  35:USB/core/usb_dcd_int.c **** * @brief This file contains the interrupt subroutines for the Device mode.
  36:USB/core/usb_dcd_int.c **** * @{
  37:USB/core/usb_dcd_int.c **** */
  38:USB/core/usb_dcd_int.c **** 
  39:USB/core/usb_dcd_int.c **** 
  40:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT_Private_Defines
  41:USB/core/usb_dcd_int.c **** * @{
  42:USB/core/usb_dcd_int.c **** */ 
  43:USB/core/usb_dcd_int.c **** /**
  44:USB/core/usb_dcd_int.c **** * @}
  45:USB/core/usb_dcd_int.c **** */ 
  46:USB/core/usb_dcd_int.c **** 
  47:USB/core/usb_dcd_int.c **** 
  48:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT_Private_TypesDefinitions
  49:USB/core/usb_dcd_int.c **** * @{
  50:USB/core/usb_dcd_int.c **** */ 
  51:USB/core/usb_dcd_int.c **** /**
  52:USB/core/usb_dcd_int.c **** * @}
  53:USB/core/usb_dcd_int.c **** */ 
  54:USB/core/usb_dcd_int.c **** 
  55:USB/core/usb_dcd_int.c **** 
  56:USB/core/usb_dcd_int.c **** 
  57:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT_Private_Macros
  58:USB/core/usb_dcd_int.c **** * @{
  59:USB/core/usb_dcd_int.c **** */ 
  60:USB/core/usb_dcd_int.c **** /**
  61:USB/core/usb_dcd_int.c **** * @}
  62:USB/core/usb_dcd_int.c **** */ 
  63:USB/core/usb_dcd_int.c **** 
  64:USB/core/usb_dcd_int.c **** 
  65:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT_Private_Variables
  66:USB/core/usb_dcd_int.c **** * @{
  67:USB/core/usb_dcd_int.c **** */ 
  68:USB/core/usb_dcd_int.c **** /**
  69:USB/core/usb_dcd_int.c **** * @}
  70:USB/core/usb_dcd_int.c **** */ 
  71:USB/core/usb_dcd_int.c **** 
  72:USB/core/usb_dcd_int.c **** 
  73:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT_Private_FunctionPrototypes
  74:USB/core/usb_dcd_int.c **** * @{
  75:USB/core/usb_dcd_int.c **** */ 
  76:USB/core/usb_dcd_int.c **** /* static functions */
  77:USB/core/usb_dcd_int.c **** static uint32_t DCD_ReadDevInEP (USB_OTG_CORE_HANDLE *pdev, uint8_t epnum);
  78:USB/core/usb_dcd_int.c **** 
  79:USB/core/usb_dcd_int.c **** /* Interrupt Handlers */
  80:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleInEP_ISR(USB_OTG_CORE_HANDLE *pdev);
  81:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleOutEP_ISR(USB_OTG_CORE_HANDLE *pdev);
  82:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleSof_ISR(USB_OTG_CORE_HANDLE *pdev);
  83:USB/core/usb_dcd_int.c **** 
  84:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleRxStatusQueueLevel_ISR(USB_OTG_CORE_HANDLE *pdev);
  85:USB/core/usb_dcd_int.c **** static uint32_t DCD_WriteEmptyTxFifo(USB_OTG_CORE_HANDLE *pdev , uint32_t epnum);
  86:USB/core/usb_dcd_int.c **** 
  87:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleUsbReset_ISR(USB_OTG_CORE_HANDLE *pdev);
  88:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleEnumDone_ISR(USB_OTG_CORE_HANDLE *pdev);
  89:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleResume_ISR(USB_OTG_CORE_HANDLE *pdev);
ARM GAS  /tmp/ccMPWmB0.s 			page 3


  90:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleUSBSuspend_ISR(USB_OTG_CORE_HANDLE *pdev);
  91:USB/core/usb_dcd_int.c **** 
  92:USB/core/usb_dcd_int.c **** static uint32_t DCD_IsoINIncomplete_ISR(USB_OTG_CORE_HANDLE *pdev);
  93:USB/core/usb_dcd_int.c **** static uint32_t DCD_IsoOUTIncomplete_ISR(USB_OTG_CORE_HANDLE *pdev);
  94:USB/core/usb_dcd_int.c **** #ifdef VBUS_SENSING_ENABLED
  95:USB/core/usb_dcd_int.c **** static uint32_t DCD_SessionRequest_ISR(USB_OTG_CORE_HANDLE *pdev);
  96:USB/core/usb_dcd_int.c **** static uint32_t DCD_OTG_ISR(USB_OTG_CORE_HANDLE *pdev);
  97:USB/core/usb_dcd_int.c **** #endif
  98:USB/core/usb_dcd_int.c **** 
  99:USB/core/usb_dcd_int.c **** /**
 100:USB/core/usb_dcd_int.c **** * @}
 101:USB/core/usb_dcd_int.c **** */ 
 102:USB/core/usb_dcd_int.c **** 
 103:USB/core/usb_dcd_int.c **** 
 104:USB/core/usb_dcd_int.c **** /** @defgroup USB_DCD_INT_Private_Functions
 105:USB/core/usb_dcd_int.c **** * @{
 106:USB/core/usb_dcd_int.c **** */ 
 107:USB/core/usb_dcd_int.c **** 
 108:USB/core/usb_dcd_int.c **** 
 109:USB/core/usb_dcd_int.c **** #ifdef USB_OTG_HS_DEDICATED_EP1_ENABLED  
 110:USB/core/usb_dcd_int.c **** /**
 111:USB/core/usb_dcd_int.c **** * @brief  USBD_OTG_EP1OUT_ISR_Handler
 112:USB/core/usb_dcd_int.c **** *         handles all USB Interrupts
 113:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 114:USB/core/usb_dcd_int.c **** * @retval status
 115:USB/core/usb_dcd_int.c **** */
 116:USB/core/usb_dcd_int.c **** uint32_t USBD_OTG_EP1OUT_ISR_Handler (USB_OTG_CORE_HANDLE *pdev)
 117:USB/core/usb_dcd_int.c **** {
 118:USB/core/usb_dcd_int.c ****   
 119:USB/core/usb_dcd_int.c ****   USB_OTG_DOEPINTn_TypeDef  doepint;
 120:USB/core/usb_dcd_int.c ****   USB_OTG_DEPXFRSIZ_TypeDef  deptsiz;  
 121:USB/core/usb_dcd_int.c ****   
 122:USB/core/usb_dcd_int.c ****   doepint.d32 = USB_OTG_READ_REG32(&pdev->regs.OUTEP_REGS[1]->DOEPINT);
 123:USB/core/usb_dcd_int.c ****   doepint.d32&= USB_OTG_READ_REG32(&pdev->regs.DREGS->DOUTEP1MSK);
 124:USB/core/usb_dcd_int.c ****   
 125:USB/core/usb_dcd_int.c ****   /* Transfer complete */
 126:USB/core/usb_dcd_int.c ****   if ( doepint.b.xfercompl )
 127:USB/core/usb_dcd_int.c ****   {
 128:USB/core/usb_dcd_int.c ****     /* Clear the bit in DOEPINTn for this interrupt */
 129:USB/core/usb_dcd_int.c ****     CLEAR_OUT_EP_INTR(1, xfercompl);
 130:USB/core/usb_dcd_int.c ****     if (pdev->cfg.dma_enable == 1)
 131:USB/core/usb_dcd_int.c ****     {
 132:USB/core/usb_dcd_int.c ****       deptsiz.d32 = USB_OTG_READ_REG32(&(pdev->regs.OUTEP_REGS[1]->DOEPTSIZ));
 133:USB/core/usb_dcd_int.c ****       /*ToDo : handle more than one single MPS size packet */
 134:USB/core/usb_dcd_int.c ****       pdev->dev.out_ep[1].xfer_count = pdev->dev.out_ep[1].maxpacket - \
 135:USB/core/usb_dcd_int.c ****         deptsiz.b.xfersize;
 136:USB/core/usb_dcd_int.c ****     }    
 137:USB/core/usb_dcd_int.c ****     /* Inform upper layer: data ready */
 138:USB/core/usb_dcd_int.c ****     /* RX COMPLETE */
 139:USB/core/usb_dcd_int.c ****     USBD_DCD_INT_fops->DataOutStage(pdev , 1);
 140:USB/core/usb_dcd_int.c ****     
 141:USB/core/usb_dcd_int.c ****   }
 142:USB/core/usb_dcd_int.c ****   
 143:USB/core/usb_dcd_int.c ****   /* Endpoint disable  */
 144:USB/core/usb_dcd_int.c ****   if ( doepint.b.epdisabled )
 145:USB/core/usb_dcd_int.c ****   {
 146:USB/core/usb_dcd_int.c ****     /* Clear the bit in DOEPINTn for this interrupt */
ARM GAS  /tmp/ccMPWmB0.s 			page 4


 147:USB/core/usb_dcd_int.c ****     CLEAR_OUT_EP_INTR(1, epdisabled);
 148:USB/core/usb_dcd_int.c ****   }
 149:USB/core/usb_dcd_int.c **** 
 150:USB/core/usb_dcd_int.c ****   return 1;
 151:USB/core/usb_dcd_int.c **** }
 152:USB/core/usb_dcd_int.c **** 
 153:USB/core/usb_dcd_int.c **** /**
 154:USB/core/usb_dcd_int.c **** * @brief  USBD_OTG_EP1IN_ISR_Handler
 155:USB/core/usb_dcd_int.c **** *         handles all USB Interrupts
 156:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 157:USB/core/usb_dcd_int.c **** * @retval status
 158:USB/core/usb_dcd_int.c **** */
 159:USB/core/usb_dcd_int.c **** uint32_t USBD_OTG_EP1IN_ISR_Handler (USB_OTG_CORE_HANDLE *pdev)
 160:USB/core/usb_dcd_int.c **** {
 161:USB/core/usb_dcd_int.c ****   
 162:USB/core/usb_dcd_int.c ****   USB_OTG_DIEPINTn_TypeDef  diepint;
 163:USB/core/usb_dcd_int.c ****   uint32_t fifoemptymsk, msk, emp;
 164:USB/core/usb_dcd_int.c ****   
 165:USB/core/usb_dcd_int.c ****   msk = USB_OTG_READ_REG32(&pdev->regs.DREGS->DINEP1MSK);
 166:USB/core/usb_dcd_int.c ****   emp = USB_OTG_READ_REG32(&pdev->regs.DREGS->DIEPEMPMSK);
 167:USB/core/usb_dcd_int.c ****   msk |= ((emp >> 1 ) & 0x1) << 7;
 168:USB/core/usb_dcd_int.c ****   diepint.d32  = USB_OTG_READ_REG32(&pdev->regs.INEP_REGS[1]->DIEPINT) & msk;  
 169:USB/core/usb_dcd_int.c ****   
 170:USB/core/usb_dcd_int.c ****   if ( diepint.b.xfercompl )
 171:USB/core/usb_dcd_int.c ****   {
 172:USB/core/usb_dcd_int.c ****     fifoemptymsk = 0x1 << 1;
 173:USB/core/usb_dcd_int.c ****     USB_OTG_MODIFY_REG32(&pdev->regs.DREGS->DIEPEMPMSK, fifoemptymsk, 0);
 174:USB/core/usb_dcd_int.c ****     CLEAR_IN_EP_INTR(1, xfercompl);
 175:USB/core/usb_dcd_int.c ****     /* TX COMPLETE */
 176:USB/core/usb_dcd_int.c ****     USBD_DCD_INT_fops->DataInStage(pdev , 1);
 177:USB/core/usb_dcd_int.c ****   }
 178:USB/core/usb_dcd_int.c ****   if ( diepint.b.epdisabled )
 179:USB/core/usb_dcd_int.c ****   {
 180:USB/core/usb_dcd_int.c ****     CLEAR_IN_EP_INTR(1, epdisabled);
 181:USB/core/usb_dcd_int.c ****   }  
 182:USB/core/usb_dcd_int.c ****   if ( diepint.b.timeout )
 183:USB/core/usb_dcd_int.c ****   {
 184:USB/core/usb_dcd_int.c ****     CLEAR_IN_EP_INTR(1, timeout);
 185:USB/core/usb_dcd_int.c ****   }
 186:USB/core/usb_dcd_int.c ****   if (diepint.b.intktxfemp)
 187:USB/core/usb_dcd_int.c ****   {
 188:USB/core/usb_dcd_int.c ****     CLEAR_IN_EP_INTR(1, intktxfemp);
 189:USB/core/usb_dcd_int.c ****   }
 190:USB/core/usb_dcd_int.c ****   if (diepint.b.inepnakeff)
 191:USB/core/usb_dcd_int.c ****   {
 192:USB/core/usb_dcd_int.c ****     CLEAR_IN_EP_INTR(1, inepnakeff);
 193:USB/core/usb_dcd_int.c ****   }
 194:USB/core/usb_dcd_int.c ****   if (diepint.b.emptyintr)
 195:USB/core/usb_dcd_int.c ****   {
 196:USB/core/usb_dcd_int.c ****     DCD_WriteEmptyTxFifo(pdev , 1);
 197:USB/core/usb_dcd_int.c ****     CLEAR_IN_EP_INTR(1, emptyintr);
 198:USB/core/usb_dcd_int.c ****   }
 199:USB/core/usb_dcd_int.c ****   return 1;
 200:USB/core/usb_dcd_int.c **** }
 201:USB/core/usb_dcd_int.c **** #endif
 202:USB/core/usb_dcd_int.c **** 
 203:USB/core/usb_dcd_int.c **** /**
ARM GAS  /tmp/ccMPWmB0.s 			page 5


 204:USB/core/usb_dcd_int.c **** * @brief  STM32_USBF_OTG_ISR_Handler
 205:USB/core/usb_dcd_int.c **** *         handles all USB Interrupts
 206:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 207:USB/core/usb_dcd_int.c **** * @retval status
 208:USB/core/usb_dcd_int.c **** */
 209:USB/core/usb_dcd_int.c **** uint32_t USBD_OTG_ISR_Handler (USB_OTG_CORE_HANDLE *pdev)
 210:USB/core/usb_dcd_int.c **** {
 211:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintr_status;
 212:USB/core/usb_dcd_int.c ****   uint32_t retval = 0;
 213:USB/core/usb_dcd_int.c ****   
 214:USB/core/usb_dcd_int.c ****   if (USB_OTG_IsDeviceMode(pdev)) /* ensure that we are in device mode */
 215:USB/core/usb_dcd_int.c ****   {
 216:USB/core/usb_dcd_int.c ****     gintr_status.d32 = USB_OTG_ReadCoreItr(pdev);
 217:USB/core/usb_dcd_int.c ****     if (!gintr_status.d32) /* avoid spurious interrupt */
 218:USB/core/usb_dcd_int.c ****     {
 219:USB/core/usb_dcd_int.c ****       return 0;
 220:USB/core/usb_dcd_int.c ****     }
 221:USB/core/usb_dcd_int.c ****     
 222:USB/core/usb_dcd_int.c ****     if (gintr_status.b.outepintr)
 223:USB/core/usb_dcd_int.c ****     {
 224:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleOutEP_ISR(pdev);
 225:USB/core/usb_dcd_int.c ****     }    
 226:USB/core/usb_dcd_int.c ****     
 227:USB/core/usb_dcd_int.c ****     if (gintr_status.b.inepint)
 228:USB/core/usb_dcd_int.c ****     {
 229:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleInEP_ISR(pdev);
 230:USB/core/usb_dcd_int.c ****     }
 231:USB/core/usb_dcd_int.c ****     
 232:USB/core/usb_dcd_int.c ****     if (gintr_status.b.modemismatch)
 233:USB/core/usb_dcd_int.c ****     {
 234:USB/core/usb_dcd_int.c ****       USB_OTG_GINTSTS_TypeDef  gintsts;
 235:USB/core/usb_dcd_int.c ****       
 236:USB/core/usb_dcd_int.c ****       /* Clear interrupt */
 237:USB/core/usb_dcd_int.c ****       gintsts.d32 = 0;
 238:USB/core/usb_dcd_int.c ****       gintsts.b.modemismatch = 1;
 239:USB/core/usb_dcd_int.c ****       USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 240:USB/core/usb_dcd_int.c ****     }
 241:USB/core/usb_dcd_int.c ****     
 242:USB/core/usb_dcd_int.c ****     if (gintr_status.b.wkupintr)
 243:USB/core/usb_dcd_int.c ****     {
 244:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleResume_ISR(pdev);
 245:USB/core/usb_dcd_int.c ****     }
 246:USB/core/usb_dcd_int.c ****     
 247:USB/core/usb_dcd_int.c ****     if (gintr_status.b.usbsuspend)
 248:USB/core/usb_dcd_int.c ****     {
 249:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleUSBSuspend_ISR(pdev);
 250:USB/core/usb_dcd_int.c ****     }
 251:USB/core/usb_dcd_int.c ****     if (gintr_status.b.sofintr)
 252:USB/core/usb_dcd_int.c ****     {
 253:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleSof_ISR(pdev);
 254:USB/core/usb_dcd_int.c ****       
 255:USB/core/usb_dcd_int.c ****     }
 256:USB/core/usb_dcd_int.c ****     
 257:USB/core/usb_dcd_int.c ****     if (gintr_status.b.rxstsqlvl)
 258:USB/core/usb_dcd_int.c ****     {
 259:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleRxStatusQueueLevel_ISR(pdev);
 260:USB/core/usb_dcd_int.c ****       
ARM GAS  /tmp/ccMPWmB0.s 			page 6


 261:USB/core/usb_dcd_int.c ****     }
 262:USB/core/usb_dcd_int.c ****     
 263:USB/core/usb_dcd_int.c ****     if (gintr_status.b.usbreset)
 264:USB/core/usb_dcd_int.c ****     {
 265:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleUsbReset_ISR(pdev);
 266:USB/core/usb_dcd_int.c ****       
 267:USB/core/usb_dcd_int.c ****     }
 268:USB/core/usb_dcd_int.c ****     if (gintr_status.b.enumdone)
 269:USB/core/usb_dcd_int.c ****     {
 270:USB/core/usb_dcd_int.c ****       retval |= DCD_HandleEnumDone_ISR(pdev);
 271:USB/core/usb_dcd_int.c ****     }
 272:USB/core/usb_dcd_int.c ****     
 273:USB/core/usb_dcd_int.c ****     if (gintr_status.b.incomplisoin)
 274:USB/core/usb_dcd_int.c ****     {
 275:USB/core/usb_dcd_int.c ****       retval |= DCD_IsoINIncomplete_ISR(pdev);
 276:USB/core/usb_dcd_int.c ****     }
 277:USB/core/usb_dcd_int.c **** 
 278:USB/core/usb_dcd_int.c ****     if (gintr_status.b.incomplisoout)
 279:USB/core/usb_dcd_int.c ****     {
 280:USB/core/usb_dcd_int.c ****       retval |= DCD_IsoOUTIncomplete_ISR(pdev);
 281:USB/core/usb_dcd_int.c ****     }    
 282:USB/core/usb_dcd_int.c **** #ifdef VBUS_SENSING_ENABLED
 283:USB/core/usb_dcd_int.c ****     if (gintr_status.b.sessreqintr)
 284:USB/core/usb_dcd_int.c ****     {
 285:USB/core/usb_dcd_int.c ****       retval |= DCD_SessionRequest_ISR(pdev);
 286:USB/core/usb_dcd_int.c ****     }
 287:USB/core/usb_dcd_int.c **** 
 288:USB/core/usb_dcd_int.c ****     if (gintr_status.b.otgintr)
 289:USB/core/usb_dcd_int.c ****     {
 290:USB/core/usb_dcd_int.c ****       retval |= DCD_OTG_ISR(pdev);
 291:USB/core/usb_dcd_int.c ****     }   
 292:USB/core/usb_dcd_int.c **** #endif    
 293:USB/core/usb_dcd_int.c ****   }
 294:USB/core/usb_dcd_int.c ****   return retval;
 295:USB/core/usb_dcd_int.c **** }
 296:USB/core/usb_dcd_int.c **** 
 297:USB/core/usb_dcd_int.c **** #ifdef VBUS_SENSING_ENABLED
 298:USB/core/usb_dcd_int.c **** /**
 299:USB/core/usb_dcd_int.c **** * @brief  DCD_SessionRequest_ISR
 300:USB/core/usb_dcd_int.c **** *         Indicates that the USB_OTG controller has detected a connection
 301:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 302:USB/core/usb_dcd_int.c **** * @retval status
 303:USB/core/usb_dcd_int.c **** */
 304:USB/core/usb_dcd_int.c **** static uint32_t DCD_SessionRequest_ISR(USB_OTG_CORE_HANDLE *pdev)
 305:USB/core/usb_dcd_int.c **** {
 306:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintsts;  
 307:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->DevConnected (pdev);
 308:USB/core/usb_dcd_int.c **** 
 309:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 310:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 311:USB/core/usb_dcd_int.c ****   gintsts.b.sessreqintr = 1;
 312:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32 (&pdev->regs.GREGS->GINTSTS, gintsts.d32);   
 313:USB/core/usb_dcd_int.c ****   return 1;
 314:USB/core/usb_dcd_int.c **** }
 315:USB/core/usb_dcd_int.c **** 
 316:USB/core/usb_dcd_int.c **** /**
 317:USB/core/usb_dcd_int.c **** * @brief  DCD_OTG_ISR
ARM GAS  /tmp/ccMPWmB0.s 			page 7


 318:USB/core/usb_dcd_int.c **** *         Indicates that the USB_OTG controller has detected an OTG event:
 319:USB/core/usb_dcd_int.c **** *                 used to detect the end of session i.e. disconnection
 320:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 321:USB/core/usb_dcd_int.c **** * @retval status
 322:USB/core/usb_dcd_int.c **** */
 323:USB/core/usb_dcd_int.c **** static uint32_t DCD_OTG_ISR(USB_OTG_CORE_HANDLE *pdev)
 324:USB/core/usb_dcd_int.c **** {
 325:USB/core/usb_dcd_int.c **** 
 326:USB/core/usb_dcd_int.c ****   USB_OTG_GOTGINT_TypeDef  gotgint;
 327:USB/core/usb_dcd_int.c **** 
 328:USB/core/usb_dcd_int.c ****   gotgint.d32 = USB_OTG_READ_REG32(&pdev->regs.GREGS->GOTGINT);
 329:USB/core/usb_dcd_int.c ****   
 330:USB/core/usb_dcd_int.c ****   if (gotgint.b.sesenddet)
 331:USB/core/usb_dcd_int.c ****   {
 332:USB/core/usb_dcd_int.c ****     USBD_DCD_INT_fops->DevDisconnected (pdev);
 333:USB/core/usb_dcd_int.c ****   }
 334:USB/core/usb_dcd_int.c ****   /* Clear OTG interrupt */
 335:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GOTGINT, gotgint.d32); 
 336:USB/core/usb_dcd_int.c ****   return 1;
 337:USB/core/usb_dcd_int.c **** }
 338:USB/core/usb_dcd_int.c **** #endif
 339:USB/core/usb_dcd_int.c **** /**
 340:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleResume_ISR
 341:USB/core/usb_dcd_int.c **** *         Indicates that the USB_OTG controller has detected a resume or
 342:USB/core/usb_dcd_int.c **** *                 remote Wake-up sequence
 343:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 344:USB/core/usb_dcd_int.c **** * @retval status
 345:USB/core/usb_dcd_int.c **** */
 346:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleResume_ISR(USB_OTG_CORE_HANDLE *pdev)
 347:USB/core/usb_dcd_int.c **** {
  27              		.loc 1 347 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 0446     		mov	r4, r0
 348:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintsts;
 349:USB/core/usb_dcd_int.c ****   USB_OTG_DCTL_TypeDef     devctl;
 350:USB/core/usb_dcd_int.c ****   USB_OTG_PCGCCTL_TypeDef  power;
 351:USB/core/usb_dcd_int.c ****   
 352:USB/core/usb_dcd_int.c ****   if(pdev->cfg.low_power)
  38              		.loc 1 352 0
  39 0004 837A     		ldrb	r3, [r0, #10]	@ zero_extendqisi2
  40 0006 43B1     		cbz	r3, .L2
 353:USB/core/usb_dcd_int.c ****   {
 354:USB/core/usb_dcd_int.c ****     /* un-gate USB Core clock */
 355:USB/core/usb_dcd_int.c ****     power.d32 = USB_OTG_READ_REG32(&pdev->regs.PCGCCTL);
  41              		.loc 1 355 0
  42 0008 D0F80C31 		ldr	r3, [r0, #268]
 356:USB/core/usb_dcd_int.c ****     power.b.gatehclk = 0;
  43              		.loc 1 356 0
  44 000c 6FF34103 		bfc	r3, #1, #1
ARM GAS  /tmp/ccMPWmB0.s 			page 8


  45              	.LVL1:
 357:USB/core/usb_dcd_int.c ****     power.b.stoppclk = 0;
  46              		.loc 1 357 0
  47 0010 6FF30003 		bfc	r3, #0, #1
 358:USB/core/usb_dcd_int.c ****     USB_OTG_WRITE_REG32(pdev->regs.PCGCCTL, power.d32);
  48              		.loc 1 358 0
  49 0014 D0F80C21 		ldr	r2, [r0, #268]
  50 0018 1360     		str	r3, [r2]
  51              	.L2:
 359:USB/core/usb_dcd_int.c ****   }
 360:USB/core/usb_dcd_int.c ****   
 361:USB/core/usb_dcd_int.c ****   /* Clear the Remote Wake-up Signaling */
 362:USB/core/usb_dcd_int.c ****   devctl.d32 = 0;
 363:USB/core/usb_dcd_int.c ****   devctl.b.rmtwkupsig = 1;
 364:USB/core/usb_dcd_int.c ****   USB_OTG_MODIFY_REG32(&pdev->regs.DREGS->DCTL, devctl.d32, 0);
  52              		.loc 1 364 0
  53 001a 2269     		ldr	r2, [r4, #16]
  54 001c 5368     		ldr	r3, [r2, #4]
  55              	.LVL2:
  56 001e 23F00103 		bic	r3, r3, #1
  57 0022 5360     		str	r3, [r2, #4]
 365:USB/core/usb_dcd_int.c ****   
 366:USB/core/usb_dcd_int.c ****   /* Inform upper layer by the Resume Event */
 367:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->Resume (pdev);
  58              		.loc 1 367 0
  59 0024 054B     		ldr	r3, .L4
  60 0026 1B68     		ldr	r3, [r3]
  61 0028 9B69     		ldr	r3, [r3, #24]
  62 002a 2046     		mov	r0, r4
  63              	.LVL3:
  64 002c 9847     		blx	r3
  65              	.LVL4:
 368:USB/core/usb_dcd_int.c ****   
 369:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 370:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 371:USB/core/usb_dcd_int.c ****   gintsts.b.wkupintr = 1;
  66              		.loc 1 371 0
  67 002e 4FF00043 		mov	r3, #-2147483648
  68              	.LVL5:
 372:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32 (&pdev->regs.GREGS->GINTSTS, gintsts.d32);
  69              		.loc 1 372 0
  70 0032 E268     		ldr	r2, [r4, #12]
  71              	.LVL6:
  72 0034 5361     		str	r3, [r2, #20]
 373:USB/core/usb_dcd_int.c ****   return 1;
 374:USB/core/usb_dcd_int.c **** }
  73              		.loc 1 374 0
  74 0036 0120     		movs	r0, #1
  75 0038 10BD     		pop	{r4, pc}
  76              	.LVL7:
  77              	.L5:
  78 003a 00BF     		.align	2
  79              	.L4:
  80 003c 00000000 		.word	USBD_DCD_INT_fops
  81              		.cfi_endproc
  82              	.LFE125:
  84              		.section	.text.DCD_HandleUSBSuspend_ISR,"ax",%progbits
ARM GAS  /tmp/ccMPWmB0.s 			page 9


  85              		.align	1
  86              		.syntax unified
  87              		.thumb
  88              		.thumb_func
  89              		.fpu fpv4-sp-d16
  91              	DCD_HandleUSBSuspend_ISR:
  92              	.LFB126:
 375:USB/core/usb_dcd_int.c **** 
 376:USB/core/usb_dcd_int.c **** /**
 377:USB/core/usb_dcd_int.c **** * @brief  USB_OTG_HandleUSBSuspend_ISR
 378:USB/core/usb_dcd_int.c **** *         Indicates that SUSPEND state has been detected on the USB
 379:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 380:USB/core/usb_dcd_int.c **** * @retval status
 381:USB/core/usb_dcd_int.c **** */
 382:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleUSBSuspend_ISR(USB_OTG_CORE_HANDLE *pdev)
 383:USB/core/usb_dcd_int.c **** {
  93              		.loc 1 383 0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 8
  96              		@ frame_needed = 0, uses_anonymous_args = 0
  97              	.LVL8:
  98 0000 30B5     		push	{r4, r5, lr}
  99              	.LCFI1:
 100              		.cfi_def_cfa_offset 12
 101              		.cfi_offset 4, -12
 102              		.cfi_offset 5, -8
 103              		.cfi_offset 14, -4
 104 0002 83B0     		sub	sp, sp, #12
 105              	.LCFI2:
 106              		.cfi_def_cfa_offset 24
 107 0004 0546     		mov	r5, r0
 384:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintsts;
 385:USB/core/usb_dcd_int.c ****   USB_OTG_PCGCCTL_TypeDef  power;
 386:USB/core/usb_dcd_int.c ****   USB_OTG_DSTS_TypeDef     dsts;
 387:USB/core/usb_dcd_int.c ****   __IO uint8_t prev_status = 0;
 108              		.loc 1 387 0
 109 0006 0024     		movs	r4, #0
 110 0008 8DF80740 		strb	r4, [sp, #7]
 388:USB/core/usb_dcd_int.c ****   
 389:USB/core/usb_dcd_int.c ****   prev_status = pdev->dev.device_status;
 111              		.loc 1 389 0
 112 000c 90F81231 		ldrb	r3, [r0, #274]	@ zero_extendqisi2
 113 0010 8DF80730 		strb	r3, [sp, #7]
 390:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->Suspend (pdev);      
 114              		.loc 1 390 0
 115 0014 164B     		ldr	r3, .L10
 116 0016 1B68     		ldr	r3, [r3]
 117 0018 5B69     		ldr	r3, [r3, #20]
 118 001a 9847     		blx	r3
 119              	.LVL9:
 391:USB/core/usb_dcd_int.c ****   
 392:USB/core/usb_dcd_int.c ****   dsts.d32 = USB_OTG_READ_REG32(&pdev->regs.DREGS->DSTS);
 120              		.loc 1 392 0
 121 001c 2B69     		ldr	r3, [r5, #16]
 122 001e 9A68     		ldr	r2, [r3, #8]
 123              	.LVL10:
 393:USB/core/usb_dcd_int.c ****     
ARM GAS  /tmp/ccMPWmB0.s 			page 10


 394:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 395:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 396:USB/core/usb_dcd_int.c ****   gintsts.b.usbsuspend = 1;
 124              		.loc 1 396 0
 125 0020 4FF40064 		mov	r4, #2048
 126              	.LVL11:
 397:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 127              		.loc 1 397 0
 128 0024 EB68     		ldr	r3, [r5, #12]
 129              	.LVL12:
 130 0026 5C61     		str	r4, [r3, #20]
 398:USB/core/usb_dcd_int.c ****   
 399:USB/core/usb_dcd_int.c ****   if((pdev->cfg.low_power) && (dsts.b.suspsts == 1)  && 
 131              		.loc 1 399 0
 132 0028 AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
 133 002a 33B1     		cbz	r3, .L7
 134              		.loc 1 399 0 is_stmt 0 discriminator 1
 135 002c 12F0010F 		tst	r2, #1
 136 0030 03D0     		beq	.L7
 400:USB/core/usb_dcd_int.c ****     (pdev->dev.connection_status == 1) && 
 137              		.loc 1 400 0 is_stmt 1 discriminator 2
 138 0032 95F81531 		ldrb	r3, [r5, #277]	@ zero_extendqisi2
 399:USB/core/usb_dcd_int.c ****     (pdev->dev.connection_status == 1) && 
 139              		.loc 1 399 0 discriminator 2
 140 0036 012B     		cmp	r3, #1
 141 0038 02D0     		beq	.L9
 142              	.L7:
 401:USB/core/usb_dcd_int.c ****     (prev_status  == USB_OTG_CONFIGURED))
 402:USB/core/usb_dcd_int.c ****   {
 403:USB/core/usb_dcd_int.c **** 	/*  switch-off the clocks */
 404:USB/core/usb_dcd_int.c ****     power.d32 = 0;
 405:USB/core/usb_dcd_int.c ****     power.b.stoppclk = 1;
 406:USB/core/usb_dcd_int.c ****     USB_OTG_MODIFY_REG32(pdev->regs.PCGCCTL, 0, power.d32);  
 407:USB/core/usb_dcd_int.c ****     
 408:USB/core/usb_dcd_int.c ****     power.b.gatehclk = 1;
 409:USB/core/usb_dcd_int.c ****     USB_OTG_MODIFY_REG32(pdev->regs.PCGCCTL, 0, power.d32);
 410:USB/core/usb_dcd_int.c ****     
 411:USB/core/usb_dcd_int.c ****     /* Request to enter Sleep mode after exit from current ISR */
 412:USB/core/usb_dcd_int.c ****     SCB->SCR |= (SCB_SCR_SLEEPDEEP_Msk | SCB_SCR_SLEEPONEXIT_Msk);
 413:USB/core/usb_dcd_int.c ****   }
 414:USB/core/usb_dcd_int.c ****   return 1;
 415:USB/core/usb_dcd_int.c **** }
 143              		.loc 1 415 0
 144 003a 0120     		movs	r0, #1
 145 003c 03B0     		add	sp, sp, #12
 146              	.LCFI3:
 147              		.cfi_remember_state
 148              		.cfi_def_cfa_offset 12
 149              		@ sp needed
 150 003e 30BD     		pop	{r4, r5, pc}
 151              	.LVL13:
 152              	.L9:
 153              	.LCFI4:
 154              		.cfi_restore_state
 401:USB/core/usb_dcd_int.c ****     (prev_status  == USB_OTG_CONFIGURED))
 155              		.loc 1 401 0
 156 0040 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
ARM GAS  /tmp/ccMPWmB0.s 			page 11


 157 0044 DBB2     		uxtb	r3, r3
 400:USB/core/usb_dcd_int.c ****     (prev_status  == USB_OTG_CONFIGURED))
 158              		.loc 1 400 0
 159 0046 032B     		cmp	r3, #3
 160 0048 F7D1     		bne	.L7
 406:USB/core/usb_dcd_int.c ****     
 161              		.loc 1 406 0
 162 004a D5F80C21 		ldr	r2, [r5, #268]
 163              	.LVL14:
 164 004e 1368     		ldr	r3, [r2]
 165 0050 43F00103 		orr	r3, r3, #1
 166 0054 1360     		str	r3, [r2]
 409:USB/core/usb_dcd_int.c ****     
 167              		.loc 1 409 0
 168 0056 D5F80C21 		ldr	r2, [r5, #268]
 169 005a 1368     		ldr	r3, [r2]
 170 005c 43F00303 		orr	r3, r3, #3
 171 0060 1360     		str	r3, [r2]
 412:USB/core/usb_dcd_int.c ****   }
 172              		.loc 1 412 0
 173 0062 044A     		ldr	r2, .L10+4
 174 0064 1369     		ldr	r3, [r2, #16]
 175 0066 43F00603 		orr	r3, r3, #6
 176 006a 1361     		str	r3, [r2, #16]
 177 006c E5E7     		b	.L7
 178              	.L11:
 179 006e 00BF     		.align	2
 180              	.L10:
 181 0070 00000000 		.word	USBD_DCD_INT_fops
 182 0074 00ED00E0 		.word	-536810240
 183              		.cfi_endproc
 184              	.LFE126:
 186              		.section	.text.DCD_HandleSof_ISR,"ax",%progbits
 187              		.align	1
 188              		.syntax unified
 189              		.thumb
 190              		.thumb_func
 191              		.fpu fpv4-sp-d16
 193              	DCD_HandleSof_ISR:
 194              	.LFB129:
 416:USB/core/usb_dcd_int.c **** 
 417:USB/core/usb_dcd_int.c **** /**
 418:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleInEP_ISR
 419:USB/core/usb_dcd_int.c **** *         Indicates that an IN EP has a pending Interrupt
 420:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 421:USB/core/usb_dcd_int.c **** * @retval status
 422:USB/core/usb_dcd_int.c **** */
 423:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleInEP_ISR(USB_OTG_CORE_HANDLE *pdev)
 424:USB/core/usb_dcd_int.c **** {
 425:USB/core/usb_dcd_int.c ****   USB_OTG_DIEPINTn_TypeDef  diepint;
 426:USB/core/usb_dcd_int.c ****   
 427:USB/core/usb_dcd_int.c ****   uint32_t ep_intr;
 428:USB/core/usb_dcd_int.c ****   uint32_t epnum = 0;
 429:USB/core/usb_dcd_int.c ****   uint32_t fifoemptymsk;
 430:USB/core/usb_dcd_int.c ****   diepint.d32 = 0;
 431:USB/core/usb_dcd_int.c ****   ep_intr = USB_OTG_ReadDevAllInEPItr(pdev);
 432:USB/core/usb_dcd_int.c ****   
ARM GAS  /tmp/ccMPWmB0.s 			page 12


 433:USB/core/usb_dcd_int.c ****   while ( ep_intr )
 434:USB/core/usb_dcd_int.c ****   {
 435:USB/core/usb_dcd_int.c ****     if (ep_intr&0x1) /* In ITR */
 436:USB/core/usb_dcd_int.c ****     {
 437:USB/core/usb_dcd_int.c ****       diepint.d32 = DCD_ReadDevInEP(pdev , epnum); /* Get In ITR status */
 438:USB/core/usb_dcd_int.c ****       if ( diepint.b.xfercompl )
 439:USB/core/usb_dcd_int.c ****       {
 440:USB/core/usb_dcd_int.c ****         fifoemptymsk = 0x1 << epnum;
 441:USB/core/usb_dcd_int.c ****         USB_OTG_MODIFY_REG32(&pdev->regs.DREGS->DIEPEMPMSK, fifoemptymsk, 0);
 442:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, xfercompl);
 443:USB/core/usb_dcd_int.c ****         /* TX COMPLETE */
 444:USB/core/usb_dcd_int.c ****         USBD_DCD_INT_fops->DataInStage(pdev , epnum);
 445:USB/core/usb_dcd_int.c ****         
 446:USB/core/usb_dcd_int.c ****         if (pdev->cfg.dma_enable == 1)
 447:USB/core/usb_dcd_int.c ****         {
 448:USB/core/usb_dcd_int.c ****           if((epnum == 0) && (pdev->dev.device_state == USB_OTG_EP0_STATUS_IN))
 449:USB/core/usb_dcd_int.c ****           {
 450:USB/core/usb_dcd_int.c ****             /* prepare to rx more setup packets */
 451:USB/core/usb_dcd_int.c ****             USB_OTG_EP0_OutStart(pdev);
 452:USB/core/usb_dcd_int.c ****           }
 453:USB/core/usb_dcd_int.c ****         }           
 454:USB/core/usb_dcd_int.c ****       }
 455:USB/core/usb_dcd_int.c ****       if ( diepint.b.timeout )
 456:USB/core/usb_dcd_int.c ****       {
 457:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, timeout);
 458:USB/core/usb_dcd_int.c ****       }
 459:USB/core/usb_dcd_int.c ****       if (diepint.b.intktxfemp)
 460:USB/core/usb_dcd_int.c ****       {
 461:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, intktxfemp);
 462:USB/core/usb_dcd_int.c ****       }
 463:USB/core/usb_dcd_int.c ****       if (diepint.b.inepnakeff)
 464:USB/core/usb_dcd_int.c ****       {
 465:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, inepnakeff);
 466:USB/core/usb_dcd_int.c ****       }
 467:USB/core/usb_dcd_int.c ****       if ( diepint.b.epdisabled )
 468:USB/core/usb_dcd_int.c ****       {
 469:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, epdisabled);
 470:USB/core/usb_dcd_int.c ****       }       
 471:USB/core/usb_dcd_int.c ****       if (diepint.b.emptyintr)
 472:USB/core/usb_dcd_int.c ****       {
 473:USB/core/usb_dcd_int.c ****         
 474:USB/core/usb_dcd_int.c ****         DCD_WriteEmptyTxFifo(pdev , epnum);
 475:USB/core/usb_dcd_int.c ****         
 476:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, emptyintr);
 477:USB/core/usb_dcd_int.c ****       }
 478:USB/core/usb_dcd_int.c ****     }
 479:USB/core/usb_dcd_int.c ****     epnum++;
 480:USB/core/usb_dcd_int.c ****     ep_intr >>= 1;
 481:USB/core/usb_dcd_int.c ****   }
 482:USB/core/usb_dcd_int.c ****   
 483:USB/core/usb_dcd_int.c ****   return 1;
 484:USB/core/usb_dcd_int.c **** }
 485:USB/core/usb_dcd_int.c **** 
 486:USB/core/usb_dcd_int.c **** /**
 487:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleOutEP_ISR
 488:USB/core/usb_dcd_int.c **** *         Indicates that an OUT EP has a pending Interrupt
 489:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
ARM GAS  /tmp/ccMPWmB0.s 			page 13


 490:USB/core/usb_dcd_int.c **** * @retval status
 491:USB/core/usb_dcd_int.c **** */
 492:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleOutEP_ISR(USB_OTG_CORE_HANDLE *pdev)
 493:USB/core/usb_dcd_int.c **** {
 494:USB/core/usb_dcd_int.c ****   uint32_t ep_intr;
 495:USB/core/usb_dcd_int.c ****   USB_OTG_DOEPINTn_TypeDef  doepint;
 496:USB/core/usb_dcd_int.c ****   USB_OTG_DEPXFRSIZ_TypeDef  deptsiz;
 497:USB/core/usb_dcd_int.c ****   uint32_t epnum = 0;
 498:USB/core/usb_dcd_int.c ****   
 499:USB/core/usb_dcd_int.c ****   doepint.d32 = 0;
 500:USB/core/usb_dcd_int.c ****   
 501:USB/core/usb_dcd_int.c ****   /* Read in the device interrupt bits */
 502:USB/core/usb_dcd_int.c ****   ep_intr = USB_OTG_ReadDevAllOutEp_itr(pdev);
 503:USB/core/usb_dcd_int.c ****   
 504:USB/core/usb_dcd_int.c ****   while ( ep_intr )
 505:USB/core/usb_dcd_int.c ****   {
 506:USB/core/usb_dcd_int.c ****     if (ep_intr&0x1)
 507:USB/core/usb_dcd_int.c ****     {
 508:USB/core/usb_dcd_int.c ****       
 509:USB/core/usb_dcd_int.c ****       doepint.d32 = USB_OTG_ReadDevOutEP_itr(pdev, epnum);
 510:USB/core/usb_dcd_int.c ****       
 511:USB/core/usb_dcd_int.c ****       /* Transfer complete */
 512:USB/core/usb_dcd_int.c ****       if ( doepint.b.xfercompl )
 513:USB/core/usb_dcd_int.c ****       {
 514:USB/core/usb_dcd_int.c ****         /* Clear the bit in DOEPINTn for this interrupt */
 515:USB/core/usb_dcd_int.c ****         CLEAR_OUT_EP_INTR(epnum, xfercompl);
 516:USB/core/usb_dcd_int.c ****         if (pdev->cfg.dma_enable == 1)
 517:USB/core/usb_dcd_int.c ****         {
 518:USB/core/usb_dcd_int.c ****           deptsiz.d32 = USB_OTG_READ_REG32(&(pdev->regs.OUTEP_REGS[epnum]->DOEPTSIZ));
 519:USB/core/usb_dcd_int.c ****           /*ToDo : handle more than one single MPS size packet */
 520:USB/core/usb_dcd_int.c ****           pdev->dev.out_ep[epnum].xfer_count = pdev->dev.out_ep[epnum].maxpacket - \
 521:USB/core/usb_dcd_int.c ****             deptsiz.b.xfersize;
 522:USB/core/usb_dcd_int.c ****         }
 523:USB/core/usb_dcd_int.c ****         /* Inform upper layer: data ready */
 524:USB/core/usb_dcd_int.c ****         /* RX COMPLETE */
 525:USB/core/usb_dcd_int.c ****         USBD_DCD_INT_fops->DataOutStage(pdev , epnum);
 526:USB/core/usb_dcd_int.c ****         
 527:USB/core/usb_dcd_int.c ****         if (pdev->cfg.dma_enable == 1)
 528:USB/core/usb_dcd_int.c ****         {
 529:USB/core/usb_dcd_int.c ****           if((epnum == 0) && (pdev->dev.device_state == USB_OTG_EP0_STATUS_OUT))
 530:USB/core/usb_dcd_int.c ****           {
 531:USB/core/usb_dcd_int.c ****             /* prepare to rx more setup packets */
 532:USB/core/usb_dcd_int.c ****             USB_OTG_EP0_OutStart(pdev);
 533:USB/core/usb_dcd_int.c ****           }
 534:USB/core/usb_dcd_int.c ****         }        
 535:USB/core/usb_dcd_int.c ****       }
 536:USB/core/usb_dcd_int.c ****       /* Endpoint disable  */
 537:USB/core/usb_dcd_int.c ****       if ( doepint.b.epdisabled )
 538:USB/core/usb_dcd_int.c ****       {
 539:USB/core/usb_dcd_int.c ****         /* Clear the bit in DOEPINTn for this interrupt */
 540:USB/core/usb_dcd_int.c ****         CLEAR_OUT_EP_INTR(epnum, epdisabled);
 541:USB/core/usb_dcd_int.c ****       }
 542:USB/core/usb_dcd_int.c ****       /* Setup Phase Done (control EPs) */
 543:USB/core/usb_dcd_int.c ****       if ( doepint.b.setup )
 544:USB/core/usb_dcd_int.c ****       {
 545:USB/core/usb_dcd_int.c ****         
 546:USB/core/usb_dcd_int.c ****         /* inform the upper layer that a setup packet is available */
ARM GAS  /tmp/ccMPWmB0.s 			page 14


 547:USB/core/usb_dcd_int.c ****         /* SETUP COMPLETE */
 548:USB/core/usb_dcd_int.c ****         USBD_DCD_INT_fops->SetupStage(pdev);
 549:USB/core/usb_dcd_int.c ****         CLEAR_OUT_EP_INTR(epnum, setup);
 550:USB/core/usb_dcd_int.c ****       }
 551:USB/core/usb_dcd_int.c ****     }
 552:USB/core/usb_dcd_int.c ****     epnum++;
 553:USB/core/usb_dcd_int.c ****     ep_intr >>= 1;
 554:USB/core/usb_dcd_int.c ****   }
 555:USB/core/usb_dcd_int.c ****   return 1;
 556:USB/core/usb_dcd_int.c **** }
 557:USB/core/usb_dcd_int.c **** 
 558:USB/core/usb_dcd_int.c **** /**
 559:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleSof_ISR
 560:USB/core/usb_dcd_int.c **** *         Handles the SOF Interrupts
 561:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 562:USB/core/usb_dcd_int.c **** * @retval status
 563:USB/core/usb_dcd_int.c **** */
 564:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleSof_ISR(USB_OTG_CORE_HANDLE *pdev)
 565:USB/core/usb_dcd_int.c **** {
 195              		.loc 1 565 0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199              	.LVL15:
 200 0000 10B5     		push	{r4, lr}
 201              	.LCFI5:
 202              		.cfi_def_cfa_offset 8
 203              		.cfi_offset 4, -8
 204              		.cfi_offset 14, -4
 205 0002 0446     		mov	r4, r0
 566:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  GINTSTS;
 567:USB/core/usb_dcd_int.c ****   
 568:USB/core/usb_dcd_int.c ****   
 569:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->SOF(pdev);
 206              		.loc 1 569 0
 207 0004 044B     		ldr	r3, .L14
 208 0006 1B68     		ldr	r3, [r3]
 209 0008 DB68     		ldr	r3, [r3, #12]
 210 000a 9847     		blx	r3
 211              	.LVL16:
 570:USB/core/usb_dcd_int.c ****   
 571:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 572:USB/core/usb_dcd_int.c ****   GINTSTS.d32 = 0;
 573:USB/core/usb_dcd_int.c ****   GINTSTS.b.sofintr = 1;
 212              		.loc 1 573 0
 213 000c 0823     		movs	r3, #8
 214              	.LVL17:
 574:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32 (&pdev->regs.GREGS->GINTSTS, GINTSTS.d32);
 215              		.loc 1 574 0
 216 000e E268     		ldr	r2, [r4, #12]
 217              	.LVL18:
 218 0010 5361     		str	r3, [r2, #20]
 575:USB/core/usb_dcd_int.c ****   
 576:USB/core/usb_dcd_int.c ****   return 1;
 577:USB/core/usb_dcd_int.c **** }
 219              		.loc 1 577 0
 220 0012 0120     		movs	r0, #1
ARM GAS  /tmp/ccMPWmB0.s 			page 15


 221 0014 10BD     		pop	{r4, pc}
 222              	.LVL19:
 223              	.L15:
 224 0016 00BF     		.align	2
 225              	.L14:
 226 0018 00000000 		.word	USBD_DCD_INT_fops
 227              		.cfi_endproc
 228              	.LFE129:
 230              		.section	.text.DCD_IsoINIncomplete_ISR,"ax",%progbits
 231              		.align	1
 232              		.syntax unified
 233              		.thumb
 234              		.thumb_func
 235              		.fpu fpv4-sp-d16
 237              	DCD_IsoINIncomplete_ISR:
 238              	.LFB134:
 578:USB/core/usb_dcd_int.c **** 
 579:USB/core/usb_dcd_int.c **** /**
 580:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleRxStatusQueueLevel_ISR
 581:USB/core/usb_dcd_int.c **** *         Handles the Rx Status Queue Level Interrupt
 582:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 583:USB/core/usb_dcd_int.c **** * @retval status
 584:USB/core/usb_dcd_int.c **** */
 585:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleRxStatusQueueLevel_ISR(USB_OTG_CORE_HANDLE *pdev)
 586:USB/core/usb_dcd_int.c **** {
 587:USB/core/usb_dcd_int.c ****   USB_OTG_GINTMSK_TypeDef  int_mask;
 588:USB/core/usb_dcd_int.c ****   USB_OTG_DRXSTS_TypeDef   status;
 589:USB/core/usb_dcd_int.c ****   USB_OTG_EP *ep;
 590:USB/core/usb_dcd_int.c ****   
 591:USB/core/usb_dcd_int.c ****   /* Disable the Rx Status Queue Level interrupt */
 592:USB/core/usb_dcd_int.c ****   int_mask.d32 = 0;
 593:USB/core/usb_dcd_int.c ****   int_mask.b.rxstsqlvl = 1;
 594:USB/core/usb_dcd_int.c ****   USB_OTG_MODIFY_REG32( &pdev->regs.GREGS->GINTMSK, int_mask.d32, 0);
 595:USB/core/usb_dcd_int.c ****   
 596:USB/core/usb_dcd_int.c ****   /* Get the Status from the top of the FIFO */
 597:USB/core/usb_dcd_int.c ****   status.d32 = USB_OTG_READ_REG32( &pdev->regs.GREGS->GRXSTSP );
 598:USB/core/usb_dcd_int.c ****   
 599:USB/core/usb_dcd_int.c ****   ep = &pdev->dev.out_ep[status.b.epnum];
 600:USB/core/usb_dcd_int.c ****   
 601:USB/core/usb_dcd_int.c ****   switch (status.b.pktsts)
 602:USB/core/usb_dcd_int.c ****   {
 603:USB/core/usb_dcd_int.c ****   case STS_GOUT_NAK:
 604:USB/core/usb_dcd_int.c ****     break;
 605:USB/core/usb_dcd_int.c ****   case STS_DATA_UPDT:
 606:USB/core/usb_dcd_int.c ****     if (status.b.bcnt)
 607:USB/core/usb_dcd_int.c ****     {
 608:USB/core/usb_dcd_int.c ****       USB_OTG_ReadPacket(pdev,ep->xfer_buff, status.b.bcnt);
 609:USB/core/usb_dcd_int.c ****       ep->xfer_buff += status.b.bcnt;
 610:USB/core/usb_dcd_int.c ****       ep->xfer_count += status.b.bcnt;
 611:USB/core/usb_dcd_int.c ****     }
 612:USB/core/usb_dcd_int.c ****     break;
 613:USB/core/usb_dcd_int.c ****   case STS_XFER_COMP:
 614:USB/core/usb_dcd_int.c ****     break;
 615:USB/core/usb_dcd_int.c ****   case STS_SETUP_COMP:
 616:USB/core/usb_dcd_int.c ****     break;
 617:USB/core/usb_dcd_int.c ****   case STS_SETUP_UPDT:
 618:USB/core/usb_dcd_int.c ****     /* Copy the setup packet received in FIFO into the setup buffer in RAM */
ARM GAS  /tmp/ccMPWmB0.s 			page 16


 619:USB/core/usb_dcd_int.c ****     USB_OTG_ReadPacket(pdev , pdev->dev.setup_packet, 8);
 620:USB/core/usb_dcd_int.c ****     ep->xfer_count += status.b.bcnt;
 621:USB/core/usb_dcd_int.c ****     break;
 622:USB/core/usb_dcd_int.c ****   default:
 623:USB/core/usb_dcd_int.c ****     break;
 624:USB/core/usb_dcd_int.c ****   }
 625:USB/core/usb_dcd_int.c ****   
 626:USB/core/usb_dcd_int.c ****   /* Enable the Rx Status Queue Level interrupt */
 627:USB/core/usb_dcd_int.c ****   USB_OTG_MODIFY_REG32( &pdev->regs.GREGS->GINTMSK, 0, int_mask.d32);
 628:USB/core/usb_dcd_int.c ****   
 629:USB/core/usb_dcd_int.c ****   return 1;
 630:USB/core/usb_dcd_int.c **** }
 631:USB/core/usb_dcd_int.c **** 
 632:USB/core/usb_dcd_int.c **** /**
 633:USB/core/usb_dcd_int.c **** * @brief  DCD_WriteEmptyTxFifo
 634:USB/core/usb_dcd_int.c **** *         check FIFO for the next packet to be loaded
 635:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 636:USB/core/usb_dcd_int.c **** * @retval status
 637:USB/core/usb_dcd_int.c **** */
 638:USB/core/usb_dcd_int.c **** static uint32_t DCD_WriteEmptyTxFifo(USB_OTG_CORE_HANDLE *pdev, uint32_t epnum)
 639:USB/core/usb_dcd_int.c **** {
 640:USB/core/usb_dcd_int.c ****   USB_OTG_DTXFSTSn_TypeDef  txstatus;
 641:USB/core/usb_dcd_int.c ****   USB_OTG_EP *ep;
 642:USB/core/usb_dcd_int.c ****   uint32_t len = 0;
 643:USB/core/usb_dcd_int.c ****   uint32_t len32b;
 644:USB/core/usb_dcd_int.c ****   txstatus.d32 = 0;
 645:USB/core/usb_dcd_int.c ****   
 646:USB/core/usb_dcd_int.c ****   ep = &pdev->dev.in_ep[epnum];    
 647:USB/core/usb_dcd_int.c ****   
 648:USB/core/usb_dcd_int.c ****   len = ep->xfer_len - ep->xfer_count;
 649:USB/core/usb_dcd_int.c ****   
 650:USB/core/usb_dcd_int.c ****   if (len > ep->maxpacket)
 651:USB/core/usb_dcd_int.c ****   {
 652:USB/core/usb_dcd_int.c ****     len = ep->maxpacket;
 653:USB/core/usb_dcd_int.c ****   }
 654:USB/core/usb_dcd_int.c ****   
 655:USB/core/usb_dcd_int.c ****   len32b = (len + 3) / 4;
 656:USB/core/usb_dcd_int.c ****   txstatus.d32 = USB_OTG_READ_REG32( &pdev->regs.INEP_REGS[epnum]->DTXFSTS);
 657:USB/core/usb_dcd_int.c ****   
 658:USB/core/usb_dcd_int.c ****   
 659:USB/core/usb_dcd_int.c ****   
 660:USB/core/usb_dcd_int.c ****   while  (txstatus.b.txfspcavail > len32b &&
 661:USB/core/usb_dcd_int.c ****           ep->xfer_count < ep->xfer_len &&
 662:USB/core/usb_dcd_int.c ****             ep->xfer_len != 0)
 663:USB/core/usb_dcd_int.c ****   {
 664:USB/core/usb_dcd_int.c ****     /* Write the FIFO */
 665:USB/core/usb_dcd_int.c ****     len = ep->xfer_len - ep->xfer_count;
 666:USB/core/usb_dcd_int.c ****     
 667:USB/core/usb_dcd_int.c ****     if (len > ep->maxpacket)
 668:USB/core/usb_dcd_int.c ****     {
 669:USB/core/usb_dcd_int.c ****       len = ep->maxpacket;
 670:USB/core/usb_dcd_int.c ****     }
 671:USB/core/usb_dcd_int.c ****     len32b = (len + 3) / 4;
 672:USB/core/usb_dcd_int.c ****     
 673:USB/core/usb_dcd_int.c ****     USB_OTG_WritePacket (pdev , ep->xfer_buff, epnum, len);
 674:USB/core/usb_dcd_int.c ****     
 675:USB/core/usb_dcd_int.c ****     ep->xfer_buff  += len;
ARM GAS  /tmp/ccMPWmB0.s 			page 17


 676:USB/core/usb_dcd_int.c ****     ep->xfer_count += len;
 677:USB/core/usb_dcd_int.c ****     
 678:USB/core/usb_dcd_int.c ****     txstatus.d32 = USB_OTG_READ_REG32(&pdev->regs.INEP_REGS[epnum]->DTXFSTS);
 679:USB/core/usb_dcd_int.c ****   }
 680:USB/core/usb_dcd_int.c ****   
 681:USB/core/usb_dcd_int.c ****   return 1;
 682:USB/core/usb_dcd_int.c **** }
 683:USB/core/usb_dcd_int.c **** 
 684:USB/core/usb_dcd_int.c **** /**
 685:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleUsbReset_ISR
 686:USB/core/usb_dcd_int.c **** *         This interrupt occurs when a USB Reset is detected
 687:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 688:USB/core/usb_dcd_int.c **** * @retval status
 689:USB/core/usb_dcd_int.c **** */
 690:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleUsbReset_ISR(USB_OTG_CORE_HANDLE *pdev)
 691:USB/core/usb_dcd_int.c **** {
 692:USB/core/usb_dcd_int.c ****   USB_OTG_DAINT_TypeDef    daintmsk;
 693:USB/core/usb_dcd_int.c ****   USB_OTG_DOEPMSK_TypeDef  doepmsk;
 694:USB/core/usb_dcd_int.c ****   USB_OTG_DIEPMSK_TypeDef  diepmsk;
 695:USB/core/usb_dcd_int.c ****   USB_OTG_DCFG_TypeDef     dcfg;
 696:USB/core/usb_dcd_int.c ****   USB_OTG_DCTL_TypeDef     dctl;
 697:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintsts;
 698:USB/core/usb_dcd_int.c ****   uint32_t i;
 699:USB/core/usb_dcd_int.c ****   
 700:USB/core/usb_dcd_int.c ****   dctl.d32 = 0;
 701:USB/core/usb_dcd_int.c ****   daintmsk.d32 = 0;
 702:USB/core/usb_dcd_int.c ****   doepmsk.d32 = 0;
 703:USB/core/usb_dcd_int.c ****   diepmsk.d32 = 0;
 704:USB/core/usb_dcd_int.c ****   dcfg.d32 = 0;
 705:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 706:USB/core/usb_dcd_int.c ****   
 707:USB/core/usb_dcd_int.c ****   /* Clear the Remote Wake-up Signaling */
 708:USB/core/usb_dcd_int.c ****   dctl.b.rmtwkupsig = 1;
 709:USB/core/usb_dcd_int.c ****   USB_OTG_MODIFY_REG32(&pdev->regs.DREGS->DCTL, dctl.d32, 0 );
 710:USB/core/usb_dcd_int.c ****   
 711:USB/core/usb_dcd_int.c ****   /* Flush the Tx FIFO */
 712:USB/core/usb_dcd_int.c ****   USB_OTG_FlushTxFifo(pdev ,  0 );
 713:USB/core/usb_dcd_int.c ****   
 714:USB/core/usb_dcd_int.c ****   for (i = 0; i < pdev->cfg.dev_endpoints ; i++)
 715:USB/core/usb_dcd_int.c ****   {
 716:USB/core/usb_dcd_int.c ****     USB_OTG_WRITE_REG32( &pdev->regs.INEP_REGS[i]->DIEPINT, 0xFF);
 717:USB/core/usb_dcd_int.c ****     USB_OTG_WRITE_REG32( &pdev->regs.OUTEP_REGS[i]->DOEPINT, 0xFF);
 718:USB/core/usb_dcd_int.c ****   }
 719:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DAINT, 0xFFFFFFFF );
 720:USB/core/usb_dcd_int.c ****   
 721:USB/core/usb_dcd_int.c ****   daintmsk.ep.in = 1;
 722:USB/core/usb_dcd_int.c ****   daintmsk.ep.out = 1;
 723:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DAINTMSK, daintmsk.d32 );
 724:USB/core/usb_dcd_int.c ****   
 725:USB/core/usb_dcd_int.c ****   doepmsk.b.setup = 1;
 726:USB/core/usb_dcd_int.c ****   doepmsk.b.xfercompl = 1;
 727:USB/core/usb_dcd_int.c ****   doepmsk.b.epdisabled = 1;
 728:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DOEPMSK, doepmsk.d32 );
 729:USB/core/usb_dcd_int.c **** #ifdef USB_OTG_HS_DEDICATED_EP1_ENABLED   
 730:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DOUTEP1MSK, doepmsk.d32 );
 731:USB/core/usb_dcd_int.c **** #endif
 732:USB/core/usb_dcd_int.c ****   diepmsk.b.xfercompl = 1;
ARM GAS  /tmp/ccMPWmB0.s 			page 18


 733:USB/core/usb_dcd_int.c ****   diepmsk.b.timeout = 1;
 734:USB/core/usb_dcd_int.c ****   diepmsk.b.epdisabled = 1;
 735:USB/core/usb_dcd_int.c **** 
 736:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DIEPMSK, diepmsk.d32 );
 737:USB/core/usb_dcd_int.c **** #ifdef USB_OTG_HS_DEDICATED_EP1_ENABLED  
 738:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DINEP1MSK, diepmsk.d32 );
 739:USB/core/usb_dcd_int.c **** #endif
 740:USB/core/usb_dcd_int.c ****   /* Reset Device Address */
 741:USB/core/usb_dcd_int.c ****   dcfg.d32 = USB_OTG_READ_REG32( &pdev->regs.DREGS->DCFG);
 742:USB/core/usb_dcd_int.c ****   dcfg.b.devaddr = 0;
 743:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DCFG, dcfg.d32);
 744:USB/core/usb_dcd_int.c ****   
 745:USB/core/usb_dcd_int.c ****   
 746:USB/core/usb_dcd_int.c ****   /* setup EP0 to receive SETUP packets */
 747:USB/core/usb_dcd_int.c ****   USB_OTG_EP0_OutStart(pdev);
 748:USB/core/usb_dcd_int.c ****   
 749:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 750:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 751:USB/core/usb_dcd_int.c ****   gintsts.b.usbreset = 1;
 752:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32 (&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 753:USB/core/usb_dcd_int.c ****   
 754:USB/core/usb_dcd_int.c ****   /*Reset internal state machine */
 755:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->Reset(pdev);
 756:USB/core/usb_dcd_int.c ****   return 1;
 757:USB/core/usb_dcd_int.c **** }
 758:USB/core/usb_dcd_int.c **** 
 759:USB/core/usb_dcd_int.c **** /**
 760:USB/core/usb_dcd_int.c **** * @brief  DCD_HandleEnumDone_ISR
 761:USB/core/usb_dcd_int.c **** *         Read the device status register and set the device speed
 762:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 763:USB/core/usb_dcd_int.c **** * @retval status
 764:USB/core/usb_dcd_int.c **** */
 765:USB/core/usb_dcd_int.c **** static uint32_t DCD_HandleEnumDone_ISR(USB_OTG_CORE_HANDLE *pdev)
 766:USB/core/usb_dcd_int.c **** {
 767:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintsts;
 768:USB/core/usb_dcd_int.c ****   USB_OTG_GUSBCFG_TypeDef  gusbcfg;
 769:USB/core/usb_dcd_int.c ****   
 770:USB/core/usb_dcd_int.c ****   USB_OTG_EP0Activate(pdev);
 771:USB/core/usb_dcd_int.c ****   
 772:USB/core/usb_dcd_int.c ****   /* Set USB turn-around time based on device speed and PHY interface. */
 773:USB/core/usb_dcd_int.c ****   gusbcfg.d32 = USB_OTG_READ_REG32(&pdev->regs.GREGS->GUSBCFG);
 774:USB/core/usb_dcd_int.c ****   
 775:USB/core/usb_dcd_int.c ****   /* Full or High speed */
 776:USB/core/usb_dcd_int.c ****   if ( USB_OTG_GetDeviceSpeed(pdev) == USB_SPEED_HIGH)
 777:USB/core/usb_dcd_int.c ****   {
 778:USB/core/usb_dcd_int.c ****     pdev->cfg.speed            = USB_OTG_SPEED_HIGH;
 779:USB/core/usb_dcd_int.c ****     pdev->cfg.mps              = USB_OTG_HS_MAX_PACKET_SIZE ;    
 780:USB/core/usb_dcd_int.c ****     gusbcfg.b.usbtrdtim = 9;
 781:USB/core/usb_dcd_int.c ****   }
 782:USB/core/usb_dcd_int.c ****   else
 783:USB/core/usb_dcd_int.c ****   {
 784:USB/core/usb_dcd_int.c ****     pdev->cfg.speed            = USB_OTG_SPEED_FULL;
 785:USB/core/usb_dcd_int.c ****     pdev->cfg.mps              = USB_OTG_FS_MAX_PACKET_SIZE ;  
 786:USB/core/usb_dcd_int.c ****     gusbcfg.b.usbtrdtim = 5;
 787:USB/core/usb_dcd_int.c ****   }
 788:USB/core/usb_dcd_int.c ****   
 789:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GUSBCFG, gusbcfg.d32);
ARM GAS  /tmp/ccMPWmB0.s 			page 19


 790:USB/core/usb_dcd_int.c ****   
 791:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 792:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 793:USB/core/usb_dcd_int.c ****   gintsts.b.enumdone = 1;
 794:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.GREGS->GINTSTS, gintsts.d32 );
 795:USB/core/usb_dcd_int.c ****   return 1;
 796:USB/core/usb_dcd_int.c **** }
 797:USB/core/usb_dcd_int.c **** 
 798:USB/core/usb_dcd_int.c **** 
 799:USB/core/usb_dcd_int.c **** /**
 800:USB/core/usb_dcd_int.c **** * @brief  DCD_IsoINIncomplete_ISR
 801:USB/core/usb_dcd_int.c **** *         handle the ISO IN incomplete interrupt
 802:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 803:USB/core/usb_dcd_int.c **** * @retval status
 804:USB/core/usb_dcd_int.c **** */
 805:USB/core/usb_dcd_int.c **** static uint32_t DCD_IsoINIncomplete_ISR(USB_OTG_CORE_HANDLE *pdev)
 806:USB/core/usb_dcd_int.c **** {
 239              		.loc 1 806 0
 240              		.cfi_startproc
 241              		@ args = 0, pretend = 0, frame = 0
 242              		@ frame_needed = 0, uses_anonymous_args = 0
 243              	.LVL20:
 244 0000 10B5     		push	{r4, lr}
 245              	.LCFI6:
 246              		.cfi_def_cfa_offset 8
 247              		.cfi_offset 4, -8
 248              		.cfi_offset 14, -4
 249 0002 0446     		mov	r4, r0
 807:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef gintsts;  
 808:USB/core/usb_dcd_int.c ****   
 809:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 810:USB/core/usb_dcd_int.c **** 
 811:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->IsoINIncomplete (pdev); 
 250              		.loc 1 811 0
 251 0004 044B     		ldr	r3, .L18
 252 0006 1B68     		ldr	r3, [r3]
 253 0008 DB69     		ldr	r3, [r3, #28]
 254 000a 9847     		blx	r3
 255              	.LVL21:
 812:USB/core/usb_dcd_int.c ****   
 813:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 814:USB/core/usb_dcd_int.c ****   gintsts.b.incomplisoin = 1;
 256              		.loc 1 814 0
 257 000c 4FF48013 		mov	r3, #1048576
 258              	.LVL22:
 815:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 259              		.loc 1 815 0
 260 0010 E268     		ldr	r2, [r4, #12]
 261              	.LVL23:
 262 0012 5361     		str	r3, [r2, #20]
 816:USB/core/usb_dcd_int.c ****   
 817:USB/core/usb_dcd_int.c ****   return 1;
 818:USB/core/usb_dcd_int.c **** }
 263              		.loc 1 818 0
 264 0014 0120     		movs	r0, #1
 265 0016 10BD     		pop	{r4, pc}
 266              	.LVL24:
ARM GAS  /tmp/ccMPWmB0.s 			page 20


 267              	.L19:
 268              		.align	2
 269              	.L18:
 270 0018 00000000 		.word	USBD_DCD_INT_fops
 271              		.cfi_endproc
 272              	.LFE134:
 274              		.section	.text.DCD_IsoOUTIncomplete_ISR,"ax",%progbits
 275              		.align	1
 276              		.syntax unified
 277              		.thumb
 278              		.thumb_func
 279              		.fpu fpv4-sp-d16
 281              	DCD_IsoOUTIncomplete_ISR:
 282              	.LFB135:
 819:USB/core/usb_dcd_int.c **** 
 820:USB/core/usb_dcd_int.c **** /**
 821:USB/core/usb_dcd_int.c **** * @brief  DCD_IsoOUTIncomplete_ISR
 822:USB/core/usb_dcd_int.c **** *         handle the ISO OUT incomplete interrupt
 823:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 824:USB/core/usb_dcd_int.c **** * @retval status
 825:USB/core/usb_dcd_int.c **** */
 826:USB/core/usb_dcd_int.c **** static uint32_t DCD_IsoOUTIncomplete_ISR(USB_OTG_CORE_HANDLE *pdev)
 827:USB/core/usb_dcd_int.c **** {
 283              		.loc 1 827 0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 0
 286              		@ frame_needed = 0, uses_anonymous_args = 0
 287              	.LVL25:
 288 0000 10B5     		push	{r4, lr}
 289              	.LCFI7:
 290              		.cfi_def_cfa_offset 8
 291              		.cfi_offset 4, -8
 292              		.cfi_offset 14, -4
 293 0002 0446     		mov	r4, r0
 828:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef gintsts;  
 829:USB/core/usb_dcd_int.c ****   
 830:USB/core/usb_dcd_int.c ****   gintsts.d32 = 0;
 831:USB/core/usb_dcd_int.c **** 
 832:USB/core/usb_dcd_int.c ****   USBD_DCD_INT_fops->IsoOUTIncomplete (pdev); 
 294              		.loc 1 832 0
 295 0004 044B     		ldr	r3, .L22
 296 0006 1B68     		ldr	r3, [r3]
 297 0008 1B6A     		ldr	r3, [r3, #32]
 298 000a 9847     		blx	r3
 299              	.LVL26:
 833:USB/core/usb_dcd_int.c ****   
 834:USB/core/usb_dcd_int.c ****   /* Clear interrupt */
 835:USB/core/usb_dcd_int.c ****   gintsts.b.incomplisoout = 1;
 300              		.loc 1 835 0
 301 000c 4FF40013 		mov	r3, #2097152
 302              	.LVL27:
 836:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 303              		.loc 1 836 0
 304 0010 E268     		ldr	r2, [r4, #12]
 305              	.LVL28:
 306 0012 5361     		str	r3, [r2, #20]
 837:USB/core/usb_dcd_int.c ****   return 1;
ARM GAS  /tmp/ccMPWmB0.s 			page 21


 838:USB/core/usb_dcd_int.c **** }
 307              		.loc 1 838 0
 308 0014 0120     		movs	r0, #1
 309 0016 10BD     		pop	{r4, pc}
 310              	.LVL29:
 311              	.L23:
 312              		.align	2
 313              	.L22:
 314 0018 00000000 		.word	USBD_DCD_INT_fops
 315              		.cfi_endproc
 316              	.LFE135:
 318              		.section	.text.DCD_ReadDevInEP,"ax",%progbits
 319              		.align	1
 320              		.syntax unified
 321              		.thumb
 322              		.thumb_func
 323              		.fpu fpv4-sp-d16
 325              	DCD_ReadDevInEP:
 326              	.LFB136:
 839:USB/core/usb_dcd_int.c **** /**
 840:USB/core/usb_dcd_int.c **** * @brief  DCD_ReadDevInEP
 841:USB/core/usb_dcd_int.c **** *         Reads ep flags
 842:USB/core/usb_dcd_int.c **** * @param  pdev: device instance
 843:USB/core/usb_dcd_int.c **** * @retval status
 844:USB/core/usb_dcd_int.c **** */
 845:USB/core/usb_dcd_int.c **** static uint32_t DCD_ReadDevInEP (USB_OTG_CORE_HANDLE *pdev, uint8_t epnum)
 846:USB/core/usb_dcd_int.c **** {
 327              		.loc 1 846 0
 328              		.cfi_startproc
 329              		@ args = 0, pretend = 0, frame = 0
 330              		@ frame_needed = 0, uses_anonymous_args = 0
 331              		@ link register save eliminated.
 332              	.LVL30:
 847:USB/core/usb_dcd_int.c ****   uint32_t v, msk, emp;
 848:USB/core/usb_dcd_int.c ****   msk = USB_OTG_READ_REG32(&pdev->regs.DREGS->DIEPMSK);
 333              		.loc 1 848 0
 334 0000 0369     		ldr	r3, [r0, #16]
 335 0002 1A69     		ldr	r2, [r3, #16]
 336              	.LVL31:
 849:USB/core/usb_dcd_int.c ****   emp = USB_OTG_READ_REG32(&pdev->regs.DREGS->DIEPEMPMSK);
 337              		.loc 1 849 0
 338 0004 5B6B     		ldr	r3, [r3, #52]
 339              	.LVL32:
 850:USB/core/usb_dcd_int.c ****   msk |= ((emp >> epnum) & 0x1) << 7;
 340              		.loc 1 850 0
 341 0006 CB40     		lsrs	r3, r3, r1
 342              	.LVL33:
 343 0008 DB01     		lsls	r3, r3, #7
 344 000a DBB2     		uxtb	r3, r3
 345 000c 1343     		orrs	r3, r3, r2
 346              	.LVL34:
 851:USB/core/usb_dcd_int.c ****   v = USB_OTG_READ_REG32(&pdev->regs.INEP_REGS[epnum]->DIEPINT) & msk;
 347              		.loc 1 851 0
 348 000e 0431     		adds	r1, r1, #4
 349              	.LVL35:
 350 0010 00EB8100 		add	r0, r0, r1, lsl #2
 351              	.LVL36:
ARM GAS  /tmp/ccMPWmB0.s 			page 22


 352 0014 8268     		ldr	r2, [r0, #8]
 353 0016 9068     		ldr	r0, [r2, #8]
 354              	.LVL37:
 852:USB/core/usb_dcd_int.c ****   return v;
 853:USB/core/usb_dcd_int.c **** }
 355              		.loc 1 853 0
 356 0018 1840     		ands	r0, r0, r3
 357              	.LVL38:
 358 001a 7047     		bx	lr
 359              		.cfi_endproc
 360              	.LFE136:
 362              		.section	.text.DCD_HandleOutEP_ISR,"ax",%progbits
 363              		.align	1
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 367              		.fpu fpv4-sp-d16
 369              	DCD_HandleOutEP_ISR:
 370              	.LFB128:
 493:USB/core/usb_dcd_int.c ****   uint32_t ep_intr;
 371              		.loc 1 493 0
 372              		.cfi_startproc
 373              		@ args = 0, pretend = 0, frame = 0
 374              		@ frame_needed = 0, uses_anonymous_args = 0
 375              	.LVL39:
 376 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 377              	.LCFI8:
 378              		.cfi_def_cfa_offset 24
 379              		.cfi_offset 4, -24
 380              		.cfi_offset 5, -20
 381              		.cfi_offset 6, -16
 382              		.cfi_offset 7, -12
 383              		.cfi_offset 8, -8
 384              		.cfi_offset 14, -4
 385 0004 0746     		mov	r7, r0
 386              	.LVL40:
 502:USB/core/usb_dcd_int.c ****   
 387              		.loc 1 502 0
 388 0006 FFF7FEFF 		bl	USB_OTG_ReadDevAllOutEp_itr
 389              	.LVL41:
 390 000a 0446     		mov	r4, r0
 391              	.LVL42:
 497:USB/core/usb_dcd_int.c ****   
 392              		.loc 1 497 0
 393 000c 0025     		movs	r5, #0
 504:USB/core/usb_dcd_int.c ****   {
 394              		.loc 1 504 0
 395 000e 20E0     		b	.L26
 396              	.LVL43:
 397              	.L35:
 518:USB/core/usb_dcd_int.c ****           /*ToDo : handle more than one single MPS size packet */
 398              		.loc 1 518 0
 399 0010 05F11403 		add	r3, r5, #20
 400 0014 07EB8303 		add	r3, r7, r3, lsl #2
 401 0018 5B68     		ldr	r3, [r3, #4]
 402 001a 1969     		ldr	r1, [r3, #16]
 520:USB/core/usb_dcd_int.c ****             deptsiz.b.xfersize;
ARM GAS  /tmp/ccMPWmB0.s 			page 23


 403              		.loc 1 520 0
 404 001c AA00     		lsls	r2, r5, #2
 405 001e 2A44     		add	r2, r2, r5
 406 0020 D300     		lsls	r3, r2, #3
 407 0022 3B44     		add	r3, r3, r7
 408 0024 D3F87C23 		ldr	r2, [r3, #892]
 521:USB/core/usb_dcd_int.c ****         }
 409              		.loc 1 521 0
 410 0028 C1F31201 		ubfx	r1, r1, #0, #19
 520:USB/core/usb_dcd_int.c ****             deptsiz.b.xfersize;
 411              		.loc 1 520 0
 412 002c 521A     		subs	r2, r2, r1
 413 002e C3F88C23 		str	r2, [r3, #908]
 414 0032 27E0     		b	.L29
 415              	.LVL44:
 416              	.L28:
 537:USB/core/usb_dcd_int.c ****       {
 417              		.loc 1 537 0
 418 0034 16F0020F 		tst	r6, #2
 419 0038 06D0     		beq	.L30
 540:USB/core/usb_dcd_int.c ****       }
 420              		.loc 1 540 0
 421 003a 0226     		movs	r6, #2
 422              	.LVL45:
 423 003c 05F11403 		add	r3, r5, #20
 424 0040 07EB8303 		add	r3, r7, r3, lsl #2
 425 0044 5B68     		ldr	r3, [r3, #4]
 426              	.LVL46:
 427 0046 9E60     		str	r6, [r3, #8]
 428              	.L30:
 543:USB/core/usb_dcd_int.c ****       {
 429              		.loc 1 543 0
 430 0048 16F0080F 		tst	r6, #8
 431 004c 2DD1     		bne	.L33
 432              	.L27:
 552:USB/core/usb_dcd_int.c ****     ep_intr >>= 1;
 433              		.loc 1 552 0
 434 004e 0135     		adds	r5, r5, #1
 435              	.LVL47:
 553:USB/core/usb_dcd_int.c ****   }
 436              		.loc 1 553 0
 437 0050 6408     		lsrs	r4, r4, #1
 438              	.LVL48:
 439              	.L26:
 504:USB/core/usb_dcd_int.c ****   {
 440              		.loc 1 504 0
 441 0052 002C     		cmp	r4, #0
 442 0054 36D0     		beq	.L34
 506:USB/core/usb_dcd_int.c ****     {
 443              		.loc 1 506 0
 444 0056 14F0010F 		tst	r4, #1
 445 005a F8D0     		beq	.L27
 509:USB/core/usb_dcd_int.c ****       
 446              		.loc 1 509 0
 447 005c 5FFA85F8 		uxtb	r8, r5
 448 0060 4146     		mov	r1, r8
 449 0062 3846     		mov	r0, r7
ARM GAS  /tmp/ccMPWmB0.s 			page 24


 450 0064 FFF7FEFF 		bl	USB_OTG_ReadDevOutEP_itr
 451              	.LVL49:
 452 0068 0646     		mov	r6, r0
 453              	.LVL50:
 512:USB/core/usb_dcd_int.c ****       {
 454              		.loc 1 512 0
 455 006a 10F0010F 		tst	r0, #1
 456 006e E1D0     		beq	.L28
 515:USB/core/usb_dcd_int.c ****         if (pdev->cfg.dma_enable == 1)
 457              		.loc 1 515 0
 458 0070 0126     		movs	r6, #1
 459              	.LVL51:
 460 0072 05F11403 		add	r3, r5, #20
 461 0076 07EB8303 		add	r3, r7, r3, lsl #2
 462 007a 5B68     		ldr	r3, [r3, #4]
 463              	.LVL52:
 464 007c 9E60     		str	r6, [r3, #8]
 516:USB/core/usb_dcd_int.c ****         {
 465              		.loc 1 516 0
 466 007e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 467 0080 B342     		cmp	r3, r6
 468              	.LVL53:
 469 0082 C5D0     		beq	.L35
 470              	.L29:
 525:USB/core/usb_dcd_int.c ****         
 471              		.loc 1 525 0
 472 0084 114B     		ldr	r3, .L36
 473 0086 1B68     		ldr	r3, [r3]
 474 0088 1B68     		ldr	r3, [r3]
 475 008a 4146     		mov	r1, r8
 476 008c 3846     		mov	r0, r7
 477 008e 9847     		blx	r3
 478              	.LVL54:
 527:USB/core/usb_dcd_int.c ****         {
 479              		.loc 1 527 0
 480 0090 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 481 0092 012B     		cmp	r3, #1
 482 0094 CED1     		bne	.L28
 529:USB/core/usb_dcd_int.c ****           {
 483              		.loc 1 529 0
 484 0096 002D     		cmp	r5, #0
 485 0098 CCD1     		bne	.L28
 529:USB/core/usb_dcd_int.c ****           {
 486              		.loc 1 529 0 is_stmt 0 discriminator 1
 487 009a 97F81131 		ldrb	r3, [r7, #273]	@ zero_extendqisi2
 488 009e 052B     		cmp	r3, #5
 489 00a0 C8D1     		bne	.L28
 532:USB/core/usb_dcd_int.c ****           }
 490              		.loc 1 532 0 is_stmt 1
 491 00a2 3846     		mov	r0, r7
 492 00a4 FFF7FEFF 		bl	USB_OTG_EP0_OutStart
 493              	.LVL55:
 494 00a8 C4E7     		b	.L28
 495              	.LVL56:
 496              	.L33:
 548:USB/core/usb_dcd_int.c ****         CLEAR_OUT_EP_INTR(epnum, setup);
 497              		.loc 1 548 0
ARM GAS  /tmp/ccMPWmB0.s 			page 25


 498 00aa 084B     		ldr	r3, .L36
 499 00ac 1B68     		ldr	r3, [r3]
 500 00ae 9B68     		ldr	r3, [r3, #8]
 501 00b0 3846     		mov	r0, r7
 502 00b2 9847     		blx	r3
 503              	.LVL57:
 549:USB/core/usb_dcd_int.c ****       }
 504              		.loc 1 549 0
 505 00b4 0826     		movs	r6, #8
 506              	.LVL58:
 507 00b6 05F11403 		add	r3, r5, #20
 508 00ba 07EB8303 		add	r3, r7, r3, lsl #2
 509 00be 5B68     		ldr	r3, [r3, #4]
 510              	.LVL59:
 511 00c0 9E60     		str	r6, [r3, #8]
 512 00c2 C4E7     		b	.L27
 513              	.L34:
 556:USB/core/usb_dcd_int.c **** 
 514              		.loc 1 556 0
 515 00c4 0120     		movs	r0, #1
 516 00c6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 517              	.LVL60:
 518              	.L37:
 519 00ca 00BF     		.align	2
 520              	.L36:
 521 00cc 00000000 		.word	USBD_DCD_INT_fops
 522              		.cfi_endproc
 523              	.LFE128:
 525              		.section	.text.DCD_WriteEmptyTxFifo,"ax",%progbits
 526              		.align	1
 527              		.syntax unified
 528              		.thumb
 529              		.thumb_func
 530              		.fpu fpv4-sp-d16
 532              	DCD_WriteEmptyTxFifo:
 533              	.LFB131:
 639:USB/core/usb_dcd_int.c ****   USB_OTG_DTXFSTSn_TypeDef  txstatus;
 534              		.loc 1 639 0
 535              		.cfi_startproc
 536              		@ args = 0, pretend = 0, frame = 0
 537              		@ frame_needed = 0, uses_anonymous_args = 0
 538              	.LVL61:
 539 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 540              	.LCFI9:
 541              		.cfi_def_cfa_offset 24
 542              		.cfi_offset 4, -24
 543              		.cfi_offset 5, -20
 544              		.cfi_offset 6, -16
 545              		.cfi_offset 7, -12
 546              		.cfi_offset 8, -8
 547              		.cfi_offset 14, -4
 548 0004 0746     		mov	r7, r0
 549 0006 0D46     		mov	r5, r1
 550              	.LVL62:
 648:USB/core/usb_dcd_int.c ****   
 551              		.loc 1 648 0
 552 0008 8A00     		lsls	r2, r1, #2
ARM GAS  /tmp/ccMPWmB0.s 			page 26


 553 000a 0A44     		add	r2, r2, r1
 554 000c D300     		lsls	r3, r2, #3
 555 000e 0344     		add	r3, r3, r0
 556 0010 D3F83021 		ldr	r2, [r3, #304]
 557 0014 D3F83411 		ldr	r1, [r3, #308]
 558              	.LVL63:
 559 0018 521A     		subs	r2, r2, r1
 560              	.LVL64:
 650:USB/core/usb_dcd_int.c ****   {
 561              		.loc 1 650 0
 562 001a D3F82431 		ldr	r3, [r3, #292]
 563 001e 9A42     		cmp	r2, r3
 564 0020 00D8     		bhi	.L39
 648:USB/core/usb_dcd_int.c ****   
 565              		.loc 1 648 0
 566 0022 1346     		mov	r3, r2
 567              	.L39:
 568              	.LVL65:
 655:USB/core/usb_dcd_int.c ****   txstatus.d32 = USB_OTG_READ_REG32( &pdev->regs.INEP_REGS[epnum]->DTXFSTS);
 569              		.loc 1 655 0
 570 0024 03F10308 		add	r8, r3, #3
 571 0028 4FEA9808 		lsr	r8, r8, #2
 572              	.LVL66:
 656:USB/core/usb_dcd_int.c ****   
 573              		.loc 1 656 0
 574 002c 2B1D     		adds	r3, r5, #4
 575              	.LVL67:
 576 002e 07EB8303 		add	r3, r7, r3, lsl #2
 577 0032 9B68     		ldr	r3, [r3, #8]
 578 0034 9B69     		ldr	r3, [r3, #24]
 579              	.LVL68:
 660:USB/core/usb_dcd_int.c ****           ep->xfer_count < ep->xfer_len &&
 580              		.loc 1 660 0
 581 0036 1DE0     		b	.L40
 582              	.LVL69:
 583              	.L41:
 671:USB/core/usb_dcd_int.c ****     
 584              		.loc 1 671 0
 585 0038 06F10308 		add	r8, r6, #3
 586              	.LVL70:
 587 003c 4FEA9808 		lsr	r8, r8, #2
 588              	.LVL71:
 673:USB/core/usb_dcd_int.c ****     
 589              		.loc 1 673 0
 590 0040 AB00     		lsls	r3, r5, #2
 591 0042 2B44     		add	r3, r3, r5
 592 0044 DC00     		lsls	r4, r3, #3
 593 0046 3C44     		add	r4, r4, r7
 594 0048 B3B2     		uxth	r3, r6
 595 004a EAB2     		uxtb	r2, r5
 596 004c D4F82811 		ldr	r1, [r4, #296]
 597 0050 3846     		mov	r0, r7
 598 0052 FFF7FEFF 		bl	USB_OTG_WritePacket
 599              	.LVL72:
 675:USB/core/usb_dcd_int.c ****     ep->xfer_count += len;
 600              		.loc 1 675 0
 601 0056 D4F82831 		ldr	r3, [r4, #296]
ARM GAS  /tmp/ccMPWmB0.s 			page 27


 602 005a 3344     		add	r3, r3, r6
 603 005c C4F82831 		str	r3, [r4, #296]
 676:USB/core/usb_dcd_int.c ****     
 604              		.loc 1 676 0
 605 0060 D4F83431 		ldr	r3, [r4, #308]
 606 0064 1E44     		add	r6, r6, r3
 607              	.LVL73:
 608 0066 C4F83461 		str	r6, [r4, #308]
 678:USB/core/usb_dcd_int.c ****   }
 609              		.loc 1 678 0
 610 006a 2B1D     		adds	r3, r5, #4
 611 006c 07EB8303 		add	r3, r7, r3, lsl #2
 612 0070 9B68     		ldr	r3, [r3, #8]
 613 0072 9B69     		ldr	r3, [r3, #24]
 614              	.LVL74:
 615              	.L40:
 660:USB/core/usb_dcd_int.c ****           ep->xfer_count < ep->xfer_len &&
 616              		.loc 1 660 0
 617 0074 9BB2     		uxth	r3, r3
 618              	.LVL75:
 619 0076 9845     		cmp	r8, r3
 620 0078 15D2     		bcs	.L42
 661:USB/core/usb_dcd_int.c ****             ep->xfer_len != 0)
 621              		.loc 1 661 0 discriminator 1
 622 007a AB00     		lsls	r3, r5, #2
 623 007c 2B44     		add	r3, r3, r5
 624 007e DA00     		lsls	r2, r3, #3
 625 0080 3A44     		add	r2, r2, r7
 626 0082 D2F83411 		ldr	r1, [r2, #308]
 627 0086 D2F83031 		ldr	r3, [r2, #304]
 660:USB/core/usb_dcd_int.c ****           ep->xfer_count < ep->xfer_len &&
 628              		.loc 1 660 0 discriminator 1
 629 008a 9942     		cmp	r1, r3
 630 008c 0BD2     		bcs	.L42
 661:USB/core/usb_dcd_int.c ****             ep->xfer_len != 0)
 631              		.loc 1 661 0
 632 008e 53B1     		cbz	r3, .L42
 665:USB/core/usb_dcd_int.c ****     
 633              		.loc 1 665 0
 634 0090 5B1A     		subs	r3, r3, r1
 635              	.LVL76:
 667:USB/core/usb_dcd_int.c ****     {
 636              		.loc 1 667 0
 637 0092 05EB8501 		add	r1, r5, r5, lsl #2
 638 0096 CA00     		lsls	r2, r1, #3
 639 0098 3A44     		add	r2, r2, r7
 640 009a D2F82461 		ldr	r6, [r2, #292]
 641 009e B342     		cmp	r3, r6
 642 00a0 CAD8     		bhi	.L41
 665:USB/core/usb_dcd_int.c ****     
 643              		.loc 1 665 0
 644 00a2 1E46     		mov	r6, r3
 645 00a4 C8E7     		b	.L41
 646              	.LVL77:
 647              	.L42:
 682:USB/core/usb_dcd_int.c **** 
 648              		.loc 1 682 0
ARM GAS  /tmp/ccMPWmB0.s 			page 28


 649 00a6 0120     		movs	r0, #1
 650 00a8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 651              		.cfi_endproc
 652              	.LFE131:
 654              		.section	.text.DCD_HandleInEP_ISR,"ax",%progbits
 655              		.align	1
 656              		.syntax unified
 657              		.thumb
 658              		.thumb_func
 659              		.fpu fpv4-sp-d16
 661              	DCD_HandleInEP_ISR:
 662              	.LFB127:
 424:USB/core/usb_dcd_int.c ****   USB_OTG_DIEPINTn_TypeDef  diepint;
 663              		.loc 1 424 0
 664              		.cfi_startproc
 665              		@ args = 0, pretend = 0, frame = 0
 666              		@ frame_needed = 0, uses_anonymous_args = 0
 667              	.LVL78:
 668 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 669              	.LCFI10:
 670              		.cfi_def_cfa_offset 24
 671              		.cfi_offset 4, -24
 672              		.cfi_offset 5, -20
 673              		.cfi_offset 6, -16
 674              		.cfi_offset 7, -12
 675              		.cfi_offset 8, -8
 676              		.cfi_offset 14, -4
 677 0004 0746     		mov	r7, r0
 678              	.LVL79:
 431:USB/core/usb_dcd_int.c ****   
 679              		.loc 1 431 0
 680 0006 FFF7FEFF 		bl	USB_OTG_ReadDevAllInEPItr
 681              	.LVL80:
 682 000a 0446     		mov	r4, r0
 683              	.LVL81:
 428:USB/core/usb_dcd_int.c ****   uint32_t fifoemptymsk;
 684              		.loc 1 428 0
 685 000c 0026     		movs	r6, #0
 433:USB/core/usb_dcd_int.c ****   {
 686              		.loc 1 433 0
 687 000e 24E0     		b	.L46
 688              	.LVL82:
 689              	.L57:
 440:USB/core/usb_dcd_int.c ****         USB_OTG_MODIFY_REG32(&pdev->regs.DREGS->DIEPEMPMSK, fifoemptymsk, 0);
 690              		.loc 1 440 0
 691 0010 0123     		movs	r3, #1
 692 0012 03FA06F0 		lsl	r0, r3, r6
 693              	.LVL83:
 441:USB/core/usb_dcd_int.c ****         CLEAR_IN_EP_INTR(epnum, xfercompl);
 694              		.loc 1 441 0
 695 0016 3969     		ldr	r1, [r7, #16]
 696 0018 4A6B     		ldr	r2, [r1, #52]
 697 001a 22EA0002 		bic	r2, r2, r0
 698 001e 4A63     		str	r2, [r1, #52]
 442:USB/core/usb_dcd_int.c ****         /* TX COMPLETE */
 699              		.loc 1 442 0
 700 0020 1D46     		mov	r5, r3
ARM GAS  /tmp/ccMPWmB0.s 			page 29


 701 0022 321D     		adds	r2, r6, #4
 702 0024 07EB8202 		add	r2, r7, r2, lsl #2
 703 0028 9268     		ldr	r2, [r2, #8]
 704 002a 9360     		str	r3, [r2, #8]
 444:USB/core/usb_dcd_int.c ****         
 705              		.loc 1 444 0
 706 002c 2C4B     		ldr	r3, .L58
 707 002e 1B68     		ldr	r3, [r3]
 708 0030 5B68     		ldr	r3, [r3, #4]
 709 0032 4146     		mov	r1, r8
 710 0034 3846     		mov	r0, r7
 711              	.LVL84:
 712 0036 9847     		blx	r3
 713              	.LVL85:
 446:USB/core/usb_dcd_int.c ****         {
 714              		.loc 1 446 0
 715 0038 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 716 003a AB42     		cmp	r3, r5
 717 003c 1CD1     		bne	.L48
 448:USB/core/usb_dcd_int.c ****           {
 718              		.loc 1 448 0
 719 003e DEB9     		cbnz	r6, .L48
 448:USB/core/usb_dcd_int.c ****           {
 720              		.loc 1 448 0 is_stmt 0 discriminator 1
 721 0040 97F81131 		ldrb	r3, [r7, #273]	@ zero_extendqisi2
 722 0044 042B     		cmp	r3, #4
 723 0046 17D1     		bne	.L48
 451:USB/core/usb_dcd_int.c ****           }
 724              		.loc 1 451 0 is_stmt 1
 725 0048 3846     		mov	r0, r7
 726 004a FFF7FEFF 		bl	USB_OTG_EP0_OutStart
 727              	.LVL86:
 728 004e 13E0     		b	.L48
 729              	.LVL87:
 730              	.L52:
 471:USB/core/usb_dcd_int.c ****       {
 731              		.loc 1 471 0
 732 0050 15F0800F 		tst	r5, #128
 733 0054 35D1     		bne	.L55
 734              	.L47:
 479:USB/core/usb_dcd_int.c ****     ep_intr >>= 1;
 735              		.loc 1 479 0
 736 0056 0136     		adds	r6, r6, #1
 737              	.LVL88:
 480:USB/core/usb_dcd_int.c ****   }
 738              		.loc 1 480 0
 739 0058 6408     		lsrs	r4, r4, #1
 740              	.LVL89:
 741              	.L46:
 433:USB/core/usb_dcd_int.c ****   {
 742              		.loc 1 433 0
 743 005a 002C     		cmp	r4, #0
 744 005c 3CD0     		beq	.L56
 435:USB/core/usb_dcd_int.c ****     {
 745              		.loc 1 435 0
 746 005e 14F0010F 		tst	r4, #1
 747 0062 F8D0     		beq	.L47
ARM GAS  /tmp/ccMPWmB0.s 			page 30


 437:USB/core/usb_dcd_int.c ****       if ( diepint.b.xfercompl )
 748              		.loc 1 437 0
 749 0064 5FFA86F8 		uxtb	r8, r6
 750 0068 4146     		mov	r1, r8
 751 006a 3846     		mov	r0, r7
 752 006c FFF7FEFF 		bl	DCD_ReadDevInEP
 753              	.LVL90:
 754 0070 0546     		mov	r5, r0
 755              	.LVL91:
 438:USB/core/usb_dcd_int.c ****       {
 756              		.loc 1 438 0
 757 0072 10F0010F 		tst	r0, #1
 758 0076 CBD1     		bne	.L57
 759              	.L48:
 455:USB/core/usb_dcd_int.c ****       {
 760              		.loc 1 455 0
 761 0078 15F0080F 		tst	r5, #8
 762 007c 05D0     		beq	.L49
 457:USB/core/usb_dcd_int.c ****       }
 763              		.loc 1 457 0
 764 007e 0825     		movs	r5, #8
 765              	.LVL92:
 766 0080 331D     		adds	r3, r6, #4
 767 0082 07EB8303 		add	r3, r7, r3, lsl #2
 768 0086 9B68     		ldr	r3, [r3, #8]
 769              	.LVL93:
 770 0088 9D60     		str	r5, [r3, #8]
 771              	.L49:
 459:USB/core/usb_dcd_int.c ****       {
 772              		.loc 1 459 0
 773 008a 15F0100F 		tst	r5, #16
 774 008e 05D0     		beq	.L50
 461:USB/core/usb_dcd_int.c ****       }
 775              		.loc 1 461 0
 776 0090 1025     		movs	r5, #16
 777              	.LVL94:
 778 0092 331D     		adds	r3, r6, #4
 779 0094 07EB8303 		add	r3, r7, r3, lsl #2
 780 0098 9B68     		ldr	r3, [r3, #8]
 781              	.LVL95:
 782 009a 9D60     		str	r5, [r3, #8]
 783              	.L50:
 463:USB/core/usb_dcd_int.c ****       {
 784              		.loc 1 463 0
 785 009c 15F0400F 		tst	r5, #64
 786 00a0 05D0     		beq	.L51
 465:USB/core/usb_dcd_int.c ****       }
 787              		.loc 1 465 0
 788 00a2 4025     		movs	r5, #64
 789              	.LVL96:
 790 00a4 331D     		adds	r3, r6, #4
 791 00a6 07EB8303 		add	r3, r7, r3, lsl #2
 792 00aa 9B68     		ldr	r3, [r3, #8]
 793              	.LVL97:
 794 00ac 9D60     		str	r5, [r3, #8]
 795              	.L51:
 467:USB/core/usb_dcd_int.c ****       {
ARM GAS  /tmp/ccMPWmB0.s 			page 31


 796              		.loc 1 467 0
 797 00ae 15F0020F 		tst	r5, #2
 798 00b2 CDD0     		beq	.L52
 469:USB/core/usb_dcd_int.c ****       }       
 799              		.loc 1 469 0
 800 00b4 0225     		movs	r5, #2
 801              	.LVL98:
 802 00b6 331D     		adds	r3, r6, #4
 803 00b8 07EB8303 		add	r3, r7, r3, lsl #2
 804 00bc 9B68     		ldr	r3, [r3, #8]
 805              	.LVL99:
 806 00be 9D60     		str	r5, [r3, #8]
 807 00c0 C6E7     		b	.L52
 808              	.L55:
 474:USB/core/usb_dcd_int.c ****         
 809              		.loc 1 474 0
 810 00c2 3146     		mov	r1, r6
 811 00c4 3846     		mov	r0, r7
 812 00c6 FFF7FEFF 		bl	DCD_WriteEmptyTxFifo
 813              	.LVL100:
 476:USB/core/usb_dcd_int.c ****       }
 814              		.loc 1 476 0
 815 00ca 8025     		movs	r5, #128
 816              	.LVL101:
 817 00cc 331D     		adds	r3, r6, #4
 818 00ce 07EB8303 		add	r3, r7, r3, lsl #2
 819 00d2 9B68     		ldr	r3, [r3, #8]
 820              	.LVL102:
 821 00d4 9D60     		str	r5, [r3, #8]
 822 00d6 BEE7     		b	.L47
 823              	.L56:
 484:USB/core/usb_dcd_int.c **** 
 824              		.loc 1 484 0
 825 00d8 0120     		movs	r0, #1
 826 00da BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 827              	.LVL103:
 828              	.L59:
 829 00de 00BF     		.align	2
 830              	.L58:
 831 00e0 00000000 		.word	USBD_DCD_INT_fops
 832              		.cfi_endproc
 833              	.LFE127:
 835              		.section	.text.DCD_HandleRxStatusQueueLevel_ISR,"ax",%progbits
 836              		.align	1
 837              		.syntax unified
 838              		.thumb
 839              		.thumb_func
 840              		.fpu fpv4-sp-d16
 842              	DCD_HandleRxStatusQueueLevel_ISR:
 843              	.LFB130:
 586:USB/core/usb_dcd_int.c ****   USB_OTG_GINTMSK_TypeDef  int_mask;
 844              		.loc 1 586 0
 845              		.cfi_startproc
 846              		@ args = 0, pretend = 0, frame = 0
 847              		@ frame_needed = 0, uses_anonymous_args = 0
 848              	.LVL104:
 849 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
ARM GAS  /tmp/ccMPWmB0.s 			page 32


 850              	.LCFI11:
 851              		.cfi_def_cfa_offset 24
 852              		.cfi_offset 4, -24
 853              		.cfi_offset 5, -20
 854              		.cfi_offset 6, -16
 855              		.cfi_offset 7, -12
 856              		.cfi_offset 8, -8
 857              		.cfi_offset 14, -4
 858 0004 0446     		mov	r4, r0
 594:USB/core/usb_dcd_int.c ****   
 859              		.loc 1 594 0
 860 0006 C268     		ldr	r2, [r0, #12]
 861 0008 9369     		ldr	r3, [r2, #24]
 862 000a 23F01003 		bic	r3, r3, #16
 863 000e 9361     		str	r3, [r2, #24]
 597:USB/core/usb_dcd_int.c ****   
 864              		.loc 1 597 0
 865 0010 C368     		ldr	r3, [r0, #12]
 866 0012 1D6A     		ldr	r5, [r3, #32]
 867              	.LVL105:
 599:USB/core/usb_dcd_int.c ****   
 868              		.loc 1 599 0
 869 0014 05F00F06 		and	r6, r5, #15
 870              	.LVL106:
 601:USB/core/usb_dcd_int.c ****   {
 871              		.loc 1 601 0
 872 0018 C5F34343 		ubfx	r3, r5, #17, #4
 873 001c 022B     		cmp	r3, #2
 874 001e 09D0     		beq	.L62
 875 0020 062B     		cmp	r3, #6
 876 0022 23D0     		beq	.L63
 877              	.LVL107:
 878              	.L61:
 627:USB/core/usb_dcd_int.c ****   
 879              		.loc 1 627 0
 880 0024 E268     		ldr	r2, [r4, #12]
 881 0026 9369     		ldr	r3, [r2, #24]
 882 0028 43F01003 		orr	r3, r3, #16
 883 002c 9361     		str	r3, [r2, #24]
 630:USB/core/usb_dcd_int.c **** 
 884              		.loc 1 630 0
 885 002e 0120     		movs	r0, #1
 886 0030 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 887              	.LVL108:
 888              	.L62:
 606:USB/core/usb_dcd_int.c ****     {
 889              		.loc 1 606 0
 890 0034 47F6F073 		movw	r3, #32752
 891 0038 2B42     		tst	r3, r5
 892 003a F3D0     		beq	.L61
 608:USB/core/usb_dcd_int.c ****       ep->xfer_buff += status.b.bcnt;
 893              		.loc 1 608 0
 894 003c C5F30A15 		ubfx	r5, r5, #4, #11
 895              	.LVL109:
 896 0040 4FEA8608 		lsl	r8, r6, #2
 897 0044 08EB0603 		add	r3, r8, r6
 898 0048 DF00     		lsls	r7, r3, #3
ARM GAS  /tmp/ccMPWmB0.s 			page 33


 899 004a 0744     		add	r7, r7, r0
 900 004c 2A46     		mov	r2, r5
 901 004e D7F88013 		ldr	r1, [r7, #896]
 902 0052 FFF7FEFF 		bl	USB_OTG_ReadPacket
 903              	.LVL110:
 609:USB/core/usb_dcd_int.c ****       ep->xfer_count += status.b.bcnt;
 904              		.loc 1 609 0
 905 0056 D7F88033 		ldr	r3, [r7, #896]
 906 005a 2B44     		add	r3, r3, r5
 907 005c C7F88033 		str	r3, [r7, #896]
 610:USB/core/usb_dcd_int.c ****     }
 908              		.loc 1 610 0
 909 0060 D7F88C33 		ldr	r3, [r7, #908]
 910 0064 1D44     		add	r5, r5, r3
 911 0066 C7F88C53 		str	r5, [r7, #908]
 912 006a DBE7     		b	.L61
 913              	.LVL111:
 914              	.L63:
 619:USB/core/usb_dcd_int.c ****     ep->xfer_count += status.b.bcnt;
 915              		.loc 1 619 0
 916 006c 0822     		movs	r2, #8
 917 006e 00F2CC51 		addw	r1, r0, #1484
 918 0072 FFF7FEFF 		bl	USB_OTG_ReadPacket
 919              	.LVL112:
 620:USB/core/usb_dcd_int.c ****     break;
 920              		.loc 1 620 0
 921 0076 C5F30A15 		ubfx	r5, r5, #4, #11
 922              	.LVL113:
 923 007a B300     		lsls	r3, r6, #2
 924 007c 9919     		adds	r1, r3, r6
 925 007e CA00     		lsls	r2, r1, #3
 926 0080 2244     		add	r2, r2, r4
 927 0082 D2F88C33 		ldr	r3, [r2, #908]
 928 0086 1D44     		add	r5, r5, r3
 929 0088 C2F88C53 		str	r5, [r2, #908]
 621:USB/core/usb_dcd_int.c ****   default:
 930              		.loc 1 621 0
 931 008c CAE7     		b	.L61
 932              		.cfi_endproc
 933              	.LFE130:
 935              		.section	.text.DCD_HandleUsbReset_ISR,"ax",%progbits
 936              		.align	1
 937              		.syntax unified
 938              		.thumb
 939              		.thumb_func
 940              		.fpu fpv4-sp-d16
 942              	DCD_HandleUsbReset_ISR:
 943              	.LFB132:
 691:USB/core/usb_dcd_int.c ****   USB_OTG_DAINT_TypeDef    daintmsk;
 944              		.loc 1 691 0
 945              		.cfi_startproc
 946              		@ args = 0, pretend = 0, frame = 0
 947              		@ frame_needed = 0, uses_anonymous_args = 0
 948              	.LVL114:
 949 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 950              	.LCFI12:
 951              		.cfi_def_cfa_offset 32
ARM GAS  /tmp/ccMPWmB0.s 			page 34


 952              		.cfi_offset 3, -32
 953              		.cfi_offset 4, -28
 954              		.cfi_offset 5, -24
 955              		.cfi_offset 6, -20
 956              		.cfi_offset 7, -16
 957              		.cfi_offset 8, -12
 958              		.cfi_offset 9, -8
 959              		.cfi_offset 14, -4
 960 0004 0446     		mov	r4, r0
 700:USB/core/usb_dcd_int.c ****   daintmsk.d32 = 0;
 961              		.loc 1 700 0
 962 0006 0025     		movs	r5, #0
 963              	.LVL115:
 702:USB/core/usb_dcd_int.c ****   diepmsk.d32 = 0;
 964              		.loc 1 702 0
 965 0008 A846     		mov	r8, r5
 966              	.LVL116:
 703:USB/core/usb_dcd_int.c ****   dcfg.d32 = 0;
 967              		.loc 1 703 0
 968 000a 2F46     		mov	r7, r5
 969              	.LVL117:
 705:USB/core/usb_dcd_int.c ****   
 970              		.loc 1 705 0
 971 000c 2E46     		mov	r6, r5
 972              	.LVL118:
 709:USB/core/usb_dcd_int.c ****   
 973              		.loc 1 709 0
 974 000e 0269     		ldr	r2, [r0, #16]
 975 0010 5368     		ldr	r3, [r2, #4]
 976 0012 23F00103 		bic	r3, r3, #1
 977 0016 5360     		str	r3, [r2, #4]
 712:USB/core/usb_dcd_int.c ****   
 978              		.loc 1 712 0
 979 0018 2946     		mov	r1, r5
 980 001a FFF7FEFF 		bl	USB_OTG_FlushTxFifo
 981              	.LVL119:
 714:USB/core/usb_dcd_int.c ****   {
 982              		.loc 1 714 0
 983 001e 2B46     		mov	r3, r5
 984 0020 0CE0     		b	.L66
 985              	.LVL120:
 986              	.L67:
 716:USB/core/usb_dcd_int.c ****     USB_OTG_WRITE_REG32( &pdev->regs.OUTEP_REGS[i]->DOEPINT, 0xFF);
 987              		.loc 1 716 0 discriminator 3
 988 0022 1A1D     		adds	r2, r3, #4
 989 0024 04EB8202 		add	r2, r4, r2, lsl #2
 990 0028 9268     		ldr	r2, [r2, #8]
 991 002a FF21     		movs	r1, #255
 992 002c 9160     		str	r1, [r2, #8]
 717:USB/core/usb_dcd_int.c ****   }
 993              		.loc 1 717 0 discriminator 3
 994 002e 03F11402 		add	r2, r3, #20
 995 0032 04EB8202 		add	r2, r4, r2, lsl #2
 996 0036 5268     		ldr	r2, [r2, #4]
 997 0038 9160     		str	r1, [r2, #8]
 714:USB/core/usb_dcd_int.c ****   {
 998              		.loc 1 714 0 discriminator 3
ARM GAS  /tmp/ccMPWmB0.s 			page 35


 999 003a 0133     		adds	r3, r3, #1
 1000              	.LVL121:
 1001              	.L66:
 714:USB/core/usb_dcd_int.c ****   {
 1002              		.loc 1 714 0 is_stmt 0 discriminator 1
 1003 003c 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 1004 003e 9342     		cmp	r3, r2
 1005 0040 EFD3     		bcc	.L67
 719:USB/core/usb_dcd_int.c ****   
 1006              		.loc 1 719 0 is_stmt 1
 1007 0042 2369     		ldr	r3, [r4, #16]
 1008              	.LVL122:
 1009 0044 4FF0FF32 		mov	r2, #-1
 1010 0048 9A61     		str	r2, [r3, #24]
 721:USB/core/usb_dcd_int.c ****   daintmsk.ep.out = 1;
 1011              		.loc 1 721 0
 1012 004a 4FF00109 		mov	r9, #1
 1013 004e 69F30F05 		bfi	r5, r9, #0, #16
 722:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DAINTMSK, daintmsk.d32 );
 1014              		.loc 1 722 0
 1015 0052 69F31F45 		bfi	r5, r9, #16, #16
 723:USB/core/usb_dcd_int.c ****   
 1016              		.loc 1 723 0
 1017 0056 2369     		ldr	r3, [r4, #16]
 1018 0058 DD61     		str	r5, [r3, #28]
 1019              	.LVL123:
 727:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DOEPMSK, doepmsk.d32 );
 1020              		.loc 1 727 0
 1021 005a 48F00B08 		orr	r8, r8, #11
 1022              	.LVL124:
 728:USB/core/usb_dcd_int.c **** #ifdef USB_OTG_HS_DEDICATED_EP1_ENABLED   
 1023              		.loc 1 728 0
 1024 005e 2369     		ldr	r3, [r4, #16]
 1025              	.LVL125:
 1026 0060 C3F81480 		str	r8, [r3, #20]
 1027              	.LVL126:
 734:USB/core/usb_dcd_int.c **** 
 1028              		.loc 1 734 0
 1029 0064 47F00B07 		orr	r7, r7, #11
 1030              	.LVL127:
 736:USB/core/usb_dcd_int.c **** #ifdef USB_OTG_HS_DEDICATED_EP1_ENABLED  
 1031              		.loc 1 736 0
 1032 0068 2369     		ldr	r3, [r4, #16]
 1033              	.LVL128:
 1034 006a 1F61     		str	r7, [r3, #16]
 741:USB/core/usb_dcd_int.c ****   dcfg.b.devaddr = 0;
 1035              		.loc 1 741 0
 1036 006c 2269     		ldr	r2, [r4, #16]
 1037 006e 1368     		ldr	r3, [r2]
 742:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.DREGS->DCFG, dcfg.d32);
 1038              		.loc 1 742 0
 1039 0070 6FF30A13 		bfc	r3, #4, #7
 1040              	.LVL129:
 743:USB/core/usb_dcd_int.c ****   
 1041              		.loc 1 743 0
 1042 0074 1360     		str	r3, [r2]
 747:USB/core/usb_dcd_int.c ****   
ARM GAS  /tmp/ccMPWmB0.s 			page 36


 1043              		.loc 1 747 0
 1044 0076 2046     		mov	r0, r4
 1045 0078 FFF7FEFF 		bl	USB_OTG_EP0_OutStart
 1046              	.LVL130:
 751:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32 (&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 1047              		.loc 1 751 0
 1048 007c 46F48056 		orr	r6, r6, #4096
 1049              	.LVL131:
 752:USB/core/usb_dcd_int.c ****   
 1050              		.loc 1 752 0
 1051 0080 E368     		ldr	r3, [r4, #12]
 1052              	.LVL132:
 1053 0082 5E61     		str	r6, [r3, #20]
 755:USB/core/usb_dcd_int.c ****   return 1;
 1054              		.loc 1 755 0
 1055 0084 034B     		ldr	r3, .L69
 1056 0086 1B68     		ldr	r3, [r3]
 1057 0088 1B69     		ldr	r3, [r3, #16]
 1058 008a 2046     		mov	r0, r4
 1059 008c 9847     		blx	r3
 1060              	.LVL133:
 757:USB/core/usb_dcd_int.c **** 
 1061              		.loc 1 757 0
 1062 008e 4846     		mov	r0, r9
 1063 0090 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1064              	.LVL134:
 1065              	.L70:
 1066              		.align	2
 1067              	.L69:
 1068 0094 00000000 		.word	USBD_DCD_INT_fops
 1069              		.cfi_endproc
 1070              	.LFE132:
 1072              		.section	.text.DCD_HandleEnumDone_ISR,"ax",%progbits
 1073              		.align	1
 1074              		.syntax unified
 1075              		.thumb
 1076              		.thumb_func
 1077              		.fpu fpv4-sp-d16
 1079              	DCD_HandleEnumDone_ISR:
 1080              	.LFB133:
 766:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintsts;
 1081              		.loc 1 766 0
 1082              		.cfi_startproc
 1083              		@ args = 0, pretend = 0, frame = 0
 1084              		@ frame_needed = 0, uses_anonymous_args = 0
 1085              	.LVL135:
 1086 0000 38B5     		push	{r3, r4, r5, lr}
 1087              	.LCFI13:
 1088              		.cfi_def_cfa_offset 16
 1089              		.cfi_offset 3, -16
 1090              		.cfi_offset 4, -12
 1091              		.cfi_offset 5, -8
 1092              		.cfi_offset 14, -4
 1093 0002 0446     		mov	r4, r0
 770:USB/core/usb_dcd_int.c ****   
 1094              		.loc 1 770 0
 1095 0004 FFF7FEFF 		bl	USB_OTG_EP0Activate
ARM GAS  /tmp/ccMPWmB0.s 			page 37


 1096              	.LVL136:
 773:USB/core/usb_dcd_int.c ****   
 1097              		.loc 1 773 0
 1098 0008 E368     		ldr	r3, [r4, #12]
 1099 000a DD68     		ldr	r5, [r3, #12]
 1100              	.LVL137:
 776:USB/core/usb_dcd_int.c ****   {
 1101              		.loc 1 776 0
 1102 000c 2046     		mov	r0, r4
 1103 000e FFF7FEFF 		bl	USB_OTG_GetDeviceSpeed
 1104              	.LVL138:
 1105 0012 0328     		cmp	r0, #3
 1106 0014 0ED0     		beq	.L75
 784:USB/core/usb_dcd_int.c ****     pdev->cfg.mps              = USB_OTG_FS_MAX_PACKET_SIZE ;  
 1107              		.loc 1 784 0
 1108 0016 0123     		movs	r3, #1
 1109 0018 A370     		strb	r3, [r4, #2]
 785:USB/core/usb_dcd_int.c ****     gusbcfg.b.usbtrdtim = 5;
 1110              		.loc 1 785 0
 1111 001a 4023     		movs	r3, #64
 1112 001c A380     		strh	r3, [r4, #4]	@ movhi
 786:USB/core/usb_dcd_int.c ****   }
 1113              		.loc 1 786 0
 1114 001e 0523     		movs	r3, #5
 1115 0020 63F38D25 		bfi	r5, r3, #10, #4
 1116              	.L73:
 789:USB/core/usb_dcd_int.c ****   
 1117              		.loc 1 789 0
 1118 0024 E368     		ldr	r3, [r4, #12]
 1119 0026 DD60     		str	r5, [r3, #12]
 793:USB/core/usb_dcd_int.c ****   USB_OTG_WRITE_REG32( &pdev->regs.GREGS->GINTSTS, gintsts.d32 );
 1120              		.loc 1 793 0
 1121 0028 4FF40053 		mov	r3, #8192
 1122              	.LVL139:
 794:USB/core/usb_dcd_int.c ****   return 1;
 1123              		.loc 1 794 0
 1124 002c E268     		ldr	r2, [r4, #12]
 1125              	.LVL140:
 1126 002e 5361     		str	r3, [r2, #20]
 796:USB/core/usb_dcd_int.c **** 
 1127              		.loc 1 796 0
 1128 0030 0120     		movs	r0, #1
 1129 0032 38BD     		pop	{r3, r4, r5, pc}
 1130              	.LVL141:
 1131              	.L75:
 778:USB/core/usb_dcd_int.c ****     pdev->cfg.mps              = USB_OTG_HS_MAX_PACKET_SIZE ;    
 1132              		.loc 1 778 0
 1133 0034 0023     		movs	r3, #0
 1134 0036 A370     		strb	r3, [r4, #2]
 779:USB/core/usb_dcd_int.c ****     gusbcfg.b.usbtrdtim = 9;
 1135              		.loc 1 779 0
 1136 0038 4FF40073 		mov	r3, #512
 1137 003c A380     		strh	r3, [r4, #4]	@ movhi
 780:USB/core/usb_dcd_int.c ****   }
 1138              		.loc 1 780 0
 1139 003e 0923     		movs	r3, #9
 1140 0040 63F38D25 		bfi	r5, r3, #10, #4
ARM GAS  /tmp/ccMPWmB0.s 			page 38


 1141 0044 EEE7     		b	.L73
 1142              		.cfi_endproc
 1143              	.LFE133:
 1145              		.section	.text.USBD_OTG_ISR_Handler,"ax",%progbits
 1146              		.align	1
 1147              		.global	USBD_OTG_ISR_Handler
 1148              		.syntax unified
 1149              		.thumb
 1150              		.thumb_func
 1151              		.fpu fpv4-sp-d16
 1153              	USBD_OTG_ISR_Handler:
 1154              	.LFB124:
 210:USB/core/usb_dcd_int.c ****   USB_OTG_GINTSTS_TypeDef  gintr_status;
 1155              		.loc 1 210 0
 1156              		.cfi_startproc
 1157              		@ args = 0, pretend = 0, frame = 0
 1158              		@ frame_needed = 0, uses_anonymous_args = 0
 1159              	.LVL142:
 1160 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1161              	.LCFI14:
 1162              		.cfi_def_cfa_offset 24
 1163              		.cfi_offset 4, -24
 1164              		.cfi_offset 5, -20
 1165              		.cfi_offset 6, -16
 1166              		.cfi_offset 7, -12
 1167              		.cfi_offset 8, -8
 1168              		.cfi_offset 14, -4
 1169 0004 0546     		mov	r5, r0
 1170              	.LVL143:
 214:USB/core/usb_dcd_int.c ****   {
 1171              		.loc 1 214 0
 1172 0006 FFF7FEFF 		bl	USB_OTG_IsDeviceMode
 1173              	.LVL144:
 1174 000a 18B9     		cbnz	r0, .L91
 212:USB/core/usb_dcd_int.c ****   
 1175              		.loc 1 212 0
 1176 000c 0024     		movs	r4, #0
 1177              	.LVL145:
 1178              	.L76:
 295:USB/core/usb_dcd_int.c **** 
 1179              		.loc 1 295 0
 1180 000e 2046     		mov	r0, r4
 1181 0010 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1182              	.LVL146:
 1183              	.L91:
 216:USB/core/usb_dcd_int.c ****     if (!gintr_status.d32) /* avoid spurious interrupt */
 1184              		.loc 1 216 0
 1185 0014 2846     		mov	r0, r5
 1186 0016 FFF7FEFF 		bl	USB_OTG_ReadCoreItr
 1187              	.LVL147:
 1188 001a 0446     		mov	r4, r0
 1189 001c 0646     		mov	r6, r0
 1190              	.LVL148:
 217:USB/core/usb_dcd_int.c ****     {
 1191              		.loc 1 217 0
 1192 001e 0028     		cmp	r0, #0
 1193 0020 F5D0     		beq	.L76
ARM GAS  /tmp/ccMPWmB0.s 			page 39


 222:USB/core/usb_dcd_int.c ****     {
 1194              		.loc 1 222 0
 1195 0022 C0F30747 		ubfx	r7, r0, #16, #8
 1196 0026 17F0080F 		tst	r7, #8
 1197 002a 29D1     		bne	.L92
 212:USB/core/usb_dcd_int.c ****   
 1198              		.loc 1 212 0
 1199 002c 0024     		movs	r4, #0
 1200              	.LVL149:
 1201              	.L78:
 227:USB/core/usb_dcd_int.c ****     {
 1202              		.loc 1 227 0
 1203 002e 17F0040F 		tst	r7, #4
 1204 0032 2AD1     		bne	.L93
 1205              	.L79:
 232:USB/core/usb_dcd_int.c ****     {
 1206              		.loc 1 232 0
 1207 0034 5FFA86F8 		uxtb	r8, r6
 1208 0038 18F0020F 		tst	r8, #2
 1209 003c 02D0     		beq	.L80
 1210              	.LBB2:
 238:USB/core/usb_dcd_int.c ****       USB_OTG_WRITE_REG32(&pdev->regs.GREGS->GINTSTS, gintsts.d32);
 1211              		.loc 1 238 0
 1212 003e 0223     		movs	r3, #2
 239:USB/core/usb_dcd_int.c ****     }
 1213              		.loc 1 239 0
 1214 0040 EA68     		ldr	r2, [r5, #12]
 1215              	.LVL150:
 1216 0042 5361     		str	r3, [r2, #20]
 1217              	.L80:
 1218              	.LBE2:
 242:USB/core/usb_dcd_int.c ****     {
 1219              		.loc 1 242 0
 1220 0044 002E     		cmp	r6, #0
 1221 0046 25DB     		blt	.L94
 1222              	.L81:
 247:USB/core/usb_dcd_int.c ****     {
 1223              		.loc 1 247 0
 1224 0048 C6F30726 		ubfx	r6, r6, #8, #8
 1225 004c 16F0080F 		tst	r6, #8
 1226 0050 25D1     		bne	.L95
 1227              	.L82:
 251:USB/core/usb_dcd_int.c ****     {
 1228              		.loc 1 251 0
 1229 0052 18F0080F 		tst	r8, #8
 1230 0056 27D1     		bne	.L96
 1231              	.L83:
 257:USB/core/usb_dcd_int.c ****     {
 1232              		.loc 1 257 0
 1233 0058 18F0100F 		tst	r8, #16
 1234 005c 29D1     		bne	.L97
 1235              	.L84:
 263:USB/core/usb_dcd_int.c ****     {
 1236              		.loc 1 263 0
 1237 005e 16F0100F 		tst	r6, #16
 1238 0062 2BD1     		bne	.L98
 1239              	.L85:
ARM GAS  /tmp/ccMPWmB0.s 			page 40


 268:USB/core/usb_dcd_int.c ****     {
 1240              		.loc 1 268 0
 1241 0064 16F0200F 		tst	r6, #32
 1242 0068 2DD1     		bne	.L99
 1243              	.L86:
 273:USB/core/usb_dcd_int.c ****     {
 1244              		.loc 1 273 0
 1245 006a 17F0100F 		tst	r7, #16
 1246 006e 2FD1     		bne	.L100
 1247              	.L87:
 278:USB/core/usb_dcd_int.c ****     {
 1248              		.loc 1 278 0
 1249 0070 17F0200F 		tst	r7, #32
 1250 0074 CBD0     		beq	.L76
 280:USB/core/usb_dcd_int.c ****     }    
 1251              		.loc 1 280 0
 1252 0076 2846     		mov	r0, r5
 1253 0078 FFF7FEFF 		bl	DCD_IsoOUTIncomplete_ISR
 1254              	.LVL151:
 1255 007c 0443     		orrs	r4, r4, r0
 1256              	.LVL152:
 1257 007e C6E7     		b	.L76
 1258              	.LVL153:
 1259              	.L92:
 224:USB/core/usb_dcd_int.c ****     }    
 1260              		.loc 1 224 0
 1261 0080 2846     		mov	r0, r5
 1262 0082 FFF7FEFF 		bl	DCD_HandleOutEP_ISR
 1263              	.LVL154:
 1264 0086 0446     		mov	r4, r0
 1265              	.LVL155:
 1266 0088 D1E7     		b	.L78
 1267              	.LVL156:
 1268              	.L93:
 229:USB/core/usb_dcd_int.c ****     }
 1269              		.loc 1 229 0
 1270 008a 2846     		mov	r0, r5
 1271 008c FFF7FEFF 		bl	DCD_HandleInEP_ISR
 1272              	.LVL157:
 1273 0090 0443     		orrs	r4, r4, r0
 1274              	.LVL158:
 1275 0092 CFE7     		b	.L79
 1276              	.LVL159:
 1277              	.L94:
 244:USB/core/usb_dcd_int.c ****     }
 1278              		.loc 1 244 0
 1279 0094 2846     		mov	r0, r5
 1280 0096 FFF7FEFF 		bl	DCD_HandleResume_ISR
 1281              	.LVL160:
 1282 009a 0443     		orrs	r4, r4, r0
 1283              	.LVL161:
 1284 009c D4E7     		b	.L81
 1285              	.LVL162:
 1286              	.L95:
 249:USB/core/usb_dcd_int.c ****     }
 1287              		.loc 1 249 0
 1288 009e 2846     		mov	r0, r5
ARM GAS  /tmp/ccMPWmB0.s 			page 41


 1289 00a0 FFF7FEFF 		bl	DCD_HandleUSBSuspend_ISR
 1290              	.LVL163:
 1291 00a4 0443     		orrs	r4, r4, r0
 1292              	.LVL164:
 1293 00a6 D4E7     		b	.L82
 1294              	.LVL165:
 1295              	.L96:
 253:USB/core/usb_dcd_int.c ****       
 1296              		.loc 1 253 0
 1297 00a8 2846     		mov	r0, r5
 1298 00aa FFF7FEFF 		bl	DCD_HandleSof_ISR
 1299              	.LVL166:
 1300 00ae 0443     		orrs	r4, r4, r0
 1301              	.LVL167:
 1302 00b0 D2E7     		b	.L83
 1303              	.LVL168:
 1304              	.L97:
 259:USB/core/usb_dcd_int.c ****       
 1305              		.loc 1 259 0
 1306 00b2 2846     		mov	r0, r5
 1307 00b4 FFF7FEFF 		bl	DCD_HandleRxStatusQueueLevel_ISR
 1308              	.LVL169:
 1309 00b8 0443     		orrs	r4, r4, r0
 1310              	.LVL170:
 1311 00ba D0E7     		b	.L84
 1312              	.LVL171:
 1313              	.L98:
 265:USB/core/usb_dcd_int.c ****       
 1314              		.loc 1 265 0
 1315 00bc 2846     		mov	r0, r5
 1316 00be FFF7FEFF 		bl	DCD_HandleUsbReset_ISR
 1317              	.LVL172:
 1318 00c2 0443     		orrs	r4, r4, r0
 1319              	.LVL173:
 1320 00c4 CEE7     		b	.L85
 1321              	.LVL174:
 1322              	.L99:
 270:USB/core/usb_dcd_int.c ****     }
 1323              		.loc 1 270 0
 1324 00c6 2846     		mov	r0, r5
 1325 00c8 FFF7FEFF 		bl	DCD_HandleEnumDone_ISR
 1326              	.LVL175:
 1327 00cc 0443     		orrs	r4, r4, r0
 1328              	.LVL176:
 1329 00ce CCE7     		b	.L86
 1330              	.LVL177:
 1331              	.L100:
 275:USB/core/usb_dcd_int.c ****     }
 1332              		.loc 1 275 0
 1333 00d0 2846     		mov	r0, r5
 1334 00d2 FFF7FEFF 		bl	DCD_IsoINIncomplete_ISR
 1335              	.LVL178:
 1336 00d6 0443     		orrs	r4, r4, r0
 1337              	.LVL179:
 1338 00d8 CAE7     		b	.L87
 1339              		.cfi_endproc
 1340              	.LFE124:
ARM GAS  /tmp/ccMPWmB0.s 			page 42


 1342              		.text
 1343              	.Letext0:
 1344              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 1345              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 1346              		.file 4 "F4_CORE/core_cm4.h"
 1347              		.file 5 "USER/system_stm32f4xx.h"
 1348              		.file 6 "/usr/include/newlib/sys/lock.h"
 1349              		.file 7 "/usr/include/newlib/sys/_types.h"
 1350              		.file 8 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 1351              		.file 9 "/usr/include/newlib/sys/reent.h"
 1352              		.file 10 "USB/core/usb_regs.h"
 1353              		.file 11 "USB/core/usb_core.h"
 1354              		.file 12 "USB/core/usb_dcd_int.h"
 1355              		.file 13 "USB/core/usb_defines.h"
ARM GAS  /tmp/ccMPWmB0.s 			page 43


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usb_dcd_int.c
     /tmp/ccMPWmB0.s:18     .text.DCD_HandleResume_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:24     .text.DCD_HandleResume_ISR:0000000000000000 DCD_HandleResume_ISR
     /tmp/ccMPWmB0.s:80     .text.DCD_HandleResume_ISR:000000000000003c $d
     /tmp/ccMPWmB0.s:85     .text.DCD_HandleUSBSuspend_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:91     .text.DCD_HandleUSBSuspend_ISR:0000000000000000 DCD_HandleUSBSuspend_ISR
     /tmp/ccMPWmB0.s:181    .text.DCD_HandleUSBSuspend_ISR:0000000000000070 $d
     /tmp/ccMPWmB0.s:187    .text.DCD_HandleSof_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:193    .text.DCD_HandleSof_ISR:0000000000000000 DCD_HandleSof_ISR
     /tmp/ccMPWmB0.s:226    .text.DCD_HandleSof_ISR:0000000000000018 $d
     /tmp/ccMPWmB0.s:231    .text.DCD_IsoINIncomplete_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:237    .text.DCD_IsoINIncomplete_ISR:0000000000000000 DCD_IsoINIncomplete_ISR
     /tmp/ccMPWmB0.s:270    .text.DCD_IsoINIncomplete_ISR:0000000000000018 $d
     /tmp/ccMPWmB0.s:275    .text.DCD_IsoOUTIncomplete_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:281    .text.DCD_IsoOUTIncomplete_ISR:0000000000000000 DCD_IsoOUTIncomplete_ISR
     /tmp/ccMPWmB0.s:314    .text.DCD_IsoOUTIncomplete_ISR:0000000000000018 $d
     /tmp/ccMPWmB0.s:319    .text.DCD_ReadDevInEP:0000000000000000 $t
     /tmp/ccMPWmB0.s:325    .text.DCD_ReadDevInEP:0000000000000000 DCD_ReadDevInEP
     /tmp/ccMPWmB0.s:363    .text.DCD_HandleOutEP_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:369    .text.DCD_HandleOutEP_ISR:0000000000000000 DCD_HandleOutEP_ISR
     /tmp/ccMPWmB0.s:521    .text.DCD_HandleOutEP_ISR:00000000000000cc $d
     /tmp/ccMPWmB0.s:526    .text.DCD_WriteEmptyTxFifo:0000000000000000 $t
     /tmp/ccMPWmB0.s:532    .text.DCD_WriteEmptyTxFifo:0000000000000000 DCD_WriteEmptyTxFifo
     /tmp/ccMPWmB0.s:655    .text.DCD_HandleInEP_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:661    .text.DCD_HandleInEP_ISR:0000000000000000 DCD_HandleInEP_ISR
     /tmp/ccMPWmB0.s:831    .text.DCD_HandleInEP_ISR:00000000000000e0 $d
     /tmp/ccMPWmB0.s:836    .text.DCD_HandleRxStatusQueueLevel_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:842    .text.DCD_HandleRxStatusQueueLevel_ISR:0000000000000000 DCD_HandleRxStatusQueueLevel_ISR
     /tmp/ccMPWmB0.s:936    .text.DCD_HandleUsbReset_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:942    .text.DCD_HandleUsbReset_ISR:0000000000000000 DCD_HandleUsbReset_ISR
     /tmp/ccMPWmB0.s:1068   .text.DCD_HandleUsbReset_ISR:0000000000000094 $d
     /tmp/ccMPWmB0.s:1073   .text.DCD_HandleEnumDone_ISR:0000000000000000 $t
     /tmp/ccMPWmB0.s:1079   .text.DCD_HandleEnumDone_ISR:0000000000000000 DCD_HandleEnumDone_ISR
     /tmp/ccMPWmB0.s:1146   .text.USBD_OTG_ISR_Handler:0000000000000000 $t
     /tmp/ccMPWmB0.s:1153   .text.USBD_OTG_ISR_Handler:0000000000000000 USBD_OTG_ISR_Handler
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
USBD_DCD_INT_fops
USB_OTG_ReadDevAllOutEp_itr
USB_OTG_ReadDevOutEP_itr
USB_OTG_EP0_OutStart
USB_OTG_WritePacket
USB_OTG_ReadDevAllInEPItr
USB_OTG_ReadPacket
USB_OTG_FlushTxFifo
USB_OTG_EP0Activate
USB_OTG_GetDeviceSpeed
USB_OTG_IsDeviceMode
USB_OTG_ReadCoreItr
