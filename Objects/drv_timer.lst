ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"drv_timer.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.DrvTimer_Obj_Init,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	DrvTimer_Obj_Init:
  27              	.LFB123:
  28              		.file 1 "Drv/drv_timer.c"
   1:Drv/drv_timer.c **** #include "drv_timer.h"
   2:Drv/drv_timer.c **** 
   3:Drv/drv_timer.c **** /* internal function */
   4:Drv/drv_timer.c **** 
   5:Drv/drv_timer.c **** /* internal variable */
   6:Drv/drv_timer.c **** 
   7:Drv/drv_timer.c **** /* external function */
   8:Drv/drv_timer.c **** static bool DrvTimer_Obj_Init(DrvTimer_Obj_TypeDef *obj);
   9:Drv/drv_timer.c **** static bool DrvTimer_Ctl(DrvTimer_CMD_List cmd, uint32_t p_data, uint16_t len);
  10:Drv/drv_timer.c **** static int32_t DrvTImer_GetEncoder(DrvTimer_Obj_TypeDef *obj);
  11:Drv/drv_timer.c **** 
  12:Drv/drv_timer.c **** /* external variable */
  13:Drv/drv_timer.c **** DrvTimer_TypeDef DrvTimer = {
  14:Drv/drv_timer.c ****     .obj_clear = DrvTimer_Obj_Init,
  15:Drv/drv_timer.c ****     .ctl = DrvTimer_Ctl,
  16:Drv/drv_timer.c ****     .get = DrvTImer_GetEncoder,
  17:Drv/drv_timer.c **** };
  18:Drv/drv_timer.c **** 
  19:Drv/drv_timer.c **** static bool DrvTimer_Obj_Init(DrvTimer_Obj_TypeDef *obj)
  20:Drv/drv_timer.c **** {
  29              		.loc 1 20 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              	.LVL0:
  21:Drv/drv_timer.c ****     if (obj == NULL)
  35              		.loc 1 21 0
  36 0000 50B1     		cbz	r0, .L3
  22:Drv/drv_timer.c ****         return false;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 2


  23:Drv/drv_timer.c **** 
  24:Drv/drv_timer.c ****     obj->irq = false;
  37              		.loc 1 24 0
  38 0002 0022     		movs	r2, #0
  39 0004 0273     		strb	r2, [r0, #12]
  25:Drv/drv_timer.c ****     obj->period = 0;
  40              		.loc 1 25 0
  41 0006 4260     		str	r2, [r0, #4]
  26:Drv/drv_timer.c ****     obj->PreemptionPriority = 0;
  42              		.loc 1 26 0
  43 0008 4273     		strb	r2, [r0, #13]
  27:Drv/drv_timer.c ****     obj->Prescaler = 0;
  44              		.loc 1 27 0
  45 000a 8260     		str	r2, [r0, #8]
  28:Drv/drv_timer.c ****     obj->SubPriority = 0;
  46              		.loc 1 28 0
  47 000c 8273     		strb	r2, [r0, #14]
  29:Drv/drv_timer.c ****     obj->timerx = Timer_None;
  48              		.loc 1 29 0
  49 000e 0421     		movs	r1, #4
  50 0010 4170     		strb	r1, [r0, #1]
  30:Drv/drv_timer.c ****     obj->cnt = 0;
  51              		.loc 1 30 0
  52 0012 4261     		str	r2, [r0, #20]
  31:Drv/drv_timer.c **** 
  32:Drv/drv_timer.c ****     return true;
  53              		.loc 1 32 0
  54 0014 0120     		movs	r0, #1
  55              	.LVL1:
  56 0016 7047     		bx	lr
  57              	.LVL2:
  58              	.L3:
  22:Drv/drv_timer.c **** 
  59              		.loc 1 22 0
  60 0018 0020     		movs	r0, #0
  61              	.LVL3:
  33:Drv/drv_timer.c **** }
  62              		.loc 1 33 0
  63 001a 7047     		bx	lr
  64              		.cfi_endproc
  65              	.LFE123:
  67              		.section	.text.DrvTImer_GetEncoder,"ax",%progbits
  68              		.align	2
  69              		.thumb
  70              		.thumb_func
  72              	DrvTImer_GetEncoder:
  73              	.LFB125:
  34:Drv/drv_timer.c **** 
  35:Drv/drv_timer.c **** static bool DrvTimer_Ctl(DrvTimer_CMD_List cmd, uint32_t p_data, uint16_t len)
  36:Drv/drv_timer.c **** {
  37:Drv/drv_timer.c ****     switch (cmd)
  38:Drv/drv_timer.c ****     {
  39:Drv/drv_timer.c ****     case DrvTimer_Encoder_Mode:
  40:Drv/drv_timer.c ****         if ((len != sizeof(DrvTimer_Obj_TypeDef)) || (p_data == 0))
  41:Drv/drv_timer.c ****             return false;
  42:Drv/drv_timer.c **** 
  43:Drv/drv_timer.c ****         ((DrvTimer_Obj_TypeDef *)p_data)->mode = DrvTimer_Encoder_Mode;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 3


  44:Drv/drv_timer.c **** 
  45:Drv/drv_timer.c ****         if ((((DrvTimer_Obj_TypeDef *)p_data)->timerx < Timer_2) ||
  46:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->timerx > Timer_4) ||
  47:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a == ((DrvTimer_Obj_TypeDef *)p_data)->enc_ch
  48:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a < TIM_Channel_1) ||
  49:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a < TIM_Channel_4) ||
  50:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_b < TIM_Channel_1) ||
  51:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_b < TIM_Channel_4))
  52:Drv/drv_timer.c ****             return false;
  53:Drv/drv_timer.c **** 
  54:Drv/drv_timer.c ****         periph_Timer_Encoder_Mode_Init(((DrvTimer_Obj_TypeDef *)p_data)->timerx,
  55:Drv/drv_timer.c ****                                        ((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a,
  56:Drv/drv_timer.c ****                                        ((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_b);
  57:Drv/drv_timer.c ****         return true;
  58:Drv/drv_timer.c **** 
  59:Drv/drv_timer.c ****     case DrvTimer_Counter_Mode:
  60:Drv/drv_timer.c ****         /* TODO */
  61:Drv/drv_timer.c ****         /* need set Counter IRQ Callback */
  62:Drv/drv_timer.c ****         /* not inuse yet */
  63:Drv/drv_timer.c ****         return false;
  64:Drv/drv_timer.c **** 
  65:Drv/drv_timer.c ****     default:
  66:Drv/drv_timer.c ****         return false;
  67:Drv/drv_timer.c ****     }
  68:Drv/drv_timer.c **** }
  69:Drv/drv_timer.c **** 
  70:Drv/drv_timer.c **** static int32_t DrvTImer_GetEncoder(DrvTimer_Obj_TypeDef *obj)
  71:Drv/drv_timer.c **** {
  74              		.loc 1 71 0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 0
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78              	.LVL4:
  72:Drv/drv_timer.c ****     if ((obj == NULL) || (obj->mode != DrvTimer_Encoder_Mode))
  79              		.loc 1 72 0
  80 0000 58B1     		cbz	r0, .L6
  81              		.loc 1 72 0 is_stmt 0 discriminator 1
  82 0002 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
  83 0004 032A     		cmp	r2, #3
  84 0006 0AD1     		bne	.L7
  71:Drv/drv_timer.c ****     if ((obj == NULL) || (obj->mode != DrvTimer_Encoder_Mode))
  85              		.loc 1 71 0 is_stmt 1
  86 0008 10B5     		push	{r4, lr}
  87              	.LCFI0:
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 4, -8
  90              		.cfi_offset 14, -4
  91 000a 0446     		mov	r4, r0
  73:Drv/drv_timer.c ****         return 0;
  74:Drv/drv_timer.c **** 
  75:Drv/drv_timer.c ****     obj->cnt += periph_Timer_GetEncoder_Input(obj->timerx);
  92              		.loc 1 75 0
  93 000c 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
  94              	.LVL5:
  95 000e FFF7FEFF 		bl	periph_Timer_GetEncoder_Input
  96              	.LVL6:
  97 0012 6369     		ldr	r3, [r4, #20]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 4


  98 0014 1844     		add	r0, r0, r3
  99 0016 6061     		str	r0, [r4, #20]
  76:Drv/drv_timer.c **** 
  77:Drv/drv_timer.c ****     return obj->cnt;
 100              		.loc 1 77 0
 101 0018 10BD     		pop	{r4, pc}
 102              	.LVL7:
 103              	.L6:
 104              	.LCFI1:
 105              		.cfi_def_cfa_offset 0
 106              		.cfi_restore 4
 107              		.cfi_restore 14
  73:Drv/drv_timer.c ****         return 0;
 108              		.loc 1 73 0
 109 001a 0020     		movs	r0, #0
 110              	.LVL8:
 111 001c 7047     		bx	lr
 112              	.LVL9:
 113              	.L7:
 114 001e 0020     		movs	r0, #0
 115              	.LVL10:
 116 0020 7047     		bx	lr
 117              		.cfi_endproc
 118              	.LFE125:
 120 0022 00BF     		.section	.text.DrvTimer_Ctl,"ax",%progbits
 121              		.align	2
 122              		.thumb
 123              		.thumb_func
 125              	DrvTimer_Ctl:
 126              	.LFB124:
  36:Drv/drv_timer.c ****     switch (cmd)
 127              		.loc 1 36 0
 128              		.cfi_startproc
 129              		@ args = 0, pretend = 0, frame = 0
 130              		@ frame_needed = 0, uses_anonymous_args = 0
 131              	.LVL11:
  37:Drv/drv_timer.c ****     {
 132              		.loc 1 37 0
 133 0000 0328     		cmp	r0, #3
 134 0002 15D1     		bne	.L20
  40:Drv/drv_timer.c ****             return false;
 135              		.loc 1 40 0
 136 0004 182A     		cmp	r2, #24
 137 0006 15D1     		bne	.L14
  40:Drv/drv_timer.c ****             return false;
 138              		.loc 1 40 0 is_stmt 0 discriminator 1
 139 0008 B1B1     		cbz	r1, .L15
  36:Drv/drv_timer.c ****     switch (cmd)
 140              		.loc 1 36 0 is_stmt 1
 141 000a 08B5     		push	{r3, lr}
 142              	.LCFI2:
 143              		.cfi_def_cfa_offset 8
 144              		.cfi_offset 3, -8
 145              		.cfi_offset 14, -4
  43:Drv/drv_timer.c **** 
 146              		.loc 1 43 0
 147 000c 0323     		movs	r3, #3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 5


 148 000e 0B70     		strb	r3, [r1]
  46:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a == ((DrvTimer_Obj_TypeDef *)p_data)->enc_ch
 149              		.loc 1 46 0
 150 0010 4878     		ldrb	r0, [r1, #1]	@ zero_extendqisi2
 151              	.LVL12:
  45:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->timerx > Timer_4) ||
 152              		.loc 1 45 0
 153 0012 0228     		cmp	r0, #2
 154 0014 12D8     		bhi	.L16
  47:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a < TIM_Channel_1) ||
 155              		.loc 1 47 0
 156 0016 0B8A     		ldrh	r3, [r1, #16]
 157 0018 4A8A     		ldrh	r2, [r1, #18]
 158              	.LVL13:
 159 001a 9342     		cmp	r3, r2
 160 001c 10D0     		beq	.L17
  49:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_b < TIM_Channel_1) ||
 161              		.loc 1 49 0
 162 001e 0B2B     		cmp	r3, #11
 163 0020 10D9     		bls	.L18
  50:Drv/drv_timer.c ****             (((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_b < TIM_Channel_4))
 164              		.loc 1 50 0
 165 0022 0B2A     		cmp	r2, #11
 166 0024 10D9     		bls	.L19
  54:Drv/drv_timer.c ****                                        ((DrvTimer_Obj_TypeDef *)p_data)->enc_ch_a,
 167              		.loc 1 54 0
 168 0026 1946     		mov	r1, r3
 169              	.LVL14:
 170 0028 FFF7FEFF 		bl	periph_Timer_Encoder_Mode_Init
 171              	.LVL15:
  57:Drv/drv_timer.c **** 
 172              		.loc 1 57 0
 173 002c 0120     		movs	r0, #1
 174 002e 08BD     		pop	{r3, pc}
 175              	.LVL16:
 176              	.L20:
 177              	.LCFI3:
 178              		.cfi_def_cfa_offset 0
 179              		.cfi_restore 3
 180              		.cfi_restore 14
  63:Drv/drv_timer.c **** 
 181              		.loc 1 63 0
 182 0030 0020     		movs	r0, #0
 183              	.LVL17:
  68:Drv/drv_timer.c **** 
 184              		.loc 1 68 0
 185 0032 7047     		bx	lr
 186              	.LVL18:
 187              	.L14:
  41:Drv/drv_timer.c **** 
 188              		.loc 1 41 0
 189 0034 0020     		movs	r0, #0
 190              	.LVL19:
 191 0036 7047     		bx	lr
 192              	.LVL20:
 193              	.L15:
 194 0038 0020     		movs	r0, #0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 6


 195              	.LVL21:
 196 003a 7047     		bx	lr
 197              	.L16:
 198              	.LCFI4:
 199              		.cfi_def_cfa_offset 8
 200              		.cfi_offset 3, -8
 201              		.cfi_offset 14, -4
  52:Drv/drv_timer.c **** 
 202              		.loc 1 52 0
 203 003c 0020     		movs	r0, #0
 204 003e 08BD     		pop	{r3, pc}
 205              	.LVL22:
 206              	.L17:
 207 0040 0020     		movs	r0, #0
 208 0042 08BD     		pop	{r3, pc}
 209              	.L18:
 210 0044 0020     		movs	r0, #0
 211 0046 08BD     		pop	{r3, pc}
 212              	.L19:
 213 0048 0020     		movs	r0, #0
  68:Drv/drv_timer.c **** 
 214              		.loc 1 68 0
 215 004a 08BD     		pop	{r3, pc}
 216              		.cfi_endproc
 217              	.LFE124:
 219              		.global	DrvTimer
 220              		.section	.data.DrvTimer,"aw",%progbits
 221              		.align	2
 224              	DrvTimer:
 225 0000 00000000 		.word	DrvTimer_Obj_Init
 226 0004 00000000 		.word	DrvTimer_Ctl
 227 0008 00000000 		.word	DrvTImer_GetEncoder
 228              		.text
 229              	.Letext0:
 230              		.file 2 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\machine\\_default_types.h"
 231              		.file 3 "d:\\gcc_arm\\5.4 2016q3\\arm-none-eabi\\include\\sys\\_stdint.h"
 232              		.file 4 "Bsp/periph_timer.h"
 233              		.file 5 "Drv/drv_timer.h"
 234              		.file 6 "F4_CORE/core_cm4.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 drv_timer.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:22     .text.DrvTimer_Obj_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:26     .text.DrvTimer_Obj_Init:00000000 DrvTimer_Obj_Init
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:68     .text.DrvTImer_GetEncoder:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:72     .text.DrvTImer_GetEncoder:00000000 DrvTImer_GetEncoder
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:121    .text.DrvTimer_Ctl:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:125    .text.DrvTimer_Ctl:00000000 DrvTimer_Ctl
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:224    .data.DrvTimer:00000000 DrvTimer
C:\Users\ADMINI~1\AppData\Local\Temp\ccGBaOLa.s:221    .data.DrvTimer:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
periph_Timer_GetEncoder_Input
periph_Timer_Encoder_Mode_Init
