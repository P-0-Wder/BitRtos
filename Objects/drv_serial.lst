ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"drv_serial.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.DrvSerial_Write,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	DrvSerial_Write:
  26              	.LVL0:
  27              	.LFB127:
  28              		.file 1 "Drv/drv_serial.c"
   1:Drv/drv_serial.c **** #include "drv_serial.h"
   2:Drv/drv_serial.c **** #include "vcp.h"
   3:Drv/drv_serial.c **** 
   4:Drv/drv_serial.c **** #define Serial_Default_Baudrate Serial_115200
   5:Drv/drv_serial.c **** 
   6:Drv/drv_serial.c **** /* internal virable */
   7:Drv/drv_serial.c **** static uint8_t Serial_TX_Buff[DrvSerial_Sum][SERIAL_MAX_RECLEN];
   8:Drv/drv_serial.c **** static uint8_t Serial_RX_Buff[DrvSerial_Sum][SERIAL_MAX_RECLEN];
   9:Drv/drv_serial.c **** 
  10:Drv/drv_serial.c **** /* internal function */
  11:Drv/drv_serial.c **** 
  12:Drv/drv_serial.c **** /* external function */
  13:Drv/drv_serial.c **** static bool DrvSerial_Ctl(DrvSerial_Port_List portx, DrvSerial_CMD_List cmd, uint32_t data, uint8_t
  14:Drv/drv_serial.c **** static bool DrvSerial_Write(uint8_t *data, uint16_t len);
  15:Drv/drv_serial.c **** 
  16:Drv/drv_serial.c **** /* external virable */
  17:Drv/drv_serial.c **** DrvSerial_GenProcFunc_TypeDef DrvSerial = {
  18:Drv/drv_serial.c ****     .ctl = DrvSerial_Ctl,
  19:Drv/drv_serial.c ****     .read = NULL,
  20:Drv/drv_serial.c ****     .write = DrvSerial_Write,
  21:Drv/drv_serial.c **** };
  22:Drv/drv_serial.c **** 
  23:Drv/drv_serial.c **** static bool DrvSerial_Ctl(DrvSerial_Port_List portx, DrvSerial_CMD_List cmd, uint32_t data, uint8_t
  24:Drv/drv_serial.c **** {
  25:Drv/drv_serial.c ****     DrvSerial_Config_Typedef *data_tmp = NULL;
  26:Drv/drv_serial.c **** 
  27:Drv/drv_serial.c ****     switch ((uint8_t)cmd)
  28:Drv/drv_serial.c ****     {
  29:Drv/drv_serial.c ****     case DrvSerial_Open:
  30:Drv/drv_serial.c ****         if (len != sizeof(DrvSerial_Config_Typedef))
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 2


  31:Drv/drv_serial.c ****             return;
  32:Drv/drv_serial.c **** 
  33:Drv/drv_serial.c ****         data_tmp = (DrvSerial_Config_Typedef *)data;
  34:Drv/drv_serial.c **** 
  35:Drv/drv_serial.c ****         if (portx != DrvSerial_Vcp)
  36:Drv/drv_serial.c ****         {
  37:Drv/drv_serial.c ****             switch ((uint8_t)(data_tmp->mode))
  38:Drv/drv_serial.c ****             {
  39:Drv/drv_serial.c ****             case DrvSerial_MODE_Normal:
  40:Drv/drv_serial.c ****                 Serial_IRQ_RX_Init(portx, data_tmp->baudrate,
  41:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
  42:Drv/drv_serial.c ****                                    data_tmp->SubPriority, Serial_Normal);
  43:Drv/drv_serial.c ****                 break;
  44:Drv/drv_serial.c **** 
  45:Drv/drv_serial.c ****             case DrvSerial_MODE_DMA_Rx:
  46:Drv/drv_serial.c ****                 Serial_DMA_RX_Init(portx, data_tmp->baudrate,
  47:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
  48:Drv/drv_serial.c ****                                    data_tmp->SubPriority,
  49:Drv/drv_serial.c ****                                    (uint32_t)&Serial_RX_Buff[portx],
  50:Drv/drv_serial.c ****                                    SERIAL_MAX_RECLEN, Serial_Normal);
  51:Drv/drv_serial.c ****                 break;
  52:Drv/drv_serial.c **** 
  53:Drv/drv_serial.c ****             case DrvSerial_MODE_DMA_TxRx:
  54:Drv/drv_serial.c ****                 Serial_DMA_RXTX_Init(portx, data_tmp->baudrate,
  55:Drv/drv_serial.c ****                                      data_tmp->PreemptionPriority,
  56:Drv/drv_serial.c ****                                      data_tmp->SubPriority,
  57:Drv/drv_serial.c ****                                      (uint32_t)&Serial_RX_Buff[portx],
  58:Drv/drv_serial.c ****                                      (uint32_t)&Serial_TX_Buff[portx],
  59:Drv/drv_serial.c ****                                      SERIAL_MAX_RECLEN, Serial_Normal);
  60:Drv/drv_serial.c ****                 break;
  61:Drv/drv_serial.c **** 
  62:Drv/drv_serial.c ****             default:
  63:Drv/drv_serial.c ****                 return false;
  64:Drv/drv_serial.c ****             }
  65:Drv/drv_serial.c ****         }
  66:Drv/drv_serial.c ****         else
  67:Drv/drv_serial.c ****         {
  68:Drv/drv_serial.c ****             VCP_Init();
  69:Drv/drv_serial.c ****         }
  70:Drv/drv_serial.c ****         break;
  71:Drv/drv_serial.c **** 
  72:Drv/drv_serial.c ****     case DrvSerial_Close:
  73:Drv/drv_serial.c ****         break;
  74:Drv/drv_serial.c **** 
  75:Drv/drv_serial.c ****     case DrvSerial_Set_Baudrate:
  76:Drv/drv_serial.c ****         break;
  77:Drv/drv_serial.c **** 
  78:Drv/drv_serial.c ****     case DrvSerial_Set_IRQCallback:
  79:Drv/drv_serial.c ****         break;
  80:Drv/drv_serial.c **** 
  81:Drv/drv_serial.c ****     default:
  82:Drv/drv_serial.c ****         return false;
  83:Drv/drv_serial.c ****     }
  84:Drv/drv_serial.c **** 
  85:Drv/drv_serial.c ****     return true;
  86:Drv/drv_serial.c **** }
  87:Drv/drv_serial.c **** 
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 3


  88:Drv/drv_serial.c **** static bool DrvSerial_Write(uint8_t *data, uint16_t len)
  89:Drv/drv_serial.c **** {
  29              		.loc 1 89 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  90:Drv/drv_serial.c **** }
  34              		.loc 1 90 1 view .LVU1
  35              	.LVL1:
  36              		.loc 1 90 1 is_stmt 0 view .LVU2
  37 0000 7047     		bx	lr
  38              		.cfi_endproc
  39              	.LFE127:
  41              		.section	.text.DrvSerial_Ctl,"ax",%progbits
  42              		.align	1
  43              		.syntax unified
  44              		.thumb
  45              		.thumb_func
  46              		.fpu fpv4-sp-d16
  48              	DrvSerial_Ctl:
  49              	.LVL2:
  50              	.LFB126:
  24:Drv/drv_serial.c ****     DrvSerial_Config_Typedef *data_tmp = NULL;
  51              		.loc 1 24 1 is_stmt 1 view -0
  52              		.cfi_startproc
  53              		@ args = 0, pretend = 0, frame = 0
  54              		@ frame_needed = 0, uses_anonymous_args = 0
  25:Drv/drv_serial.c **** 
  55              		.loc 1 25 5 view .LVU4
  27:Drv/drv_serial.c ****     {
  56              		.loc 1 27 5 view .LVU5
  57 0000 51B1     		cbz	r1, .L3
  58 0002 01F1FF3C 		add	ip, r1, #-1
  59 0006 5FFA8CFC 		uxtb	ip, ip
  60 000a BCF1020F 		cmp	ip, #2
  61 000e 01D8     		bhi	.L14
  85:Drv/drv_serial.c **** }
  62              		.loc 1 85 12 is_stmt 0 view .LVU6
  63 0010 0120     		movs	r0, #1
  64              	.LVL3:
  86:Drv/drv_serial.c **** 
  65              		.loc 1 86 1 view .LVU7
  66 0012 7047     		bx	lr
  67              	.LVL4:
  68              	.L14:
  27:Drv/drv_serial.c ****     {
  69              		.loc 1 27 5 view .LVU8
  70 0014 0020     		movs	r0, #0
  71              	.LVL5:
  27:Drv/drv_serial.c ****     {
  72              		.loc 1 27 5 view .LVU9
  73 0016 7047     		bx	lr
  74              	.LVL6:
  75              	.L3:
  30:Drv/drv_serial.c ****             return;
  76              		.loc 1 30 9 is_stmt 1 view .LVU10
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 4


  30:Drv/drv_serial.c ****             return;
  77              		.loc 1 30 12 is_stmt 0 view .LVU11
  78 0018 142B     		cmp	r3, #20
  79 001a 00D0     		beq	.L5
  31:Drv/drv_serial.c **** 
  80              		.loc 1 31 13 is_stmt 1 view .LVU12
  81              	.LVL7:
  31:Drv/drv_serial.c **** 
  82              		.loc 1 31 13 is_stmt 0 view .LVU13
  83 001c 7047     		bx	lr
  84              	.LVL8:
  85              	.L5:
  24:Drv/drv_serial.c ****     DrvSerial_Config_Typedef *data_tmp = NULL;
  86              		.loc 1 24 1 view .LVU14
  87 001e 30B5     		push	{r4, r5, lr}
  88              	.LCFI0:
  89              		.cfi_def_cfa_offset 12
  90              		.cfi_offset 4, -12
  91              		.cfi_offset 5, -8
  92              		.cfi_offset 14, -4
  93 0020 85B0     		sub	sp, sp, #20
  94              	.LCFI1:
  95              		.cfi_def_cfa_offset 32
  33:Drv/drv_serial.c **** 
  96              		.loc 1 33 9 is_stmt 1 view .LVU15
  97              	.LVL9:
  35:Drv/drv_serial.c ****         {
  98              		.loc 1 35 9 view .LVU16
  35:Drv/drv_serial.c ****         {
  99              		.loc 1 35 12 is_stmt 0 view .LVU17
 100 0022 0428     		cmp	r0, #4
 101 0024 39D0     		beq	.L6
  37:Drv/drv_serial.c ****             {
 102              		.loc 1 37 13 is_stmt 1 view .LVU18
  37:Drv/drv_serial.c ****             {
 103              		.loc 1 37 39 is_stmt 0 view .LVU19
 104 0026 D37A     		ldrb	r3, [r2, #11]	@ zero_extendqisi2
 105              	.LVL10:
  37:Drv/drv_serial.c ****             {
 106              		.loc 1 37 39 view .LVU20
 107 0028 012B     		cmp	r3, #1
 108 002a 0FD0     		beq	.L7
 109 002c 022B     		cmp	r3, #2
 110 002e 1ED0     		beq	.L8
 111 0030 13B1     		cbz	r3, .L15
 112 0032 0020     		movs	r0, #0
 113              	.LVL11:
 114              	.L2:
  86:Drv/drv_serial.c **** 
 115              		.loc 1 86 1 view .LVU21
 116 0034 05B0     		add	sp, sp, #20
 117              	.LCFI2:
 118              		.cfi_remember_state
 119              		.cfi_def_cfa_offset 12
 120              		@ sp needed
 121 0036 30BD     		pop	{r4, r5, pc}
 122              	.LVL12:
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 5


 123              	.L15:
 124              	.LCFI3:
 125              		.cfi_restore_state
  40:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 126              		.loc 1 40 17 is_stmt 1 view .LVU22
 127 0038 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 128 003a 547A     		ldrb	r4, [r2, #9]	@ zero_extendqisi2
 129 003c 5168     		ldr	r1, [r2, #4]
 130              	.LVL13:
  40:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 131              		.loc 1 40 17 is_stmt 0 view .LVU23
 132 003e 0022     		movs	r2, #0
 133              	.LVL14:
  40:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 134              		.loc 1 40 17 view .LVU24
 135 0040 0092     		str	r2, [sp]
 136 0042 2246     		mov	r2, r4
 137 0044 FFF7FEFF 		bl	Serial_IRQ_RX_Init
 138              	.LVL15:
  43:Drv/drv_serial.c **** 
 139              		.loc 1 43 17 is_stmt 1 view .LVU25
  85:Drv/drv_serial.c **** }
 140              		.loc 1 85 12 is_stmt 0 view .LVU26
 141 0048 0120     		movs	r0, #1
  43:Drv/drv_serial.c **** 
 142              		.loc 1 43 17 view .LVU27
 143 004a F3E7     		b	.L2
 144              	.LVL16:
 145              	.L7:
  46:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 146              		.loc 1 46 17 is_stmt 1 view .LVU28
  49:Drv/drv_serial.c ****                                    SERIAL_MAX_RECLEN, Serial_Normal);
 147              		.loc 1 49 46 is_stmt 0 view .LVU29
 148 004c 154C     		ldr	r4, .L16
 149 004e 04EB8024 		add	r4, r4, r0, lsl #10
  46:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 150              		.loc 1 46 17 view .LVU30
 151 0052 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 152 0054 557A     		ldrb	r5, [r2, #9]	@ zero_extendqisi2
 153 0056 5168     		ldr	r1, [r2, #4]
 154              	.LVL17:
  46:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 155              		.loc 1 46 17 view .LVU31
 156 0058 0022     		movs	r2, #0
 157              	.LVL18:
  46:Drv/drv_serial.c ****                                    data_tmp->PreemptionPriority,
 158              		.loc 1 46 17 view .LVU32
 159 005a 0292     		str	r2, [sp, #8]
 160 005c 4FF48062 		mov	r2, #1024
 161 0060 0192     		str	r2, [sp, #4]
 162 0062 0094     		str	r4, [sp]
 163 0064 2A46     		mov	r2, r5
 164 0066 FFF7FEFF 		bl	Serial_DMA_RX_Init
 165              	.LVL19:
  51:Drv/drv_serial.c **** 
 166              		.loc 1 51 17 is_stmt 1 view .LVU33
  85:Drv/drv_serial.c **** }
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 6


 167              		.loc 1 85 12 is_stmt 0 view .LVU34
 168 006a 0120     		movs	r0, #1
  51:Drv/drv_serial.c **** 
 169              		.loc 1 51 17 view .LVU35
 170 006c E2E7     		b	.L2
 171              	.LVL20:
 172              	.L8:
  54:Drv/drv_serial.c ****                                      data_tmp->PreemptionPriority,
 173              		.loc 1 54 17 is_stmt 1 view .LVU36
  57:Drv/drv_serial.c ****                                      (uint32_t)&Serial_TX_Buff[portx],
 174              		.loc 1 57 48 is_stmt 0 view .LVU37
 175 006e 0D4C     		ldr	r4, .L16
 176 0070 04EB8024 		add	r4, r4, r0, lsl #10
  58:Drv/drv_serial.c ****                                      SERIAL_MAX_RECLEN, Serial_Normal);
 177              		.loc 1 58 48 view .LVU38
 178 0074 0C4D     		ldr	r5, .L16+4
 179 0076 05EB8025 		add	r5, r5, r0, lsl #10
  54:Drv/drv_serial.c ****                                      data_tmp->PreemptionPriority,
 180              		.loc 1 54 17 view .LVU39
 181 007a 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 182 007c 92F809C0 		ldrb	ip, [r2, #9]	@ zero_extendqisi2
 183 0080 5168     		ldr	r1, [r2, #4]
 184              	.LVL21:
  54:Drv/drv_serial.c ****                                      data_tmp->PreemptionPriority,
 185              		.loc 1 54 17 view .LVU40
 186 0082 0022     		movs	r2, #0
 187              	.LVL22:
  54:Drv/drv_serial.c ****                                      data_tmp->PreemptionPriority,
 188              		.loc 1 54 17 view .LVU41
 189 0084 0392     		str	r2, [sp, #12]
 190 0086 4FF48062 		mov	r2, #1024
 191 008a 0292     		str	r2, [sp, #8]
 192 008c 0195     		str	r5, [sp, #4]
 193 008e 0094     		str	r4, [sp]
 194 0090 6246     		mov	r2, ip
 195 0092 FFF7FEFF 		bl	Serial_DMA_RXTX_Init
 196              	.LVL23:
  60:Drv/drv_serial.c **** 
 197              		.loc 1 60 17 is_stmt 1 view .LVU42
  85:Drv/drv_serial.c **** }
 198              		.loc 1 85 12 is_stmt 0 view .LVU43
 199 0096 0120     		movs	r0, #1
  60:Drv/drv_serial.c **** 
 200              		.loc 1 60 17 view .LVU44
 201 0098 CCE7     		b	.L2
 202              	.LVL24:
 203              	.L6:
  68:Drv/drv_serial.c ****         }
 204              		.loc 1 68 13 is_stmt 1 view .LVU45
 205 009a FFF7FEFF 		bl	VCP_Init
 206              	.LVL25:
  85:Drv/drv_serial.c **** }
 207              		.loc 1 85 12 is_stmt 0 view .LVU46
 208 009e 0120     		movs	r0, #1
 209 00a0 C8E7     		b	.L2
 210              	.L17:
 211 00a2 00BF     		.align	2
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 7


 212              	.L16:
 213 00a4 00000000 		.word	Serial_RX_Buff
 214 00a8 00000000 		.word	Serial_TX_Buff
 215              		.cfi_endproc
 216              	.LFE126:
 218              		.global	DrvSerial
 219              		.section	.bss.Serial_RX_Buff,"aw",%nobits
 220              		.align	2
 223              	Serial_RX_Buff:
 224 0000 00000000 		.space	5120
 224      00000000 
 224      00000000 
 224      00000000 
 224      00000000 
 225              		.section	.bss.Serial_TX_Buff,"aw",%nobits
 226              		.align	2
 229              	Serial_TX_Buff:
 230 0000 00000000 		.space	5120
 230      00000000 
 230      00000000 
 230      00000000 
 230      00000000 
 231              		.section	.data.DrvSerial,"aw"
 232              		.align	2
 235              	DrvSerial:
 236 0000 00000000 		.word	DrvSerial_Ctl
 237 0004 00000000 		.word	0
 238 0008 00000000 		.word	DrvSerial_Write
 239              		.text
 240              	.Letext0:
 241              		.file 2 "/usr/local/arm-none-eabi-gcc/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/mac
 242              		.file 3 "/usr/local/arm-none-eabi-gcc/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys
 243              		.file 4 "Bsp/periph_serial.h"
 244              		.file 5 "Drv/drv_serial.h"
 245              		.file 6 "USB/config/vcp.h"
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 drv_serial.c
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:18     .text.DrvSerial_Write:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:25     .text.DrvSerial_Write:0000000000000000 DrvSerial_Write
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:42     .text.DrvSerial_Ctl:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:48     .text.DrvSerial_Ctl:0000000000000000 DrvSerial_Ctl
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:213    .text.DrvSerial_Ctl:00000000000000a4 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:223    .bss.Serial_RX_Buff:0000000000000000 Serial_RX_Buff
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:229    .bss.Serial_TX_Buff:0000000000000000 Serial_TX_Buff
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:235    .data.DrvSerial:0000000000000000 DrvSerial
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:220    .bss.Serial_RX_Buff:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:226    .bss.Serial_TX_Buff:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//cct3NMMz.s:232    .data.DrvSerial:0000000000000000 $d

UNDEFINED SYMBOLS
Serial_IRQ_RX_Init
Serial_DMA_RX_Init
Serial_DMA_RXTX_Init
VCP_Init
