ARM GAS  /tmp/cc6DTiBm.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"periph_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.periph_SPI_DeInit,"ax",%progbits
  18              		.align	1
  19              		.global	periph_SPI_DeInit
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	periph_SPI_DeInit:
  26              	.LFB123:
  27              		.file 1 "Bsp/periph_spi.c"
   1:Bsp/periph_spi.c **** #include "stm32f4xx_spi.h"
   2:Bsp/periph_spi.c **** #include "periph_gpio.h"
   3:Bsp/periph_spi.c **** #include "periph_spi.h"
   4:Bsp/periph_spi.c **** 
   5:Bsp/periph_spi.c **** uint16_t SpiErrorCount = 0;
   6:Bsp/periph_spi.c **** uint16_t SpiErrorCount2 = 0;
   7:Bsp/periph_spi.c **** 
   8:Bsp/periph_spi.c **** static void (*SPI_IO_Init[SPI_PORT_SUM])() = {GPIO_SPI1_IO_Init, GPIO_SPI2_IO_Init, GPIO_SPI3_IO_In
   9:Bsp/periph_spi.c **** 
  10:Bsp/periph_spi.c **** static SPI_TypeDef *SPI_PORT[SPI_PORT_SUM] = {SPI1, SPI2, SPI3};
  11:Bsp/periph_spi.c **** 
  12:Bsp/periph_spi.c **** static uint32_t SPI_CLK[SPI_PORT_SUM] = {RCC_APB2Periph_SPI1, RCC_APB1Periph_SPI2, RCC_APB1Periph_S
  13:Bsp/periph_spi.c **** 
  14:Bsp/periph_spi.c **** static const uint16_t divisorMap[] = {
  15:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_256, // SPI_CLOCK_INITIALIZATON      328.125 KBits/s
  16:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_128, // SPI_CLOCK_SLOW               656.25 KBits/s
  17:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_8,   // SPI_CLOCK_STANDARD           10.5 MBits/s
  18:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_4,   // SPI_CLOCK_FAST               21.0 MBits/s
  19:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_2	   // SPI_CLOCK_ULTRAFAST          42.0 MBits/s
  20:Bsp/periph_spi.c **** };
  21:Bsp/periph_spi.c **** 
  22:Bsp/periph_spi.c **** void periph_SPI_DeInit(SPI_List SPIx)
  23:Bsp/periph_spi.c **** {
  28              		.loc 1 23 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc6DTiBm.s 			page 2


  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  24:Bsp/periph_spi.c **** 	SPI_I2S_DeInit(SPI_PORT[SPIx]);
  38              		.loc 1 24 0
  39 0002 034B     		ldr	r3, .L3
  40 0004 53F82000 		ldr	r0, [r3, r0, lsl #2]
  41              	.LVL1:
  42 0008 FFF7FEFF 		bl	SPI_I2S_DeInit
  43              	.LVL2:
  44 000c 08BD     		pop	{r3, pc}
  45              	.L4:
  46 000e 00BF     		.align	2
  47              	.L3:
  48 0010 00000000 		.word	.LANCHOR0
  49              		.cfi_endproc
  50              	.LFE123:
  52              		.section	.text.periph_SPI_Init,"ax",%progbits
  53              		.align	1
  54              		.global	periph_SPI_Init
  55              		.syntax unified
  56              		.thumb
  57              		.thumb_func
  58              		.fpu fpv4-sp-d16
  60              	periph_SPI_Init:
  61              	.LFB124:
  25:Bsp/periph_spi.c **** }
  26:Bsp/periph_spi.c **** 
  27:Bsp/periph_spi.c **** void periph_SPI_Init(SPI_List SPIx, SPIClockSpeed_e speed, uint16_t CPOL, uint16_t CPHA)
  28:Bsp/periph_spi.c **** {
  62              		.loc 1 28 0
  63              		.cfi_startproc
  64              		@ args = 0, pretend = 0, frame = 24
  65              		@ frame_needed = 0, uses_anonymous_args = 0
  66              	.LVL3:
  67 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  68              	.LCFI1:
  69              		.cfi_def_cfa_offset 20
  70              		.cfi_offset 4, -20
  71              		.cfi_offset 5, -16
  72              		.cfi_offset 6, -12
  73              		.cfi_offset 7, -8
  74              		.cfi_offset 14, -4
  75 0002 87B0     		sub	sp, sp, #28
  76              	.LCFI2:
  77              		.cfi_def_cfa_offset 48
  78 0004 0446     		mov	r4, r0
  79 0006 0D46     		mov	r5, r1
  80 0008 1746     		mov	r7, r2
  81 000a 1E46     		mov	r6, r3
  29:Bsp/periph_spi.c **** 	SPI_InitTypeDef SPI_InitStructure;
  30:Bsp/periph_spi.c **** 	SPI_IO_Init[SPIx]();
  82              		.loc 1 30 0
  83 000c 204B     		ldr	r3, .L10
  84              	.LVL4:
  85 000e 53F82030 		ldr	r3, [r3, r0, lsl #2]
  86 0012 9847     		blx	r3
  87              	.LVL5:
ARM GAS  /tmp/cc6DTiBm.s 			page 3


  31:Bsp/periph_spi.c **** 
  32:Bsp/periph_spi.c **** 	if (SPIx == SPI_1)
  88              		.loc 1 32 0
  89 0014 A4B3     		cbz	r4, .L9
  33:Bsp/periph_spi.c **** 	{
  34:Bsp/periph_spi.c **** 		RCC_APB2PeriphClockCmd(SPI_CLK[SPIx], ENABLE);
  35:Bsp/periph_spi.c **** 	}
  36:Bsp/periph_spi.c **** 	else
  37:Bsp/periph_spi.c **** 	{
  38:Bsp/periph_spi.c **** 		RCC_APB1PeriphClockCmd(SPI_CLK[SPIx], ENABLE);
  90              		.loc 1 38 0
  91 0016 0121     		movs	r1, #1
  92 0018 1E4B     		ldr	r3, .L10+4
  93 001a 53F82400 		ldr	r0, [r3, r4, lsl #2]
  94 001e FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
  95              	.LVL6:
  96              	.L7:
  39:Bsp/periph_spi.c **** 	}
  40:Bsp/periph_spi.c **** 
  41:Bsp/periph_spi.c **** 	SPI_I2S_DeInit(SPI_PORT[SPIx]);
  97              		.loc 1 41 0
  98 0022 1D4B     		ldr	r3, .L10+8
  99 0024 53F82440 		ldr	r4, [r3, r4, lsl #2]
 100 0028 2046     		mov	r0, r4
 101 002a FFF7FEFF 		bl	SPI_I2S_DeInit
 102              	.LVL7:
  42:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], DISABLE);
 103              		.loc 1 42 0
 104 002e 0021     		movs	r1, #0
 105 0030 2046     		mov	r0, r4
 106 0032 FFF7FEFF 		bl	SPI_Cmd
 107              	.LVL8:
  43:Bsp/periph_spi.c **** 
  44:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
 108              		.loc 1 44 0
 109 0036 4FF48273 		mov	r3, #260
 110 003a ADF80630 		strh	r3, [sp, #6]	@ movhi
  45:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;
 111              		.loc 1 45 0
 112 003e 0023     		movs	r3, #0
 113 0040 ADF80430 		strh	r3, [sp, #4]	@ movhi
  46:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
 114              		.loc 1 46 0
 115 0044 ADF80830 		strh	r3, [sp, #8]	@ movhi
  47:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
 116              		.loc 1 47 0
 117 0048 4FF40072 		mov	r2, #512
 118 004c ADF80E20 		strh	r2, [sp, #14]	@ movhi
  48:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
 119              		.loc 1 48 0
 120 0050 ADF81230 		strh	r3, [sp, #18]	@ movhi
  49:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CPOL = CPOL;
 121              		.loc 1 49 0
 122 0054 ADF80A70 		strh	r7, [sp, #10]	@ movhi
  50:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CPHA = CPHA;
 123              		.loc 1 50 0
 124 0058 ADF80C60 		strh	r6, [sp, #12]	@ movhi
ARM GAS  /tmp/cc6DTiBm.s 			page 4


  51:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CRCPolynomial = 7;
 125              		.loc 1 51 0
 126 005c 0723     		movs	r3, #7
 127 005e ADF81430 		strh	r3, [sp, #20]	@ movhi
  52:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_BaudRatePrescaler = divisorMap[(uint8_t)speed];
 128              		.loc 1 52 0
 129 0062 0E4B     		ldr	r3, .L10+12
 130 0064 33F81530 		ldrh	r3, [r3, r5, lsl #1]
 131 0068 ADF81030 		strh	r3, [sp, #16]	@ movhi
  53:Bsp/periph_spi.c **** 	SPI_Init(SPI_PORT[SPIx], &SPI_InitStructure);
 132              		.loc 1 53 0
 133 006c 01A9     		add	r1, sp, #4
 134 006e 2046     		mov	r0, r4
 135 0070 FFF7FEFF 		bl	SPI_Init
 136              	.LVL9:
  54:Bsp/periph_spi.c **** 
  55:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], ENABLE);
 137              		.loc 1 55 0
 138 0074 0121     		movs	r1, #1
 139 0076 2046     		mov	r0, r4
 140 0078 FFF7FEFF 		bl	SPI_Cmd
 141              	.LVL10:
  56:Bsp/periph_spi.c **** }
 142              		.loc 1 56 0
 143 007c 07B0     		add	sp, sp, #28
 144              	.LCFI3:
 145              		.cfi_remember_state
 146              		.cfi_def_cfa_offset 20
 147              		@ sp needed
 148 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 149              	.L9:
 150              	.LCFI4:
 151              		.cfi_restore_state
  34:Bsp/periph_spi.c **** 	}
 152              		.loc 1 34 0
 153 0080 0121     		movs	r1, #1
 154 0082 044B     		ldr	r3, .L10+4
 155 0084 53F82400 		ldr	r0, [r3, r4, lsl #2]
 156 0088 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 157              	.LVL11:
 158 008c C9E7     		b	.L7
 159              	.L11:
 160 008e 00BF     		.align	2
 161              	.L10:
 162 0090 00000000 		.word	.LANCHOR1
 163 0094 00000000 		.word	.LANCHOR2
 164 0098 00000000 		.word	.LANCHOR0
 165 009c 00000000 		.word	.LANCHOR3
 166              		.cfi_endproc
 167              	.LFE124:
 169              		.section	.text.periph_SPI_SetSpeed,"ax",%progbits
 170              		.align	1
 171              		.global	periph_SPI_SetSpeed
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 175              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc6DTiBm.s 			page 5


 177              	periph_SPI_SetSpeed:
 178              	.LFB125:
  57:Bsp/periph_spi.c **** 
  58:Bsp/periph_spi.c **** void periph_SPI_SetSpeed(SPI_List SPIx, SPIClockSpeed_e speed)
  59:Bsp/periph_spi.c **** {
 179              		.loc 1 59 0
 180              		.cfi_startproc
 181              		@ args = 0, pretend = 0, frame = 0
 182              		@ frame_needed = 0, uses_anonymous_args = 0
 183              	.LVL12:
 184 0000 38B5     		push	{r3, r4, r5, lr}
 185              	.LCFI5:
 186              		.cfi_def_cfa_offset 16
 187              		.cfi_offset 3, -16
 188              		.cfi_offset 4, -12
 189              		.cfi_offset 5, -8
 190              		.cfi_offset 14, -4
 191 0002 0D46     		mov	r5, r1
  60:Bsp/periph_spi.c **** #define BR_CLEAR_MASK 0xFFC7
  61:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], DISABLE);
 192              		.loc 1 61 0
 193 0004 0A4B     		ldr	r3, .L14
 194 0006 53F82040 		ldr	r4, [r3, r0, lsl #2]
 195 000a 0021     		movs	r1, #0
 196              	.LVL13:
 197 000c 2046     		mov	r0, r4
 198              	.LVL14:
 199 000e FFF7FEFF 		bl	SPI_Cmd
 200              	.LVL15:
  62:Bsp/periph_spi.c **** 
  63:Bsp/periph_spi.c **** 	uint16_t tempRegister = SPI_PORT[SPIx]->CR1;
 201              		.loc 1 63 0
 202 0012 2388     		ldrh	r3, [r4]
 203 0014 9BB2     		uxth	r3, r3
 204              	.LVL16:
  64:Bsp/periph_spi.c **** 	tempRegister &= BR_CLEAR_MASK;
 205              		.loc 1 64 0
 206 0016 23F03803 		bic	r3, r3, #56
 207              	.LVL17:
  65:Bsp/periph_spi.c **** 	tempRegister |= divisorMap[speed];
 208              		.loc 1 65 0
 209 001a 064A     		ldr	r2, .L14+4
 210 001c 32F81520 		ldrh	r2, [r2, r5, lsl #1]
 211 0020 1343     		orrs	r3, r3, r2
 212              	.LVL18:
  66:Bsp/periph_spi.c **** 	SPI_PORT[SPIx]->CR1 = tempRegister;
 213              		.loc 1 66 0
 214 0022 2380     		strh	r3, [r4]	@ movhi
  67:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], ENABLE);
 215              		.loc 1 67 0
 216 0024 0121     		movs	r1, #1
 217 0026 2046     		mov	r0, r4
 218 0028 FFF7FEFF 		bl	SPI_Cmd
 219              	.LVL19:
 220 002c 38BD     		pop	{r3, r4, r5, pc}
 221              	.L15:
 222 002e 00BF     		.align	2
ARM GAS  /tmp/cc6DTiBm.s 			page 6


 223              	.L14:
 224 0030 00000000 		.word	.LANCHOR0
 225 0034 00000000 		.word	.LANCHOR3
 226              		.cfi_endproc
 227              	.LFE125:
 229              		.section	.text.periph_SPI_WriteByte,"ax",%progbits
 230              		.align	1
 231              		.global	periph_SPI_WriteByte
 232              		.syntax unified
 233              		.thumb
 234              		.thumb_func
 235              		.fpu fpv4-sp-d16
 237              	periph_SPI_WriteByte:
 238              	.LFB126:
  68:Bsp/periph_spi.c **** }
  69:Bsp/periph_spi.c **** 
  70:Bsp/periph_spi.c **** bool periph_SPI_WriteByte(SPI_List SPIx, uint8_t TxData)
  71:Bsp/periph_spi.c **** {
 239              		.loc 1 71 0
 240              		.cfi_startproc
 241              		@ args = 0, pretend = 0, frame = 0
 242              		@ frame_needed = 0, uses_anonymous_args = 0
 243              	.LVL20:
 244 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 245              	.LCFI6:
 246              		.cfi_def_cfa_offset 24
 247              		.cfi_offset 3, -24
 248              		.cfi_offset 4, -20
 249              		.cfi_offset 5, -16
 250              		.cfi_offset 6, -12
 251              		.cfi_offset 7, -8
 252              		.cfi_offset 14, -4
 253 0002 0546     		mov	r5, r0
 254 0004 0F46     		mov	r7, r1
 255              	.LVL21:
  72:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 256              		.loc 1 72 0
 257 0006 0024     		movs	r4, #0
 258              	.LVL22:
 259              	.L17:
  73:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 260              		.loc 1 73 0
 261 0008 0221     		movs	r1, #2
 262 000a 0A4B     		ldr	r3, .L23
 263 000c 53F82500 		ldr	r0, [r3, r5, lsl #2]
 264 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 265              	.LVL23:
 266 0014 30B9     		cbnz	r0, .L22
  74:Bsp/periph_spi.c **** 	{
  75:Bsp/periph_spi.c **** 		retry++;
 267              		.loc 1 75 0
 268 0016 0134     		adds	r4, r4, #1
 269              	.LVL24:
 270 0018 A4B2     		uxth	r4, r4
 271              	.LVL25:
  76:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 272              		.loc 1 76 0
ARM GAS  /tmp/cc6DTiBm.s 			page 7


 273 001a B4F57A7F 		cmp	r4, #1000
 274 001e F3D9     		bls	.L17
  77:Bsp/periph_spi.c **** 			return false;
 275              		.loc 1 77 0
 276 0020 0020     		movs	r0, #0
  78:Bsp/periph_spi.c **** 	}
  79:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], TxData);
  80:Bsp/periph_spi.c **** 	return true;
  81:Bsp/periph_spi.c **** }
 277              		.loc 1 81 0
 278 0022 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 279              	.LVL26:
 280              	.L22:
  79:Bsp/periph_spi.c **** 	return true;
 281              		.loc 1 79 0
 282 0024 3946     		mov	r1, r7
 283 0026 034B     		ldr	r3, .L23
 284 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 285 002c FFF7FEFF 		bl	SPI_I2S_SendData
 286              	.LVL27:
  80:Bsp/periph_spi.c **** }
 287              		.loc 1 80 0
 288 0030 0120     		movs	r0, #1
 289 0032 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 290              	.LVL28:
 291              	.L24:
 292              		.align	2
 293              	.L23:
 294 0034 00000000 		.word	.LANCHOR0
 295              		.cfi_endproc
 296              	.LFE126:
 298              		.section	.text.periph_SPI_ReadByte,"ax",%progbits
 299              		.align	1
 300              		.global	periph_SPI_ReadByte
 301              		.syntax unified
 302              		.thumb
 303              		.thumb_func
 304              		.fpu fpv4-sp-d16
 306              	periph_SPI_ReadByte:
 307              	.LFB127:
  82:Bsp/periph_spi.c **** 
  83:Bsp/periph_spi.c **** bool periph_SPI_ReadByte(SPI_List SPIx, uint8_t *data)
  84:Bsp/periph_spi.c **** {
 308              		.loc 1 84 0
 309              		.cfi_startproc
 310              		@ args = 0, pretend = 0, frame = 0
 311              		@ frame_needed = 0, uses_anonymous_args = 0
 312              	.LVL29:
 313 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 314              	.LCFI7:
 315              		.cfi_def_cfa_offset 24
 316              		.cfi_offset 3, -24
 317              		.cfi_offset 4, -20
 318              		.cfi_offset 5, -16
 319              		.cfi_offset 6, -12
 320              		.cfi_offset 7, -8
 321              		.cfi_offset 14, -4
ARM GAS  /tmp/cc6DTiBm.s 			page 8


 322 0002 0546     		mov	r5, r0
 323 0004 0F46     		mov	r7, r1
 324              	.LVL30:
  85:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 325              		.loc 1 85 0
 326 0006 0024     		movs	r4, #0
 327              	.LVL31:
 328              	.L26:
  86:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 329              		.loc 1 86 0
 330 0008 2E46     		mov	r6, r5
 331 000a 0221     		movs	r1, #2
 332 000c 144B     		ldr	r3, .L36
 333 000e 53F82500 		ldr	r0, [r3, r5, lsl #2]
 334 0012 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 335              	.LVL32:
 336 0016 30B9     		cbnz	r0, .L34
  87:Bsp/periph_spi.c **** 	{
  88:Bsp/periph_spi.c **** 		retry++;
 337              		.loc 1 88 0
 338 0018 0134     		adds	r4, r4, #1
 339              	.LVL33:
 340 001a A4B2     		uxth	r4, r4
 341              	.LVL34:
  89:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 342              		.loc 1 89 0
 343 001c B4F57A7F 		cmp	r4, #1000
 344 0020 F2D9     		bls	.L26
  90:Bsp/periph_spi.c **** 			return false;
 345              		.loc 1 90 0
 346 0022 0020     		movs	r0, #0
 347 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 348              	.LVL35:
 349              	.L34:
  91:Bsp/periph_spi.c **** 	}
  92:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], 0XFF);
 350              		.loc 1 92 0
 351 0026 FF21     		movs	r1, #255
 352 0028 0D4B     		ldr	r3, .L36
 353 002a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 354 002e FFF7FEFF 		bl	SPI_I2S_SendData
 355              	.LVL36:
  93:Bsp/periph_spi.c **** 
  94:Bsp/periph_spi.c **** 	retry = 0;
 356              		.loc 1 94 0
 357 0032 0024     		movs	r4, #0
 358              	.LVL37:
 359              	.L29:
  95:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 360              		.loc 1 95 0
 361 0034 0121     		movs	r1, #1
 362 0036 0A4B     		ldr	r3, .L36
 363 0038 53F82600 		ldr	r0, [r3, r6, lsl #2]
 364 003c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 365              	.LVL38:
 366 0040 30B9     		cbnz	r0, .L35
  96:Bsp/periph_spi.c **** 	{
ARM GAS  /tmp/cc6DTiBm.s 			page 9


  97:Bsp/periph_spi.c **** 		retry++;
 367              		.loc 1 97 0
 368 0042 0134     		adds	r4, r4, #1
 369              	.LVL39:
 370 0044 A4B2     		uxth	r4, r4
 371              	.LVL40:
  98:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 372              		.loc 1 98 0
 373 0046 B4F57A7F 		cmp	r4, #1000
 374 004a F3D9     		bls	.L29
  99:Bsp/periph_spi.c **** 			return false;
 375              		.loc 1 99 0
 376 004c 0020     		movs	r0, #0
 100:Bsp/periph_spi.c **** 	}
 101:Bsp/periph_spi.c **** 	*data = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 102:Bsp/periph_spi.c **** 	return true;
 103:Bsp/periph_spi.c **** }
 377              		.loc 1 103 0
 378 004e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 379              	.LVL41:
 380              	.L35:
 101:Bsp/periph_spi.c **** 	return true;
 381              		.loc 1 101 0
 382 0050 034B     		ldr	r3, .L36
 383 0052 53F82600 		ldr	r0, [r3, r6, lsl #2]
 384 0056 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 385              	.LVL42:
 386 005a 3870     		strb	r0, [r7]
 102:Bsp/periph_spi.c **** }
 387              		.loc 1 102 0
 388 005c 0120     		movs	r0, #1
 389 005e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 390              	.LVL43:
 391              	.L37:
 392              		.align	2
 393              	.L36:
 394 0060 00000000 		.word	.LANCHOR0
 395              		.cfi_endproc
 396              	.LFE127:
 398              		.section	.text.periph_SPI_ReadWriteByte,"ax",%progbits
 399              		.align	1
 400              		.global	periph_SPI_ReadWriteByte
 401              		.syntax unified
 402              		.thumb
 403              		.thumb_func
 404              		.fpu fpv4-sp-d16
 406              	periph_SPI_ReadWriteByte:
 407              	.LFB128:
 104:Bsp/periph_spi.c **** 
 105:Bsp/periph_spi.c **** bool periph_SPI_ReadWriteByte(SPI_List SPIx, uint8_t TxData, uint8_t *RxData)
 106:Bsp/periph_spi.c **** {
 408              		.loc 1 106 0
 409              		.cfi_startproc
 410              		@ args = 0, pretend = 0, frame = 0
 411              		@ frame_needed = 0, uses_anonymous_args = 0
 412              	.LVL44:
 413 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
ARM GAS  /tmp/cc6DTiBm.s 			page 10


 414              	.LCFI8:
 415              		.cfi_def_cfa_offset 24
 416              		.cfi_offset 4, -24
 417              		.cfi_offset 5, -20
 418              		.cfi_offset 6, -16
 419              		.cfi_offset 7, -12
 420              		.cfi_offset 8, -8
 421              		.cfi_offset 14, -4
 422 0004 0546     		mov	r5, r0
 423 0006 8846     		mov	r8, r1
 424 0008 1746     		mov	r7, r2
 425              	.LVL45:
 107:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 426              		.loc 1 107 0
 427 000a 0024     		movs	r4, #0
 428              	.LVL46:
 429              	.L39:
 108:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 430              		.loc 1 108 0
 431 000c 2E46     		mov	r6, r5
 432 000e 0221     		movs	r1, #2
 433 0010 164B     		ldr	r3, .L49
 434 0012 53F82500 		ldr	r0, [r3, r5, lsl #2]
 435 0016 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 436              	.LVL47:
 437 001a 38B9     		cbnz	r0, .L47
 109:Bsp/periph_spi.c **** 	{
 110:Bsp/periph_spi.c **** 		retry++;
 438              		.loc 1 110 0
 439 001c 0134     		adds	r4, r4, #1
 440              	.LVL48:
 441 001e A4B2     		uxth	r4, r4
 442              	.LVL49:
 111:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 443              		.loc 1 111 0
 444 0020 B4F57A7F 		cmp	r4, #1000
 445 0024 F2D9     		bls	.L39
 112:Bsp/periph_spi.c **** 			return false;
 446              		.loc 1 112 0
 447 0026 0020     		movs	r0, #0
 448 0028 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 449              	.LVL50:
 450              	.L47:
 113:Bsp/periph_spi.c **** 	}
 114:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], TxData);
 451              		.loc 1 114 0
 452 002c 4146     		mov	r1, r8
 453 002e 0F4B     		ldr	r3, .L49
 454 0030 53F82500 		ldr	r0, [r3, r5, lsl #2]
 455 0034 FFF7FEFF 		bl	SPI_I2S_SendData
 456              	.LVL51:
 115:Bsp/periph_spi.c **** 
 116:Bsp/periph_spi.c **** 	retry = 0;
 457              		.loc 1 116 0
 458 0038 0024     		movs	r4, #0
 459              	.LVL52:
 460              	.L42:
ARM GAS  /tmp/cc6DTiBm.s 			page 11


 117:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 461              		.loc 1 117 0
 462 003a 0121     		movs	r1, #1
 463 003c 0B4B     		ldr	r3, .L49
 464 003e 53F82600 		ldr	r0, [r3, r6, lsl #2]
 465 0042 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 466              	.LVL53:
 467 0046 38B9     		cbnz	r0, .L48
 118:Bsp/periph_spi.c **** 	{
 119:Bsp/periph_spi.c **** 		retry++;
 468              		.loc 1 119 0
 469 0048 0134     		adds	r4, r4, #1
 470              	.LVL54:
 471 004a A4B2     		uxth	r4, r4
 472              	.LVL55:
 120:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 473              		.loc 1 120 0
 474 004c B4F57A7F 		cmp	r4, #1000
 475 0050 F3D9     		bls	.L42
 121:Bsp/periph_spi.c **** 			return false;
 476              		.loc 1 121 0
 477 0052 0020     		movs	r0, #0
 122:Bsp/periph_spi.c **** 	}
 123:Bsp/periph_spi.c **** 
 124:Bsp/periph_spi.c **** 	*RxData = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 125:Bsp/periph_spi.c **** 
 126:Bsp/periph_spi.c **** 	return true;
 127:Bsp/periph_spi.c **** }
 478              		.loc 1 127 0
 479 0054 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 480              	.LVL56:
 481              	.L48:
 124:Bsp/periph_spi.c **** 
 482              		.loc 1 124 0
 483 0058 044B     		ldr	r3, .L49
 484 005a 53F82600 		ldr	r0, [r3, r6, lsl #2]
 485 005e FFF7FEFF 		bl	SPI_I2S_ReceiveData
 486              	.LVL57:
 487 0062 3870     		strb	r0, [r7]
 126:Bsp/periph_spi.c **** }
 488              		.loc 1 126 0
 489 0064 0120     		movs	r0, #1
 490 0066 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 491              	.LVL58:
 492              	.L50:
 493 006a 00BF     		.align	2
 494              	.L49:
 495 006c 00000000 		.word	.LANCHOR0
 496              		.cfi_endproc
 497              	.LFE128:
 499              		.section	.text.periph_SPI_Transfer,"ax",%progbits
 500              		.align	1
 501              		.global	periph_SPI_Transfer
 502              		.syntax unified
 503              		.thumb
 504              		.thumb_func
 505              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc6DTiBm.s 			page 12


 507              	periph_SPI_Transfer:
 508              	.LFB129:
 128:Bsp/periph_spi.c **** 
 129:Bsp/periph_spi.c **** uint16_t periph_SPI_Transfer(SPI_List SPIx, uint8_t *rx, uint8_t *tx, uint16_t len)
 130:Bsp/periph_spi.c **** {
 509              		.loc 1 130 0
 510              		.cfi_startproc
 511              		@ args = 0, pretend = 0, frame = 0
 512              		@ frame_needed = 0, uses_anonymous_args = 0
 513              	.LVL59:
 514 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 515              	.LCFI9:
 516              		.cfi_def_cfa_offset 32
 517              		.cfi_offset 3, -32
 518              		.cfi_offset 4, -28
 519              		.cfi_offset 5, -24
 520              		.cfi_offset 6, -20
 521              		.cfi_offset 7, -16
 522              		.cfi_offset 8, -12
 523              		.cfi_offset 9, -8
 524              		.cfi_offset 14, -4
 525 0004 0F46     		mov	r7, r1
 526              	.LVL60:
 131:Bsp/periph_spi.c **** 	uint16_t spitimeout = SPI_TIMEOUT;
 132:Bsp/periph_spi.c **** 	uint8_t b;
 133:Bsp/periph_spi.c **** 	SPI_PORT[SPIx]->DR;
 527              		.loc 1 133 0
 528 0006 0546     		mov	r5, r0
 529 0008 2049     		ldr	r1, .L66
 530              	.LVL61:
 531 000a 51F82010 		ldr	r1, [r1, r0, lsl #2]
 532 000e 8989     		ldrh	r1, [r1, #12]
 131:Bsp/periph_spi.c **** 	uint16_t spitimeout = SPI_TIMEOUT;
 533              		.loc 1 131 0
 534 0010 4FF47A74 		mov	r4, #1000
 535              	.LVL62:
 536              	.L52:
 134:Bsp/periph_spi.c **** 	while (len--)
 537              		.loc 1 134 0
 538 0014 5E1E     		subs	r6, r3, #1
 539 0016 B6B2     		uxth	r6, r6
 540              	.LVL63:
 541 0018 A3B3     		cbz	r3, .L63
 135:Bsp/periph_spi.c **** 	{
 136:Bsp/periph_spi.c **** 		b = tx ? *(tx++) : 0xff;
 542              		.loc 1 136 0
 543 001a 7AB1     		cbz	r2, .L61
 544              		.loc 1 136 0 is_stmt 0 discriminator 1
 545 001c 02F10108 		add	r8, r2, #1
 546              	.LVL64:
 547 0020 92F80090 		ldrb	r9, [r2]	@ zero_extendqisi2
 548              	.LVL65:
 549              	.L54:
 137:Bsp/periph_spi.c **** 
 138:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 550              		.loc 1 138 0 is_stmt 1
 551 0024 0221     		movs	r1, #2
ARM GAS  /tmp/cc6DTiBm.s 			page 13


 552 0026 194B     		ldr	r3, .L66
 553 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 554 002c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 555              	.LVL66:
 556 0030 40B9     		cbnz	r0, .L64
 139:Bsp/periph_spi.c **** 		{
 140:Bsp/periph_spi.c **** 			if ((spitimeout--) == 0)
 557              		.loc 1 140 0
 558 0032 631E     		subs	r3, r4, #1
 559 0034 9BB2     		uxth	r3, r3
 560              	.LVL67:
 561 0036 34B3     		cbz	r4, .L55
 562 0038 1C46     		mov	r4, r3
 563 003a F3E7     		b	.L54
 564              	.LVL68:
 565              	.L61:
 566 003c 9046     		mov	r8, r2
 136:Bsp/periph_spi.c **** 
 567              		.loc 1 136 0
 568 003e 4FF0FF09 		mov	r9, #255
 569              	.LVL69:
 138:Bsp/periph_spi.c **** 		{
 570              		.loc 1 138 0
 571 0042 EFE7     		b	.L54
 572              	.LVL70:
 573              	.L64:
 141:Bsp/periph_spi.c **** 			{
 142:Bsp/periph_spi.c **** 				return 0;
 143:Bsp/periph_spi.c **** 			}
 144:Bsp/periph_spi.c **** 		}
 145:Bsp/periph_spi.c **** 		SPI_I2S_SendData(SPI_PORT[SPIx], b);
 574              		.loc 1 145 0
 575 0044 4946     		mov	r1, r9
 576 0046 114B     		ldr	r3, .L66
 577 0048 53F82500 		ldr	r0, [r3, r5, lsl #2]
 578 004c FFF7FEFF 		bl	SPI_I2S_SendData
 579              	.LVL71:
 146:Bsp/periph_spi.c **** 
 147:Bsp/periph_spi.c **** 		spitimeout = SPI_TIMEOUT;
 580              		.loc 1 147 0
 581 0050 4FF47A74 		mov	r4, #1000
 582              	.LVL72:
 583              	.L57:
 148:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 584              		.loc 1 148 0
 585 0054 0121     		movs	r1, #1
 586 0056 0D4B     		ldr	r3, .L66
 587 0058 53F82500 		ldr	r0, [r3, r5, lsl #2]
 588 005c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 589              	.LVL73:
 590 0060 20B9     		cbnz	r0, .L65
 149:Bsp/periph_spi.c **** 		{
 150:Bsp/periph_spi.c **** 			if ((spitimeout--) == 0)
 591              		.loc 1 150 0
 592 0062 631E     		subs	r3, r4, #1
 593 0064 9BB2     		uxth	r3, r3
 594              	.LVL74:
ARM GAS  /tmp/cc6DTiBm.s 			page 14


 595 0066 74B1     		cbz	r4, .L55
 596 0068 1C46     		mov	r4, r3
 597 006a F3E7     		b	.L57
 598              	.LVL75:
 599              	.L65:
 151:Bsp/periph_spi.c **** 			{
 152:Bsp/periph_spi.c **** 				return 0;
 153:Bsp/periph_spi.c **** 			}
 154:Bsp/periph_spi.c **** 		}
 155:Bsp/periph_spi.c **** 
 156:Bsp/periph_spi.c **** 		b = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 600              		.loc 1 156 0
 601 006c 074B     		ldr	r3, .L66
 602 006e 53F82500 		ldr	r0, [r3, r5, lsl #2]
 603 0072 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 604              	.LVL76:
 605 0076 C0B2     		uxtb	r0, r0
 606              	.LVL77:
 157:Bsp/periph_spi.c **** 		if (rx)
 607              		.loc 1 157 0
 608 0078 0FB1     		cbz	r7, .L59
 609              	.LVL78:
 158:Bsp/periph_spi.c **** 		{
 159:Bsp/periph_spi.c **** 			*(rx++) = b;
 610              		.loc 1 159 0
 611 007a 3870     		strb	r0, [r7]
 612 007c 0137     		adds	r7, r7, #1
 613              	.LVL79:
 614              	.L59:
 615 007e 3346     		mov	r3, r6
 616 0080 4246     		mov	r2, r8
 617 0082 C7E7     		b	.L52
 618              	.LVL80:
 619              	.L63:
 160:Bsp/periph_spi.c **** 		}
 161:Bsp/periph_spi.c **** 	}
 162:Bsp/periph_spi.c **** 	return len;
 620              		.loc 1 162 0
 621 0084 3446     		mov	r4, r6
 622              	.LVL81:
 623              	.L55:
 163:Bsp/periph_spi.c **** }
 624              		.loc 1 163 0
 625 0086 2046     		mov	r0, r4
 626 0088 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 627              	.LVL82:
 628              	.L67:
 629              		.align	2
 630              	.L66:
 631 008c 00000000 		.word	.LANCHOR0
 632              		.cfi_endproc
 633              	.LFE129:
 635              		.section	.text.periph_SPI_CheckBusy,"ax",%progbits
 636              		.align	1
 637              		.global	periph_SPI_CheckBusy
 638              		.syntax unified
 639              		.thumb
ARM GAS  /tmp/cc6DTiBm.s 			page 15


 640              		.thumb_func
 641              		.fpu fpv4-sp-d16
 643              	periph_SPI_CheckBusy:
 644              	.LFB130:
 164:Bsp/periph_spi.c **** 
 165:Bsp/periph_spi.c **** uint8_t periph_SPI_CheckBusy(SPI_List SPIx)
 166:Bsp/periph_spi.c **** {
 645              		.loc 1 166 0
 646              		.cfi_startproc
 647              		@ args = 0, pretend = 0, frame = 0
 648              		@ frame_needed = 0, uses_anonymous_args = 0
 649              	.LVL83:
 650 0000 10B5     		push	{r4, lr}
 651              	.LCFI10:
 652              		.cfi_def_cfa_offset 8
 653              		.cfi_offset 4, -8
 654              		.cfi_offset 14, -4
 655 0002 0446     		mov	r4, r0
 167:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 656              		.loc 1 167 0
 657 0004 0221     		movs	r1, #2
 658 0006 0A4B     		ldr	r3, .L74
 659 0008 53F82000 		ldr	r0, [r3, r0, lsl #2]
 660              	.LVL84:
 661 000c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 662              	.LVL85:
 663 0010 08B9     		cbnz	r0, .L73
 664 0012 0120     		movs	r0, #1
 665 0014 10BD     		pop	{r4, pc}
 666              	.L73:
 667              		.loc 1 167 0 is_stmt 0 discriminator 2
 668 0016 8021     		movs	r1, #128
 669 0018 054B     		ldr	r3, .L74
 670 001a 53F82400 		ldr	r0, [r3, r4, lsl #2]
 671 001e FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 672              	.LVL86:
 673 0022 0128     		cmp	r0, #1
 674 0024 01D0     		beq	.L71
 675              		.loc 1 167 0
 676 0026 0020     		movs	r0, #0
 677 0028 10BD     		pop	{r4, pc}
 678              	.L71:
 679 002a 0120     		movs	r0, #1
 168:Bsp/periph_spi.c **** }
 680              		.loc 1 168 0 is_stmt 1
 681 002c 10BD     		pop	{r4, pc}
 682              	.L75:
 683 002e 00BF     		.align	2
 684              	.L74:
 685 0030 00000000 		.word	.LANCHOR0
 686              		.cfi_endproc
 687              	.LFE130:
 689              		.global	SpiErrorCount2
 690              		.global	SpiErrorCount
 691              		.section	.bss.SpiErrorCount,"aw",%nobits
 692              		.align	1
 695              	SpiErrorCount:
ARM GAS  /tmp/cc6DTiBm.s 			page 16


 696 0000 0000     		.space	2
 697              		.section	.bss.SpiErrorCount2,"aw",%nobits
 698              		.align	1
 701              	SpiErrorCount2:
 702 0000 0000     		.space	2
 703              		.section	.rodata.SPI_CLK,"a",%progbits
 704              		.align	2
 705              		.set	.LANCHOR2,. + 0
 708              	SPI_CLK:
 709 0000 00100000 		.word	4096
 710 0004 00400000 		.word	16384
 711 0008 00800000 		.word	32768
 712              		.section	.rodata.SPI_IO_Init,"a",%progbits
 713              		.align	2
 714              		.set	.LANCHOR1,. + 0
 717              	SPI_IO_Init:
 718 0000 00000000 		.word	GPIO_SPI1_IO_Init
 719 0004 00000000 		.word	GPIO_SPI2_IO_Init
 720 0008 00000000 		.word	GPIO_SPI3_IO_Init
 721              		.section	.rodata.SPI_PORT,"a",%progbits
 722              		.align	2
 723              		.set	.LANCHOR0,. + 0
 726              	SPI_PORT:
 727 0000 00300140 		.word	1073819648
 728 0004 00380040 		.word	1073756160
 729 0008 003C0040 		.word	1073757184
 730              		.section	.rodata.divisorMap,"a",%progbits
 731              		.align	2
 732              		.set	.LANCHOR3,. + 0
 735              	divisorMap:
 736 0000 3800     		.short	56
 737 0002 3000     		.short	48
 738 0004 1000     		.short	16
 739 0006 0800     		.short	8
 740 0008 0000     		.short	0
 741              		.text
 742              	.Letext0:
 743              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 744              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 745              		.file 4 "F4_CORE/core_cm4.h"
 746              		.file 5 "USER/system_stm32f4xx.h"
 747              		.file 6 "USER/stm32f4xx.h"
 748              		.file 7 "FWLIB/inc/stm32f4xx_spi.h"
 749              		.file 8 "Bsp/periph_spi.h"
 750              		.file 9 "FWLIB/inc/stm32f4xx_rcc.h"
ARM GAS  /tmp/cc6DTiBm.s 			page 17


DEFINED SYMBOLS
                            *ABS*:0000000000000000 periph_spi.c
     /tmp/cc6DTiBm.s:18     .text.periph_SPI_DeInit:0000000000000000 $t
     /tmp/cc6DTiBm.s:25     .text.periph_SPI_DeInit:0000000000000000 periph_SPI_DeInit
     /tmp/cc6DTiBm.s:48     .text.periph_SPI_DeInit:0000000000000010 $d
     /tmp/cc6DTiBm.s:53     .text.periph_SPI_Init:0000000000000000 $t
     /tmp/cc6DTiBm.s:60     .text.periph_SPI_Init:0000000000000000 periph_SPI_Init
     /tmp/cc6DTiBm.s:162    .text.periph_SPI_Init:0000000000000090 $d
     /tmp/cc6DTiBm.s:170    .text.periph_SPI_SetSpeed:0000000000000000 $t
     /tmp/cc6DTiBm.s:177    .text.periph_SPI_SetSpeed:0000000000000000 periph_SPI_SetSpeed
     /tmp/cc6DTiBm.s:224    .text.periph_SPI_SetSpeed:0000000000000030 $d
     /tmp/cc6DTiBm.s:230    .text.periph_SPI_WriteByte:0000000000000000 $t
     /tmp/cc6DTiBm.s:237    .text.periph_SPI_WriteByte:0000000000000000 periph_SPI_WriteByte
     /tmp/cc6DTiBm.s:294    .text.periph_SPI_WriteByte:0000000000000034 $d
     /tmp/cc6DTiBm.s:299    .text.periph_SPI_ReadByte:0000000000000000 $t
     /tmp/cc6DTiBm.s:306    .text.periph_SPI_ReadByte:0000000000000000 periph_SPI_ReadByte
     /tmp/cc6DTiBm.s:394    .text.periph_SPI_ReadByte:0000000000000060 $d
     /tmp/cc6DTiBm.s:399    .text.periph_SPI_ReadWriteByte:0000000000000000 $t
     /tmp/cc6DTiBm.s:406    .text.periph_SPI_ReadWriteByte:0000000000000000 periph_SPI_ReadWriteByte
     /tmp/cc6DTiBm.s:495    .text.periph_SPI_ReadWriteByte:000000000000006c $d
     /tmp/cc6DTiBm.s:500    .text.periph_SPI_Transfer:0000000000000000 $t
     /tmp/cc6DTiBm.s:507    .text.periph_SPI_Transfer:0000000000000000 periph_SPI_Transfer
     /tmp/cc6DTiBm.s:631    .text.periph_SPI_Transfer:000000000000008c $d
     /tmp/cc6DTiBm.s:636    .text.periph_SPI_CheckBusy:0000000000000000 $t
     /tmp/cc6DTiBm.s:643    .text.periph_SPI_CheckBusy:0000000000000000 periph_SPI_CheckBusy
     /tmp/cc6DTiBm.s:685    .text.periph_SPI_CheckBusy:0000000000000030 $d
     /tmp/cc6DTiBm.s:701    .bss.SpiErrorCount2:0000000000000000 SpiErrorCount2
     /tmp/cc6DTiBm.s:695    .bss.SpiErrorCount:0000000000000000 SpiErrorCount
     /tmp/cc6DTiBm.s:692    .bss.SpiErrorCount:0000000000000000 $d
     /tmp/cc6DTiBm.s:698    .bss.SpiErrorCount2:0000000000000000 $d
     /tmp/cc6DTiBm.s:704    .rodata.SPI_CLK:0000000000000000 $d
     /tmp/cc6DTiBm.s:708    .rodata.SPI_CLK:0000000000000000 SPI_CLK
     /tmp/cc6DTiBm.s:713    .rodata.SPI_IO_Init:0000000000000000 $d
     /tmp/cc6DTiBm.s:717    .rodata.SPI_IO_Init:0000000000000000 SPI_IO_Init
     /tmp/cc6DTiBm.s:722    .rodata.SPI_PORT:0000000000000000 $d
     /tmp/cc6DTiBm.s:726    .rodata.SPI_PORT:0000000000000000 SPI_PORT
     /tmp/cc6DTiBm.s:731    .rodata.divisorMap:0000000000000000 $d
     /tmp/cc6DTiBm.s:735    .rodata.divisorMap:0000000000000000 divisorMap
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
SPI_I2S_DeInit
RCC_APB1PeriphClockCmd
SPI_Cmd
SPI_Init
RCC_APB2PeriphClockCmd
SPI_I2S_GetFlagStatus
SPI_I2S_SendData
SPI_I2S_ReceiveData
GPIO_SPI1_IO_Init
GPIO_SPI2_IO_Init
GPIO_SPI3_IO_Init
