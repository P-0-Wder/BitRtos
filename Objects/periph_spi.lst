ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"periph_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.periph_SPI_DeInit,"ax",%progbits
  18              		.align	1
  19              		.global	periph_SPI_DeInit
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	periph_SPI_DeInit:
  27              	.LVL0:
  28              	.LFB123:
  29              		.file 1 "Bsp/periph_spi.c"
   1:Bsp/periph_spi.c **** #include "stm32f4xx_spi.h"
   2:Bsp/periph_spi.c **** #include "periph_gpio.h"
   3:Bsp/periph_spi.c **** #include "periph_spi.h"
   4:Bsp/periph_spi.c **** 
   5:Bsp/periph_spi.c **** u16 SpiErrorCount = 0;
   6:Bsp/periph_spi.c **** u16 SpiErrorCount2 = 0;
   7:Bsp/periph_spi.c **** 
   8:Bsp/periph_spi.c **** static void (*SPI_IO_Init[SPI_PORT_SUM])() = {GPIO_SPI1_IO_Init, GPIO_SPI2_IO_Init, GPIO_SPI3_IO_In
   9:Bsp/periph_spi.c **** 
  10:Bsp/periph_spi.c **** static SPI_TypeDef *SPI_PORT[SPI_PORT_SUM] = {SPI1, SPI2, SPI3};
  11:Bsp/periph_spi.c **** 
  12:Bsp/periph_spi.c **** static uint32_t SPI_CLK[SPI_PORT_SUM] = {RCC_APB2Periph_SPI1, RCC_APB1Periph_SPI2, RCC_APB1Periph_S
  13:Bsp/periph_spi.c **** 
  14:Bsp/periph_spi.c **** static const uint16_t divisorMap[] = {
  15:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_256, // SPI_CLOCK_INITIALIZATON      328.125 KBits/s
  16:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_128, // SPI_CLOCK_SLOW               656.25 KBits/s
  17:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_8,   // SPI_CLOCK_STANDARD           10.5 MBits/s
  18:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_4,   // SPI_CLOCK_FAST               21.0 MBits/s
  19:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_2	   // SPI_CLOCK_ULTRAFAST          42.0 MBits/s
  20:Bsp/periph_spi.c **** };
  21:Bsp/periph_spi.c **** 
  22:Bsp/periph_spi.c **** void periph_SPI_DeInit(SPI_List SPIx)
  23:Bsp/periph_spi.c **** {
  30              		.loc 1 23 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 23 1 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 2


  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
  24:Bsp/periph_spi.c **** 	SPI_I2S_DeInit(SPI_PORT[SPIx]);
  40              		.loc 1 24 2 is_stmt 1 view .LVU2
  41 0002 034B     		ldr	r3, .L3
  42 0004 53F82000 		ldr	r0, [r3, r0, lsl #2]
  43              	.LVL1:
  44              		.loc 1 24 2 is_stmt 0 view .LVU3
  45 0008 FFF7FEFF 		bl	SPI_I2S_DeInit
  46              	.LVL2:
  25:Bsp/periph_spi.c **** }
  47              		.loc 1 25 1 view .LVU4
  48 000c 08BD     		pop	{r3, pc}
  49              	.L4:
  50 000e 00BF     		.align	2
  51              	.L3:
  52 0010 00000000 		.word	.LANCHOR0
  53              		.cfi_endproc
  54              	.LFE123:
  56              		.section	.text.periph_SPI_Init,"ax",%progbits
  57              		.align	1
  58              		.global	periph_SPI_Init
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  62              		.fpu fpv4-sp-d16
  64              	periph_SPI_Init:
  65              	.LVL3:
  66              	.LFB124:
  26:Bsp/periph_spi.c **** 
  27:Bsp/periph_spi.c **** void periph_SPI_Init(SPI_List SPIx, SPIClockSpeed_e speed, uint16_t CPOL, uint16_t CPHA)
  28:Bsp/periph_spi.c **** {
  67              		.loc 1 28 1 is_stmt 1 view -0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 24
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              		.loc 1 28 1 is_stmt 0 view .LVU6
  72 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  73              	.LCFI1:
  74              		.cfi_def_cfa_offset 20
  75              		.cfi_offset 4, -20
  76              		.cfi_offset 5, -16
  77              		.cfi_offset 6, -12
  78              		.cfi_offset 7, -8
  79              		.cfi_offset 14, -4
  80 0002 87B0     		sub	sp, sp, #28
  81              	.LCFI2:
  82              		.cfi_def_cfa_offset 48
  83 0004 0446     		mov	r4, r0
  84 0006 0D46     		mov	r5, r1
  85 0008 1746     		mov	r7, r2
  86 000a 1E46     		mov	r6, r3
  29:Bsp/periph_spi.c **** 	SPI_InitTypeDef SPI_InitStructure;
  87              		.loc 1 29 2 is_stmt 1 view .LVU7
  30:Bsp/periph_spi.c **** 	SPI_IO_Init[SPIx]();
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 3


  88              		.loc 1 30 2 view .LVU8
  89              		.loc 1 30 13 is_stmt 0 view .LVU9
  90 000c 204B     		ldr	r3, .L9
  91              	.LVL4:
  92              		.loc 1 30 13 view .LVU10
  93 000e 53F82030 		ldr	r3, [r3, r0, lsl #2]
  94              		.loc 1 30 2 view .LVU11
  95 0012 9847     		blx	r3
  96              	.LVL5:
  31:Bsp/periph_spi.c **** 
  32:Bsp/periph_spi.c **** 	if (SPIx == SPI_1)
  97              		.loc 1 32 2 is_stmt 1 view .LVU12
  98              		.loc 1 32 5 is_stmt 0 view .LVU13
  99 0014 A4BB     		cbnz	r4, .L6
  33:Bsp/periph_spi.c **** 	{
  34:Bsp/periph_spi.c **** 		RCC_APB2PeriphClockCmd(SPI_CLK[SPIx], ENABLE);
 100              		.loc 1 34 3 is_stmt 1 view .LVU14
 101 0016 0121     		movs	r1, #1
 102 0018 1E4B     		ldr	r3, .L9+4
 103 001a 53F82400 		ldr	r0, [r3, r4, lsl #2]
 104 001e FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 105              	.LVL6:
 106              	.L7:
  35:Bsp/periph_spi.c **** 	}
  36:Bsp/periph_spi.c **** 	else
  37:Bsp/periph_spi.c **** 	{
  38:Bsp/periph_spi.c **** 		RCC_APB1PeriphClockCmd(SPI_CLK[SPIx], ENABLE);
  39:Bsp/periph_spi.c **** 	}
  40:Bsp/periph_spi.c **** 
  41:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CPOL = CPOL;
 107              		.loc 1 41 2 view .LVU15
 108              		.loc 1 41 29 is_stmt 0 view .LVU16
 109 0022 ADF80A70 		strh	r7, [sp, #10]	@ movhi
  42:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CPHA = CPHA;
 110              		.loc 1 42 2 is_stmt 1 view .LVU17
 111              		.loc 1 42 29 is_stmt 0 view .LVU18
 112 0026 ADF80C60 		strh	r6, [sp, #12]	@ movhi
  43:Bsp/periph_spi.c **** 
  44:Bsp/periph_spi.c **** 	SPI_I2S_DeInit(SPI_PORT[SPIx]);
 113              		.loc 1 44 2 is_stmt 1 view .LVU19
 114 002a 1B4B     		ldr	r3, .L9+8
 115 002c 53F82440 		ldr	r4, [r3, r4, lsl #2]
 116 0030 2046     		mov	r0, r4
 117 0032 FFF7FEFF 		bl	SPI_I2S_DeInit
 118              	.LVL7:
  45:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], DISABLE);
 119              		.loc 1 45 2 view .LVU20
 120 0036 0021     		movs	r1, #0
 121 0038 2046     		mov	r0, r4
 122 003a FFF7FEFF 		bl	SPI_Cmd
 123              	.LVL8:
  46:Bsp/periph_spi.c **** 
  47:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
 124              		.loc 1 47 2 view .LVU21
 125              		.loc 1 47 29 is_stmt 0 view .LVU22
 126 003e 4FF48273 		mov	r3, #260
 127 0042 ADF80630 		strh	r3, [sp, #6]	@ movhi
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 4


  48:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;
 128              		.loc 1 48 2 is_stmt 1 view .LVU23
 129              		.loc 1 48 34 is_stmt 0 view .LVU24
 130 0046 0023     		movs	r3, #0
 131 0048 ADF80430 		strh	r3, [sp, #4]	@ movhi
  49:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
 132              		.loc 1 49 2 is_stmt 1 view .LVU25
 133              		.loc 1 49 33 is_stmt 0 view .LVU26
 134 004c ADF80830 		strh	r3, [sp, #8]	@ movhi
  50:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
 135              		.loc 1 50 2 is_stmt 1 view .LVU27
 136              		.loc 1 50 28 is_stmt 0 view .LVU28
 137 0050 4FF40072 		mov	r2, #512
 138 0054 ADF80E20 		strh	r2, [sp, #14]	@ movhi
  51:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
 139              		.loc 1 51 2 is_stmt 1 view .LVU29
 140              		.loc 1 51 33 is_stmt 0 view .LVU30
 141 0058 ADF81230 		strh	r3, [sp, #18]	@ movhi
  52:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CRCPolynomial = 7;
 142              		.loc 1 52 2 is_stmt 1 view .LVU31
 143              		.loc 1 52 38 is_stmt 0 view .LVU32
 144 005c 0723     		movs	r3, #7
 145 005e ADF81430 		strh	r3, [sp, #20]	@ movhi
  53:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_BaudRatePrescaler = divisorMap[(uint8_t)speed];
 146              		.loc 1 53 2 is_stmt 1 view .LVU33
 147              		.loc 1 53 54 is_stmt 0 view .LVU34
 148 0062 0E4B     		ldr	r3, .L9+12
 149 0064 33F81530 		ldrh	r3, [r3, r5, lsl #1]
 150              		.loc 1 53 42 view .LVU35
 151 0068 ADF81030 		strh	r3, [sp, #16]	@ movhi
  54:Bsp/periph_spi.c **** 	SPI_Init(SPI_PORT[SPIx], &SPI_InitStructure);
 152              		.loc 1 54 2 is_stmt 1 view .LVU36
 153 006c 01A9     		add	r1, sp, #4
 154 006e 2046     		mov	r0, r4
 155 0070 FFF7FEFF 		bl	SPI_Init
 156              	.LVL9:
  55:Bsp/periph_spi.c **** 
  56:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], ENABLE);
 157              		.loc 1 56 2 view .LVU37
 158 0074 0121     		movs	r1, #1
 159 0076 2046     		mov	r0, r4
 160 0078 FFF7FEFF 		bl	SPI_Cmd
 161              	.LVL10:
  57:Bsp/periph_spi.c **** }
 162              		.loc 1 57 1 is_stmt 0 view .LVU38
 163 007c 07B0     		add	sp, sp, #28
 164              	.LCFI3:
 165              		.cfi_remember_state
 166              		.cfi_def_cfa_offset 20
 167              		@ sp needed
 168 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 169              	.L6:
 170              	.LCFI4:
 171              		.cfi_restore_state
  38:Bsp/periph_spi.c **** 	}
 172              		.loc 1 38 3 is_stmt 1 view .LVU39
 173 0080 0121     		movs	r1, #1
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 5


 174 0082 044B     		ldr	r3, .L9+4
 175 0084 53F82400 		ldr	r0, [r3, r4, lsl #2]
 176 0088 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 177              	.LVL11:
 178 008c C9E7     		b	.L7
 179              	.L10:
 180 008e 00BF     		.align	2
 181              	.L9:
 182 0090 00000000 		.word	.LANCHOR1
 183 0094 00000000 		.word	.LANCHOR2
 184 0098 00000000 		.word	.LANCHOR0
 185 009c 00000000 		.word	.LANCHOR3
 186              		.cfi_endproc
 187              	.LFE124:
 189              		.section	.text.periph_SPI_SetSpeed,"ax",%progbits
 190              		.align	1
 191              		.global	periph_SPI_SetSpeed
 192              		.syntax unified
 193              		.thumb
 194              		.thumb_func
 195              		.fpu fpv4-sp-d16
 197              	periph_SPI_SetSpeed:
 198              	.LVL12:
 199              	.LFB125:
  58:Bsp/periph_spi.c **** 
  59:Bsp/periph_spi.c **** void periph_SPI_SetSpeed(SPI_List SPIx, SPIClockSpeed_e speed)
  60:Bsp/periph_spi.c **** {
 200              		.loc 1 60 1 view -0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204              		.loc 1 60 1 is_stmt 0 view .LVU41
 205 0000 38B5     		push	{r3, r4, r5, lr}
 206              	.LCFI5:
 207              		.cfi_def_cfa_offset 16
 208              		.cfi_offset 3, -16
 209              		.cfi_offset 4, -12
 210              		.cfi_offset 5, -8
 211              		.cfi_offset 14, -4
 212 0002 0D46     		mov	r5, r1
  61:Bsp/periph_spi.c **** #define BR_CLEAR_MASK 0xFFC7
  62:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], DISABLE);
 213              		.loc 1 62 2 is_stmt 1 view .LVU42
 214 0004 0A4B     		ldr	r3, .L13
 215 0006 53F82040 		ldr	r4, [r3, r0, lsl #2]
 216 000a 0021     		movs	r1, #0
 217              	.LVL13:
 218              		.loc 1 62 2 is_stmt 0 view .LVU43
 219 000c 2046     		mov	r0, r4
 220              	.LVL14:
 221              		.loc 1 62 2 view .LVU44
 222 000e FFF7FEFF 		bl	SPI_Cmd
 223              	.LVL15:
  63:Bsp/periph_spi.c **** 
  64:Bsp/periph_spi.c **** 	uint16_t tempRegister = SPI_PORT[SPIx]->CR1;
 224              		.loc 1 64 2 is_stmt 1 view .LVU45
 225              		.loc 1 64 11 is_stmt 0 view .LVU46
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 6


 226 0012 2388     		ldrh	r3, [r4]
 227 0014 9BB2     		uxth	r3, r3
 228              	.LVL16:
  65:Bsp/periph_spi.c **** 	tempRegister &= BR_CLEAR_MASK;
 229              		.loc 1 65 2 is_stmt 1 view .LVU47
 230              		.loc 1 65 15 is_stmt 0 view .LVU48
 231 0016 23F03803 		bic	r3, r3, #56
 232              	.LVL17:
  66:Bsp/periph_spi.c **** 	tempRegister |= divisorMap[speed];
 233              		.loc 1 66 2 is_stmt 1 view .LVU49
 234              		.loc 1 66 28 is_stmt 0 view .LVU50
 235 001a 064A     		ldr	r2, .L13+4
 236 001c 32F81520 		ldrh	r2, [r2, r5, lsl #1]
 237              		.loc 1 66 15 view .LVU51
 238 0020 1343     		orrs	r3, r3, r2
 239              	.LVL18:
  67:Bsp/periph_spi.c **** 	SPI_PORT[SPIx]->CR1 = tempRegister;
 240              		.loc 1 67 2 is_stmt 1 view .LVU52
 241              		.loc 1 67 22 is_stmt 0 view .LVU53
 242 0022 2380     		strh	r3, [r4]	@ movhi
  68:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], ENABLE);
 243              		.loc 1 68 2 is_stmt 1 view .LVU54
 244 0024 0121     		movs	r1, #1
 245 0026 2046     		mov	r0, r4
 246 0028 FFF7FEFF 		bl	SPI_Cmd
 247              	.LVL19:
  69:Bsp/periph_spi.c **** }
 248              		.loc 1 69 1 is_stmt 0 view .LVU55
 249 002c 38BD     		pop	{r3, r4, r5, pc}
 250              	.L14:
 251 002e 00BF     		.align	2
 252              	.L13:
 253 0030 00000000 		.word	.LANCHOR0
 254 0034 00000000 		.word	.LANCHOR3
 255              		.cfi_endproc
 256              	.LFE125:
 258              		.section	.text.periph_SPI_WriteByte,"ax",%progbits
 259              		.align	1
 260              		.global	periph_SPI_WriteByte
 261              		.syntax unified
 262              		.thumb
 263              		.thumb_func
 264              		.fpu fpv4-sp-d16
 266              	periph_SPI_WriteByte:
 267              	.LVL20:
 268              	.LFB126:
  70:Bsp/periph_spi.c **** 
  71:Bsp/periph_spi.c **** bool periph_SPI_WriteByte(SPI_List SPIx, uint8_t TxData)
  72:Bsp/periph_spi.c **** {
 269              		.loc 1 72 1 is_stmt 1 view -0
 270              		.cfi_startproc
 271              		@ args = 0, pretend = 0, frame = 0
 272              		@ frame_needed = 0, uses_anonymous_args = 0
 273              		.loc 1 72 1 is_stmt 0 view .LVU57
 274 0000 70B5     		push	{r4, r5, r6, lr}
 275              	.LCFI6:
 276              		.cfi_def_cfa_offset 16
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 7


 277              		.cfi_offset 4, -16
 278              		.cfi_offset 5, -12
 279              		.cfi_offset 6, -8
 280              		.cfi_offset 14, -4
 281 0002 0546     		mov	r5, r0
 282 0004 0E46     		mov	r6, r1
  73:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 283              		.loc 1 73 2 is_stmt 1 view .LVU58
 284              	.LVL21:
  74:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 285              		.loc 1 74 2 view .LVU59
  73:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 286              		.loc 1 73 11 is_stmt 0 view .LVU60
 287 0006 0024     		movs	r4, #0
 288              	.LVL22:
 289              	.L16:
 290              		.loc 1 74 8 is_stmt 1 view .LVU61
 291              		.loc 1 74 9 is_stmt 0 view .LVU62
 292 0008 0221     		movs	r1, #2
 293 000a 0A4B     		ldr	r3, .L22
 294 000c 53F82500 		ldr	r0, [r3, r5, lsl #2]
 295 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 296              	.LVL23:
 297              		.loc 1 74 8 view .LVU63
 298 0014 30B9     		cbnz	r0, .L21
  75:Bsp/periph_spi.c **** 	{
  76:Bsp/periph_spi.c **** 		retry++;
 299              		.loc 1 76 3 is_stmt 1 view .LVU64
 300              		.loc 1 76 8 is_stmt 0 view .LVU65
 301 0016 0134     		adds	r4, r4, #1
 302              	.LVL24:
 303              		.loc 1 76 8 view .LVU66
 304 0018 A4B2     		uxth	r4, r4
 305              	.LVL25:
  77:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 306              		.loc 1 77 3 is_stmt 1 view .LVU67
 307              		.loc 1 77 6 is_stmt 0 view .LVU68
 308 001a B4F57A7F 		cmp	r4, #1000
 309 001e F3D9     		bls	.L16
  78:Bsp/periph_spi.c **** 			return false;
 310              		.loc 1 78 11 view .LVU69
 311 0020 0020     		movs	r0, #0
 312 0022 06E0     		b	.L17
 313              	.L21:
  79:Bsp/periph_spi.c **** 	}
  80:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], TxData);
 314              		.loc 1 80 2 is_stmt 1 view .LVU70
 315 0024 3146     		mov	r1, r6
 316 0026 034B     		ldr	r3, .L22
 317 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 318 002c FFF7FEFF 		bl	SPI_I2S_SendData
 319              	.LVL26:
  81:Bsp/periph_spi.c **** 	return true;
 320              		.loc 1 81 2 view .LVU71
 321              		.loc 1 81 9 is_stmt 0 view .LVU72
 322 0030 0120     		movs	r0, #1
 323              	.L17:
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 8


  82:Bsp/periph_spi.c **** }
 324              		.loc 1 82 1 view .LVU73
 325 0032 70BD     		pop	{r4, r5, r6, pc}
 326              	.LVL27:
 327              	.L23:
 328              		.loc 1 82 1 view .LVU74
 329              		.align	2
 330              	.L22:
 331 0034 00000000 		.word	.LANCHOR0
 332              		.cfi_endproc
 333              	.LFE126:
 335              		.section	.text.periph_SPI_ReadByte,"ax",%progbits
 336              		.align	1
 337              		.global	periph_SPI_ReadByte
 338              		.syntax unified
 339              		.thumb
 340              		.thumb_func
 341              		.fpu fpv4-sp-d16
 343              	periph_SPI_ReadByte:
 344              	.LVL28:
 345              	.LFB127:
  83:Bsp/periph_spi.c **** 
  84:Bsp/periph_spi.c **** bool periph_SPI_ReadByte(SPI_List SPIx, uint8_t *data)
  85:Bsp/periph_spi.c **** {
 346              		.loc 1 85 1 is_stmt 1 view -0
 347              		.cfi_startproc
 348              		@ args = 0, pretend = 0, frame = 0
 349              		@ frame_needed = 0, uses_anonymous_args = 0
 350              		.loc 1 85 1 is_stmt 0 view .LVU76
 351 0000 70B5     		push	{r4, r5, r6, lr}
 352              	.LCFI7:
 353              		.cfi_def_cfa_offset 16
 354              		.cfi_offset 4, -16
 355              		.cfi_offset 5, -12
 356              		.cfi_offset 6, -8
 357              		.cfi_offset 14, -4
 358 0002 0546     		mov	r5, r0
 359 0004 0E46     		mov	r6, r1
  86:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 360              		.loc 1 86 2 is_stmt 1 view .LVU77
 361              	.LVL29:
  87:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 362              		.loc 1 87 2 view .LVU78
  86:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 363              		.loc 1 86 11 is_stmt 0 view .LVU79
 364 0006 0024     		movs	r4, #0
 365              	.LVL30:
 366              	.L25:
 367              		.loc 1 87 8 is_stmt 1 view .LVU80
 368              		.loc 1 87 9 is_stmt 0 view .LVU81
 369 0008 0221     		movs	r1, #2
 370 000a 154B     		ldr	r3, .L35
 371 000c 53F82500 		ldr	r0, [r3, r5, lsl #2]
 372 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 373              	.LVL31:
 374              		.loc 1 87 8 view .LVU82
 375 0014 30B9     		cbnz	r0, .L33
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 9


  88:Bsp/periph_spi.c **** 	{
  89:Bsp/periph_spi.c **** 		retry++;
 376              		.loc 1 89 3 is_stmt 1 view .LVU83
 377              		.loc 1 89 8 is_stmt 0 view .LVU84
 378 0016 0134     		adds	r4, r4, #1
 379              	.LVL32:
 380              		.loc 1 89 8 view .LVU85
 381 0018 A4B2     		uxth	r4, r4
 382              	.LVL33:
  90:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 383              		.loc 1 90 3 is_stmt 1 view .LVU86
 384              		.loc 1 90 6 is_stmt 0 view .LVU87
 385 001a B4F57A7F 		cmp	r4, #1000
 386 001e F3D9     		bls	.L25
  91:Bsp/periph_spi.c **** 			return false;
 387              		.loc 1 91 11 view .LVU88
 388 0020 0020     		movs	r0, #0
 389 0022 1BE0     		b	.L26
 390              	.L33:
  92:Bsp/periph_spi.c **** 	}
  93:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], 0XFF);
 391              		.loc 1 93 2 is_stmt 1 view .LVU89
 392 0024 FF21     		movs	r1, #255
 393 0026 0E4B     		ldr	r3, .L35
 394 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 395 002c FFF7FEFF 		bl	SPI_I2S_SendData
 396              	.LVL34:
  94:Bsp/periph_spi.c **** 
  95:Bsp/periph_spi.c **** 	retry = 0;
 397              		.loc 1 95 2 view .LVU90
  96:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 398              		.loc 1 96 2 view .LVU91
  95:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 399              		.loc 1 95 8 is_stmt 0 view .LVU92
 400 0030 0024     		movs	r4, #0
 401              	.LVL35:
 402              	.L28:
 403              		.loc 1 96 8 is_stmt 1 view .LVU93
 404              		.loc 1 96 9 is_stmt 0 view .LVU94
 405 0032 0121     		movs	r1, #1
 406 0034 0A4B     		ldr	r3, .L35
 407 0036 53F82500 		ldr	r0, [r3, r5, lsl #2]
 408 003a FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 409              	.LVL36:
 410              		.loc 1 96 8 view .LVU95
 411 003e 30B9     		cbnz	r0, .L34
  97:Bsp/periph_spi.c **** 	{
  98:Bsp/periph_spi.c **** 		retry++;
 412              		.loc 1 98 3 is_stmt 1 view .LVU96
 413              		.loc 1 98 8 is_stmt 0 view .LVU97
 414 0040 0134     		adds	r4, r4, #1
 415              	.LVL37:
 416              		.loc 1 98 8 view .LVU98
 417 0042 A4B2     		uxth	r4, r4
 418              	.LVL38:
  99:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 419              		.loc 1 99 3 is_stmt 1 view .LVU99
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 10


 420              		.loc 1 99 6 is_stmt 0 view .LVU100
 421 0044 B4F57A7F 		cmp	r4, #1000
 422 0048 F3D9     		bls	.L28
 100:Bsp/periph_spi.c **** 			return false;
 423              		.loc 1 100 11 view .LVU101
 424 004a 0020     		movs	r0, #0
 425 004c 06E0     		b	.L26
 426              	.L34:
 101:Bsp/periph_spi.c **** 	}
 102:Bsp/periph_spi.c **** 	*data = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 427              		.loc 1 102 2 is_stmt 1 view .LVU102
 428              		.loc 1 102 10 is_stmt 0 view .LVU103
 429 004e 044B     		ldr	r3, .L35
 430 0050 53F82500 		ldr	r0, [r3, r5, lsl #2]
 431 0054 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 432              	.LVL39:
 433              		.loc 1 102 8 view .LVU104
 434 0058 3070     		strb	r0, [r6]
 103:Bsp/periph_spi.c **** 	return true;
 435              		.loc 1 103 2 is_stmt 1 view .LVU105
 436              		.loc 1 103 9 is_stmt 0 view .LVU106
 437 005a 0120     		movs	r0, #1
 438              	.L26:
 104:Bsp/periph_spi.c **** }
 439              		.loc 1 104 1 view .LVU107
 440 005c 70BD     		pop	{r4, r5, r6, pc}
 441              	.LVL40:
 442              	.L36:
 443              		.loc 1 104 1 view .LVU108
 444 005e 00BF     		.align	2
 445              	.L35:
 446 0060 00000000 		.word	.LANCHOR0
 447              		.cfi_endproc
 448              	.LFE127:
 450              		.section	.text.periph_SPI_ReadWriteByte,"ax",%progbits
 451              		.align	1
 452              		.global	periph_SPI_ReadWriteByte
 453              		.syntax unified
 454              		.thumb
 455              		.thumb_func
 456              		.fpu fpv4-sp-d16
 458              	periph_SPI_ReadWriteByte:
 459              	.LVL41:
 460              	.LFB128:
 105:Bsp/periph_spi.c **** 
 106:Bsp/periph_spi.c **** uint8_t periph_SPI_ReadWriteByte(SPI_List SPIx, u8 TxData)
 107:Bsp/periph_spi.c **** {
 461              		.loc 1 107 1 is_stmt 1 view -0
 462              		.cfi_startproc
 463              		@ args = 0, pretend = 0, frame = 0
 464              		@ frame_needed = 0, uses_anonymous_args = 0
 465              		.loc 1 107 1 is_stmt 0 view .LVU110
 466 0000 70B5     		push	{r4, r5, r6, lr}
 467              	.LCFI8:
 468              		.cfi_def_cfa_offset 16
 469              		.cfi_offset 4, -16
 470              		.cfi_offset 5, -12
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 11


 471              		.cfi_offset 6, -8
 472              		.cfi_offset 14, -4
 473 0002 0546     		mov	r5, r0
 474 0004 0E46     		mov	r6, r1
 108:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 475              		.loc 1 108 2 is_stmt 1 view .LVU111
 476              	.LVL42:
 109:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 477              		.loc 1 109 2 view .LVU112
 108:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 478              		.loc 1 108 11 is_stmt 0 view .LVU113
 479 0006 0024     		movs	r4, #0
 480              	.LVL43:
 481              	.L38:
 482              		.loc 1 109 8 is_stmt 1 view .LVU114
 483              		.loc 1 109 9 is_stmt 0 view .LVU115
 484 0008 0221     		movs	r1, #2
 485 000a 154B     		ldr	r3, .L46
 486 000c 53F82500 		ldr	r0, [r3, r5, lsl #2]
 487 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 488              	.LVL44:
 489              		.loc 1 109 8 view .LVU116
 490 0014 0346     		mov	r3, r0
 491 0016 28B9     		cbnz	r0, .L44
 110:Bsp/periph_spi.c **** 	{
 111:Bsp/periph_spi.c **** 		retry++;
 492              		.loc 1 111 3 is_stmt 1 view .LVU117
 493              		.loc 1 111 8 is_stmt 0 view .LVU118
 494 0018 0134     		adds	r4, r4, #1
 495              	.LVL45:
 496              		.loc 1 111 8 view .LVU119
 497 001a A4B2     		uxth	r4, r4
 498              	.LVL46:
 112:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 499              		.loc 1 112 3 is_stmt 1 view .LVU120
 500              		.loc 1 112 6 is_stmt 0 view .LVU121
 501 001c B4F57A7F 		cmp	r4, #1000
 502 0020 F2D9     		bls	.L38
 503 0022 1AE0     		b	.L39
 504              	.L44:
 113:Bsp/periph_spi.c **** 			return 0;
 114:Bsp/periph_spi.c **** 	}
 115:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], TxData);
 505              		.loc 1 115 2 is_stmt 1 view .LVU122
 506 0024 3146     		mov	r1, r6
 507 0026 0E4B     		ldr	r3, .L46
 508 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 509 002c FFF7FEFF 		bl	SPI_I2S_SendData
 510              	.LVL47:
 116:Bsp/periph_spi.c **** 
 117:Bsp/periph_spi.c **** 	retry = 0;
 511              		.loc 1 117 2 view .LVU123
 118:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 512              		.loc 1 118 2 view .LVU124
 117:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 513              		.loc 1 117 8 is_stmt 0 view .LVU125
 514 0030 0024     		movs	r4, #0
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 12


 515              	.LVL48:
 516              	.L41:
 517              		.loc 1 118 8 is_stmt 1 view .LVU126
 518              		.loc 1 118 9 is_stmt 0 view .LVU127
 519 0032 0121     		movs	r1, #1
 520 0034 0A4B     		ldr	r3, .L46
 521 0036 53F82500 		ldr	r0, [r3, r5, lsl #2]
 522 003a FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 523              	.LVL49:
 524              		.loc 1 118 8 view .LVU128
 525 003e 0346     		mov	r3, r0
 526 0040 28B9     		cbnz	r0, .L45
 119:Bsp/periph_spi.c **** 	{
 120:Bsp/periph_spi.c **** 		retry++;
 527              		.loc 1 120 3 is_stmt 1 view .LVU129
 528              		.loc 1 120 8 is_stmt 0 view .LVU130
 529 0042 0134     		adds	r4, r4, #1
 530              	.LVL50:
 531              		.loc 1 120 8 view .LVU131
 532 0044 A4B2     		uxth	r4, r4
 533              	.LVL51:
 121:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 534              		.loc 1 121 3 is_stmt 1 view .LVU132
 535              		.loc 1 121 6 is_stmt 0 view .LVU133
 536 0046 B4F57A7F 		cmp	r4, #1000
 537 004a F2D9     		bls	.L41
 538 004c 05E0     		b	.L39
 539              	.L45:
 122:Bsp/periph_spi.c **** 			return 0;
 123:Bsp/periph_spi.c **** 	}
 124:Bsp/periph_spi.c **** 	return SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 540              		.loc 1 124 2 is_stmt 1 view .LVU134
 541              		.loc 1 124 9 is_stmt 0 view .LVU135
 542 004e 044B     		ldr	r3, .L46
 543 0050 53F82500 		ldr	r0, [r3, r5, lsl #2]
 544 0054 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 545              	.LVL52:
 546 0058 C3B2     		uxtb	r3, r0
 547              	.L39:
 125:Bsp/periph_spi.c **** }
 548              		.loc 1 125 1 view .LVU136
 549 005a 1846     		mov	r0, r3
 550 005c 70BD     		pop	{r4, r5, r6, pc}
 551              	.LVL53:
 552              	.L47:
 553              		.loc 1 125 1 view .LVU137
 554 005e 00BF     		.align	2
 555              	.L46:
 556 0060 00000000 		.word	.LANCHOR0
 557              		.cfi_endproc
 558              	.LFE128:
 560              		.section	.text.periph_SPI_Transfer,"ax",%progbits
 561              		.align	1
 562              		.global	periph_SPI_Transfer
 563              		.syntax unified
 564              		.thumb
 565              		.thumb_func
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 13


 566              		.fpu fpv4-sp-d16
 568              	periph_SPI_Transfer:
 569              	.LVL54:
 570              	.LFB129:
 126:Bsp/periph_spi.c **** 
 127:Bsp/periph_spi.c **** uint8_t periph_SPI_Transfer(SPI_List SPIx, u8 *rx, u8 *tx, uint16_t len)
 128:Bsp/periph_spi.c **** {
 571              		.loc 1 128 1 is_stmt 1 view -0
 572              		.cfi_startproc
 573              		@ args = 0, pretend = 0, frame = 0
 574              		@ frame_needed = 0, uses_anonymous_args = 0
 575              		.loc 1 128 1 is_stmt 0 view .LVU139
 576 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 577              	.LCFI9:
 578              		.cfi_def_cfa_offset 32
 579              		.cfi_offset 3, -32
 580              		.cfi_offset 4, -28
 581              		.cfi_offset 5, -24
 582              		.cfi_offset 6, -20
 583              		.cfi_offset 7, -16
 584              		.cfi_offset 8, -12
 585              		.cfi_offset 9, -8
 586              		.cfi_offset 14, -4
 587 0004 0546     		mov	r5, r0
 588 0006 0F46     		mov	r7, r1
 589 0008 1646     		mov	r6, r2
 129:Bsp/periph_spi.c **** 	uint16_t spitimeout = SPI_TIMEOUT;
 590              		.loc 1 129 2 is_stmt 1 view .LVU140
 591              	.LVL55:
 130:Bsp/periph_spi.c **** 	uint8_t b;
 592              		.loc 1 130 2 view .LVU141
 131:Bsp/periph_spi.c **** 	SPI_PORT[SPIx]->DR;
 593              		.loc 1 131 2 view .LVU142
 594              		.loc 1 131 10 is_stmt 0 view .LVU143
 595 000a 214A     		ldr	r2, .L63
 596              	.LVL56:
 597              		.loc 1 131 10 view .LVU144
 598 000c 52F82020 		ldr	r2, [r2, r0, lsl #2]
 599              		.loc 1 131 16 view .LVU145
 600 0010 9289     		ldrh	r2, [r2, #12]
 132:Bsp/periph_spi.c **** 	while (len--)
 601              		.loc 1 132 2 is_stmt 1 view .LVU146
 129:Bsp/periph_spi.c **** 	uint8_t b;
 602              		.loc 1 129 11 is_stmt 0 view .LVU147
 603 0012 4FF47A74 		mov	r4, #1000
 604              	.LVL57:
 605              	.L49:
 606              		.loc 1 132 8 is_stmt 1 view .LVU148
 607              		.loc 1 132 12 is_stmt 0 view .LVU149
 608 0016 03F1FF38 		add	r8, r3, #-1
 609 001a 1FFA88F8 		uxth	r8, r8
 610              	.LVL58:
 611              		.loc 1 132 8 view .LVU150
 612 001e 93B3     		cbz	r3, .L60
 133:Bsp/periph_spi.c **** 	{
 134:Bsp/periph_spi.c **** 		b = tx ? *(tx++) : 0xff;
 613              		.loc 1 134 3 is_stmt 1 view .LVU151
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 14


 614              		.loc 1 134 5 is_stmt 0 view .LVU152
 615 0020 76B1     		cbz	r6, .L58
 616              	.LVL59:
 617              		.loc 1 134 5 discriminator 1 view .LVU153
 618 0022 16F8019B 		ldrb	r9, [r6], #1	@ zero_extendqisi2
 619              	.LVL60:
 620              	.L51:
 135:Bsp/periph_spi.c **** 
 136:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 621              		.loc 1 136 9 is_stmt 1 view .LVU154
 622              		.loc 1 136 10 is_stmt 0 view .LVU155
 623 0026 0221     		movs	r1, #2
 624 0028 194B     		ldr	r3, .L63
 625 002a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 626 002e FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 627              	.LVL61:
 628              		.loc 1 136 9 view .LVU156
 629 0032 0246     		mov	r2, r0
 630 0034 38B9     		cbnz	r0, .L61
 137:Bsp/periph_spi.c **** 		{
 138:Bsp/periph_spi.c **** 			if ((spitimeout--) == 0)
 631              		.loc 1 138 4 is_stmt 1 view .LVU157
 632              		.loc 1 138 19 is_stmt 0 view .LVU158
 633 0036 631E     		subs	r3, r4, #1
 634 0038 9BB2     		uxth	r3, r3
 635              	.LVL62:
 636              		.loc 1 138 7 view .LVU159
 637 003a 2CB3     		cbz	r4, .L52
 638              		.loc 1 138 19 view .LVU160
 639 003c 1C46     		mov	r4, r3
 640 003e F2E7     		b	.L51
 641              	.LVL63:
 642              	.L58:
 134:Bsp/periph_spi.c **** 
 643              		.loc 1 134 5 view .LVU161
 644 0040 4FF0FF09 		mov	r9, #255
 645              	.LVL64:
 136:Bsp/periph_spi.c **** 		{
 646              		.loc 1 136 3 is_stmt 1 view .LVU162
 136:Bsp/periph_spi.c **** 		{
 647              		.loc 1 136 9 is_stmt 0 view .LVU163
 648 0044 EFE7     		b	.L51
 649              	.LVL65:
 650              	.L61:
 139:Bsp/periph_spi.c **** 			{
 140:Bsp/periph_spi.c **** 				return 0;
 141:Bsp/periph_spi.c **** 			}
 142:Bsp/periph_spi.c **** 		}
 143:Bsp/periph_spi.c **** 		SPI_I2S_SendData(SPI_PORT[SPIx], b);
 651              		.loc 1 143 3 is_stmt 1 view .LVU164
 652 0046 4946     		mov	r1, r9
 653 0048 114B     		ldr	r3, .L63
 654 004a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 655 004e FFF7FEFF 		bl	SPI_I2S_SendData
 656              	.LVL66:
 144:Bsp/periph_spi.c **** 
 145:Bsp/periph_spi.c **** 		spitimeout = SPI_TIMEOUT;
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 15


 657              		.loc 1 145 3 view .LVU165
 146:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 658              		.loc 1 146 3 view .LVU166
 145:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 659              		.loc 1 145 14 is_stmt 0 view .LVU167
 660 0052 4FF47A74 		mov	r4, #1000
 661              	.LVL67:
 662              	.L54:
 663              		.loc 1 146 9 is_stmt 1 view .LVU168
 664              		.loc 1 146 10 is_stmt 0 view .LVU169
 665 0056 0121     		movs	r1, #1
 666 0058 0D4B     		ldr	r3, .L63
 667 005a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 668 005e FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 669              	.LVL68:
 670              		.loc 1 146 9 view .LVU170
 671 0062 0246     		mov	r2, r0
 672 0064 20B9     		cbnz	r0, .L62
 147:Bsp/periph_spi.c **** 		{
 148:Bsp/periph_spi.c **** 			if ((spitimeout--) == 0)
 673              		.loc 1 148 4 is_stmt 1 view .LVU171
 674              		.loc 1 148 19 is_stmt 0 view .LVU172
 675 0066 631E     		subs	r3, r4, #1
 676 0068 9BB2     		uxth	r3, r3
 677              	.LVL69:
 678              		.loc 1 148 7 view .LVU173
 679 006a 6CB1     		cbz	r4, .L52
 680              		.loc 1 148 19 view .LVU174
 681 006c 1C46     		mov	r4, r3
 682 006e F2E7     		b	.L54
 683              	.LVL70:
 684              	.L62:
 149:Bsp/periph_spi.c **** 			{
 150:Bsp/periph_spi.c **** 				return 0;
 151:Bsp/periph_spi.c **** 			}
 152:Bsp/periph_spi.c **** 		}
 153:Bsp/periph_spi.c **** 
 154:Bsp/periph_spi.c **** 		b = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 685              		.loc 1 154 3 is_stmt 1 view .LVU175
 686              		.loc 1 154 7 is_stmt 0 view .LVU176
 687 0070 074B     		ldr	r3, .L63
 688 0072 53F82500 		ldr	r0, [r3, r5, lsl #2]
 689 0076 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 690              	.LVL71:
 691              		.loc 1 154 5 view .LVU177
 692 007a C0B2     		uxtb	r0, r0
 693              	.LVL72:
 155:Bsp/periph_spi.c **** 		if (rx)
 694              		.loc 1 155 3 is_stmt 1 view .LVU178
 695              		.loc 1 155 6 is_stmt 0 view .LVU179
 696 007c 0FB1     		cbz	r7, .L56
 156:Bsp/periph_spi.c **** 		{
 157:Bsp/periph_spi.c **** 			*(rx++) = b;
 697              		.loc 1 157 4 is_stmt 1 view .LVU180
 698              	.LVL73:
 699              		.loc 1 157 12 is_stmt 0 view .LVU181
 700 007e 07F8010B 		strb	r0, [r7], #1
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 16


 701              	.LVL74:
 702              	.L56:
 703              		.loc 1 157 8 view .LVU182
 704 0082 4346     		mov	r3, r8
 705 0084 C7E7     		b	.L49
 706              	.LVL75:
 707              	.L60:
 158:Bsp/periph_spi.c **** 		}
 159:Bsp/periph_spi.c **** 	}
 160:Bsp/periph_spi.c **** 	return 1;
 708              		.loc 1 160 9 view .LVU183
 709 0086 0122     		movs	r2, #1
 710              	.LVL76:
 711              	.L52:
 161:Bsp/periph_spi.c **** }
 712              		.loc 1 161 1 view .LVU184
 713 0088 1046     		mov	r0, r2
 714 008a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 715              	.LVL77:
 716              	.L64:
 717              		.loc 1 161 1 view .LVU185
 718 008e 00BF     		.align	2
 719              	.L63:
 720 0090 00000000 		.word	.LANCHOR0
 721              		.cfi_endproc
 722              	.LFE129:
 724              		.section	.text.periph_SPI_CheckBusy,"ax",%progbits
 725              		.align	1
 726              		.global	periph_SPI_CheckBusy
 727              		.syntax unified
 728              		.thumb
 729              		.thumb_func
 730              		.fpu fpv4-sp-d16
 732              	periph_SPI_CheckBusy:
 733              	.LVL78:
 734              	.LFB130:
 162:Bsp/periph_spi.c **** 
 163:Bsp/periph_spi.c **** uint8_t periph_SPI_CheckBusy(SPI_List SPIx)
 164:Bsp/periph_spi.c **** {
 735              		.loc 1 164 1 is_stmt 1 view -0
 736              		.cfi_startproc
 737              		@ args = 0, pretend = 0, frame = 0
 738              		@ frame_needed = 0, uses_anonymous_args = 0
 739              		.loc 1 164 1 is_stmt 0 view .LVU187
 740 0000 10B5     		push	{r4, lr}
 741              	.LCFI10:
 742              		.cfi_def_cfa_offset 8
 743              		.cfi_offset 4, -8
 744              		.cfi_offset 14, -4
 745 0002 0446     		mov	r4, r0
 165:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 746              		.loc 1 165 2 is_stmt 1 view .LVU188
 747              		.loc 1 165 9 is_stmt 0 view .LVU189
 748 0004 0221     		movs	r1, #2
 749 0006 0A4B     		ldr	r3, .L71
 750 0008 53F82000 		ldr	r0, [r3, r0, lsl #2]
 751              	.LVL79:
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 17


 752              		.loc 1 165 9 view .LVU190
 753 000c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 754              	.LVL80:
 755              		.loc 1 165 74 view .LVU191
 756 0010 08B9     		cbnz	r0, .L70
 757 0012 0120     		movs	r0, #1
 758              	.L66:
 166:Bsp/periph_spi.c **** }
 759              		.loc 1 166 1 discriminator 6 view .LVU192
 760 0014 10BD     		pop	{r4, pc}
 761              	.L70:
 165:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 762              		.loc 1 165 77 discriminator 2 view .LVU193
 763 0016 8021     		movs	r1, #128
 764 0018 054B     		ldr	r3, .L71
 765 001a 53F82400 		ldr	r0, [r3, r4, lsl #2]
 766 001e FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 767              	.LVL81:
 165:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 768              		.loc 1 165 74 discriminator 2 view .LVU194
 769 0022 0128     		cmp	r0, #1
 770 0024 01D0     		beq	.L68
 165:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 771              		.loc 1 165 74 view .LVU195
 772 0026 0020     		movs	r0, #0
 773 0028 F4E7     		b	.L66
 774              	.L68:
 775 002a 0120     		movs	r0, #1
 776 002c F2E7     		b	.L66
 777              	.L72:
 778 002e 00BF     		.align	2
 779              	.L71:
 780 0030 00000000 		.word	.LANCHOR0
 781              		.cfi_endproc
 782              	.LFE130:
 784              		.global	SpiErrorCount2
 785              		.global	SpiErrorCount
 786              		.section	.bss.SpiErrorCount,"aw",%nobits
 787              		.align	1
 790              	SpiErrorCount:
 791 0000 0000     		.space	2
 792              		.section	.bss.SpiErrorCount2,"aw",%nobits
 793              		.align	1
 796              	SpiErrorCount2:
 797 0000 0000     		.space	2
 798              		.section	.rodata.SPI_CLK,"a"
 799              		.align	2
 800              		.set	.LANCHOR2,. + 0
 803              	SPI_CLK:
 804 0000 00100000 		.word	4096
 805 0004 00400000 		.word	16384
 806 0008 00800000 		.word	32768
 807              		.section	.rodata.SPI_IO_Init,"a"
 808              		.align	2
 809              		.set	.LANCHOR1,. + 0
 812              	SPI_IO_Init:
 813 0000 00000000 		.word	GPIO_SPI1_IO_Init
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 18


 814 0004 00000000 		.word	GPIO_SPI2_IO_Init
 815 0008 00000000 		.word	GPIO_SPI3_IO_Init
 816              		.section	.rodata.SPI_PORT,"a"
 817              		.align	2
 818              		.set	.LANCHOR0,. + 0
 821              	SPI_PORT:
 822 0000 00300140 		.word	1073819648
 823 0004 00380040 		.word	1073756160
 824 0008 003C0040 		.word	1073757184
 825              		.section	.rodata.divisorMap,"a"
 826              		.align	2
 827              		.set	.LANCHOR3,. + 0
 830              	divisorMap:
 831 0000 3800     		.short	56
 832 0002 3000     		.short	48
 833 0004 1000     		.short	16
 834 0006 0800     		.short	8
 835 0008 0000     		.short	0
 836              		.text
 837              	.Letext0:
 838              		.file 2 "/usr/local/arm-none-eabi-gcc/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/mac
 839              		.file 3 "/usr/local/arm-none-eabi-gcc/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys
 840              		.file 4 "USER/stm32f4xx.h"
 841              		.file 5 "FWLIB/inc/stm32f4xx_spi.h"
 842              		.file 6 "Bsp/periph_spi.h"
 843              		.file 7 "FWLIB/inc/stm32f4xx_rcc.h"
ARM GAS  /var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s 			page 19


DEFINED SYMBOLS
                            *ABS*:0000000000000000 periph_spi.c
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:18     .text.periph_SPI_DeInit:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:26     .text.periph_SPI_DeInit:0000000000000000 periph_SPI_DeInit
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:52     .text.periph_SPI_DeInit:0000000000000010 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:57     .text.periph_SPI_Init:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:64     .text.periph_SPI_Init:0000000000000000 periph_SPI_Init
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:182    .text.periph_SPI_Init:0000000000000090 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:190    .text.periph_SPI_SetSpeed:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:197    .text.periph_SPI_SetSpeed:0000000000000000 periph_SPI_SetSpeed
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:253    .text.periph_SPI_SetSpeed:0000000000000030 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:259    .text.periph_SPI_WriteByte:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:266    .text.periph_SPI_WriteByte:0000000000000000 periph_SPI_WriteByte
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:331    .text.periph_SPI_WriteByte:0000000000000034 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:336    .text.periph_SPI_ReadByte:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:343    .text.periph_SPI_ReadByte:0000000000000000 periph_SPI_ReadByte
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:446    .text.periph_SPI_ReadByte:0000000000000060 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:451    .text.periph_SPI_ReadWriteByte:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:458    .text.periph_SPI_ReadWriteByte:0000000000000000 periph_SPI_ReadWriteByte
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:556    .text.periph_SPI_ReadWriteByte:0000000000000060 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:561    .text.periph_SPI_Transfer:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:568    .text.periph_SPI_Transfer:0000000000000000 periph_SPI_Transfer
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:720    .text.periph_SPI_Transfer:0000000000000090 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:725    .text.periph_SPI_CheckBusy:0000000000000000 $t
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:732    .text.periph_SPI_CheckBusy:0000000000000000 periph_SPI_CheckBusy
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:780    .text.periph_SPI_CheckBusy:0000000000000030 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:796    .bss.SpiErrorCount2:0000000000000000 SpiErrorCount2
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:790    .bss.SpiErrorCount:0000000000000000 SpiErrorCount
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:787    .bss.SpiErrorCount:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:793    .bss.SpiErrorCount2:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:799    .rodata.SPI_CLK:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:803    .rodata.SPI_CLK:0000000000000000 SPI_CLK
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:808    .rodata.SPI_IO_Init:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:812    .rodata.SPI_IO_Init:0000000000000000 SPI_IO_Init
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:817    .rodata.SPI_PORT:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:821    .rodata.SPI_PORT:0000000000000000 SPI_PORT
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:826    .rodata.divisorMap:0000000000000000 $d
/var/folders/lx/hc4sn_b53233_zkc9xbbl97r0000gp/T//ccwAwbH7.s:830    .rodata.divisorMap:0000000000000000 divisorMap

UNDEFINED SYMBOLS
SPI_I2S_DeInit
RCC_APB2PeriphClockCmd
SPI_Cmd
SPI_Init
RCC_APB1PeriphClockCmd
SPI_I2S_GetFlagStatus
SPI_I2S_SendData
SPI_I2S_ReceiveData
GPIO_SPI1_IO_Init
GPIO_SPI2_IO_Init
GPIO_SPI3_IO_Init
