ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"periph_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.periph_SPI_DeInit,"ax",%progbits
  18              		.align	1
  19              		.global	periph_SPI_DeInit
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	periph_SPI_DeInit:
  27              	.LVL0:
  28              	.LFB123:
  29              		.file 1 "Bsp/periph_spi.c"
   1:Bsp/periph_spi.c **** #include "stm32f4xx_spi.h"
   2:Bsp/periph_spi.c **** #include "periph_gpio.h"
   3:Bsp/periph_spi.c **** #include "periph_spi.h"
   4:Bsp/periph_spi.c **** 
   5:Bsp/periph_spi.c **** uint16_t SpiErrorCount = 0;
   6:Bsp/periph_spi.c **** uint16_t SpiErrorCount2 = 0;
   7:Bsp/periph_spi.c **** 
   8:Bsp/periph_spi.c **** static void (*SPI_IO_Init[SPI_PORT_SUM])() = {GPIO_SPI1_IO_Init, GPIO_SPI2_IO_Init, GPIO_SPI3_IO_In
   9:Bsp/periph_spi.c **** 
  10:Bsp/periph_spi.c **** static SPI_TypeDef *SPI_PORT[SPI_PORT_SUM] = {SPI1, SPI2, SPI3};
  11:Bsp/periph_spi.c **** 
  12:Bsp/periph_spi.c **** static uint32_t SPI_CLK[SPI_PORT_SUM] = {RCC_APB2Periph_SPI1, RCC_APB1Periph_SPI2, RCC_APB1Periph_S
  13:Bsp/periph_spi.c **** 
  14:Bsp/periph_spi.c **** static const uint16_t divisorMap[] = {
  15:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_256, // SPI_CLOCK_INITIALIZATON      328.125 KBits/s
  16:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_128, // SPI_CLOCK_SLOW               656.25 KBits/s
  17:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_8,   // SPI_CLOCK_STANDARD           10.5 MBits/s
  18:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_4,   // SPI_CLOCK_FAST               21.0 MBits/s
  19:Bsp/periph_spi.c **** 	SPI_BaudRatePrescaler_2	   // SPI_CLOCK_ULTRAFAST          42.0 MBits/s
  20:Bsp/periph_spi.c **** };
  21:Bsp/periph_spi.c **** 
  22:Bsp/periph_spi.c **** void periph_SPI_DeInit(SPI_List SPIx)
  23:Bsp/periph_spi.c **** {
  30              		.loc 1 23 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 23 1 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 2


  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
  24:Bsp/periph_spi.c **** 	SPI_I2S_DeInit(SPI_PORT[SPIx]);
  40              		.loc 1 24 2 is_stmt 1 view .LVU2
  41 0002 034B     		ldr	r3, .L3
  42 0004 53F82000 		ldr	r0, [r3, r0, lsl #2]
  43              	.LVL1:
  44              		.loc 1 24 2 is_stmt 0 view .LVU3
  45 0008 FFF7FEFF 		bl	SPI_I2S_DeInit
  46              	.LVL2:
  25:Bsp/periph_spi.c **** }
  47              		.loc 1 25 1 view .LVU4
  48 000c 08BD     		pop	{r3, pc}
  49              	.L4:
  50 000e 00BF     		.align	2
  51              	.L3:
  52 0010 00000000 		.word	.LANCHOR0
  53              		.cfi_endproc
  54              	.LFE123:
  56              		.section	.text.periph_SPI_Init,"ax",%progbits
  57              		.align	1
  58              		.global	periph_SPI_Init
  59              		.syntax unified
  60              		.thumb
  61              		.thumb_func
  62              		.fpu fpv4-sp-d16
  64              	periph_SPI_Init:
  65              	.LVL3:
  66              	.LFB124:
  26:Bsp/periph_spi.c **** 
  27:Bsp/periph_spi.c **** void periph_SPI_Init(SPI_List SPIx, SPIClockSpeed_e speed, uint16_t CPOL, uint16_t CPHA)
  28:Bsp/periph_spi.c **** {
  67              		.loc 1 28 1 is_stmt 1 view -0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 24
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              		.loc 1 28 1 is_stmt 0 view .LVU6
  72 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  73              	.LCFI1:
  74              		.cfi_def_cfa_offset 20
  75              		.cfi_offset 4, -20
  76              		.cfi_offset 5, -16
  77              		.cfi_offset 6, -12
  78              		.cfi_offset 7, -8
  79              		.cfi_offset 14, -4
  80 0002 87B0     		sub	sp, sp, #28
  81              	.LCFI2:
  82              		.cfi_def_cfa_offset 48
  83 0004 0446     		mov	r4, r0
  84 0006 0D46     		mov	r5, r1
  85 0008 1746     		mov	r7, r2
  86 000a 1E46     		mov	r6, r3
  29:Bsp/periph_spi.c **** 	SPI_InitTypeDef SPI_InitStructure;
  87              		.loc 1 29 2 is_stmt 1 view .LVU7
  30:Bsp/periph_spi.c **** 	SPI_IO_Init[SPIx]();
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 3


  88              		.loc 1 30 2 view .LVU8
  89              		.loc 1 30 13 is_stmt 0 view .LVU9
  90 000c 204B     		ldr	r3, .L9
  91              	.LVL4:
  92              		.loc 1 30 13 view .LVU10
  93 000e 53F82030 		ldr	r3, [r3, r0, lsl #2]
  94              		.loc 1 30 2 view .LVU11
  95 0012 9847     		blx	r3
  96              	.LVL5:
  31:Bsp/periph_spi.c **** 
  32:Bsp/periph_spi.c **** 	if (SPIx == SPI_1)
  97              		.loc 1 32 2 is_stmt 1 view .LVU12
  98              		.loc 1 32 5 is_stmt 0 view .LVU13
  99 0014 A4BB     		cbnz	r4, .L6
  33:Bsp/periph_spi.c **** 	{
  34:Bsp/periph_spi.c **** 		RCC_APB2PeriphClockCmd(SPI_CLK[SPIx], ENABLE);
 100              		.loc 1 34 3 is_stmt 1 view .LVU14
 101 0016 0121     		movs	r1, #1
 102 0018 1E4B     		ldr	r3, .L9+4
 103 001a 53F82400 		ldr	r0, [r3, r4, lsl #2]
 104 001e FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 105              	.LVL6:
 106              	.L7:
  35:Bsp/periph_spi.c **** 	}
  36:Bsp/periph_spi.c **** 	else
  37:Bsp/periph_spi.c **** 	{
  38:Bsp/periph_spi.c **** 		RCC_APB1PeriphClockCmd(SPI_CLK[SPIx], ENABLE);
  39:Bsp/periph_spi.c **** 	}
  40:Bsp/periph_spi.c **** 
  41:Bsp/periph_spi.c **** 	SPI_I2S_DeInit(SPI_PORT[SPIx]);
 107              		.loc 1 41 2 view .LVU15
 108 0022 1D4B     		ldr	r3, .L9+8
 109 0024 53F82440 		ldr	r4, [r3, r4, lsl #2]
 110 0028 2046     		mov	r0, r4
 111 002a FFF7FEFF 		bl	SPI_I2S_DeInit
 112              	.LVL7:
  42:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], DISABLE);
 113              		.loc 1 42 2 view .LVU16
 114 002e 0021     		movs	r1, #0
 115 0030 2046     		mov	r0, r4
 116 0032 FFF7FEFF 		bl	SPI_Cmd
 117              	.LVL8:
  43:Bsp/periph_spi.c **** 
  44:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
 118              		.loc 1 44 2 view .LVU17
 119              		.loc 1 44 29 is_stmt 0 view .LVU18
 120 0036 4FF48273 		mov	r3, #260
 121 003a ADF80630 		strh	r3, [sp, #6]	@ movhi
  45:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;
 122              		.loc 1 45 2 is_stmt 1 view .LVU19
 123              		.loc 1 45 34 is_stmt 0 view .LVU20
 124 003e 0023     		movs	r3, #0
 125 0040 ADF80430 		strh	r3, [sp, #4]	@ movhi
  46:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
 126              		.loc 1 46 2 is_stmt 1 view .LVU21
 127              		.loc 1 46 33 is_stmt 0 view .LVU22
 128 0044 ADF80830 		strh	r3, [sp, #8]	@ movhi
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 4


  47:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
 129              		.loc 1 47 2 is_stmt 1 view .LVU23
 130              		.loc 1 47 28 is_stmt 0 view .LVU24
 131 0048 4FF40072 		mov	r2, #512
 132 004c ADF80E20 		strh	r2, [sp, #14]	@ movhi
  48:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
 133              		.loc 1 48 2 is_stmt 1 view .LVU25
 134              		.loc 1 48 33 is_stmt 0 view .LVU26
 135 0050 ADF81230 		strh	r3, [sp, #18]	@ movhi
  49:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CPOL = CPOL;
 136              		.loc 1 49 2 is_stmt 1 view .LVU27
 137              		.loc 1 49 29 is_stmt 0 view .LVU28
 138 0054 ADF80A70 		strh	r7, [sp, #10]	@ movhi
  50:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CPHA = CPHA;
 139              		.loc 1 50 2 is_stmt 1 view .LVU29
 140              		.loc 1 50 29 is_stmt 0 view .LVU30
 141 0058 ADF80C60 		strh	r6, [sp, #12]	@ movhi
  51:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_CRCPolynomial = 7;
 142              		.loc 1 51 2 is_stmt 1 view .LVU31
 143              		.loc 1 51 38 is_stmt 0 view .LVU32
 144 005c 0723     		movs	r3, #7
 145 005e ADF81430 		strh	r3, [sp, #20]	@ movhi
  52:Bsp/periph_spi.c **** 	SPI_InitStructure.SPI_BaudRatePrescaler = divisorMap[(uint8_t)speed];
 146              		.loc 1 52 2 is_stmt 1 view .LVU33
 147              		.loc 1 52 54 is_stmt 0 view .LVU34
 148 0062 0E4B     		ldr	r3, .L9+12
 149 0064 33F81530 		ldrh	r3, [r3, r5, lsl #1]
 150              		.loc 1 52 42 view .LVU35
 151 0068 ADF81030 		strh	r3, [sp, #16]	@ movhi
  53:Bsp/periph_spi.c **** 	SPI_Init(SPI_PORT[SPIx], &SPI_InitStructure);
 152              		.loc 1 53 2 is_stmt 1 view .LVU36
 153 006c 01A9     		add	r1, sp, #4
 154 006e 2046     		mov	r0, r4
 155 0070 FFF7FEFF 		bl	SPI_Init
 156              	.LVL9:
  54:Bsp/periph_spi.c **** 
  55:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], ENABLE);
 157              		.loc 1 55 2 view .LVU37
 158 0074 0121     		movs	r1, #1
 159 0076 2046     		mov	r0, r4
 160 0078 FFF7FEFF 		bl	SPI_Cmd
 161              	.LVL10:
  56:Bsp/periph_spi.c **** }
 162              		.loc 1 56 1 is_stmt 0 view .LVU38
 163 007c 07B0     		add	sp, sp, #28
 164              	.LCFI3:
 165              		.cfi_remember_state
 166              		.cfi_def_cfa_offset 20
 167              		@ sp needed
 168 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 169              	.L6:
 170              	.LCFI4:
 171              		.cfi_restore_state
  38:Bsp/periph_spi.c **** 	}
 172              		.loc 1 38 3 is_stmt 1 view .LVU39
 173 0080 0121     		movs	r1, #1
 174 0082 044B     		ldr	r3, .L9+4
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 5


 175 0084 53F82400 		ldr	r0, [r3, r4, lsl #2]
 176 0088 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 177              	.LVL11:
 178 008c C9E7     		b	.L7
 179              	.L10:
 180 008e 00BF     		.align	2
 181              	.L9:
 182 0090 00000000 		.word	.LANCHOR1
 183 0094 00000000 		.word	.LANCHOR2
 184 0098 00000000 		.word	.LANCHOR0
 185 009c 00000000 		.word	.LANCHOR3
 186              		.cfi_endproc
 187              	.LFE124:
 189              		.section	.text.periph_SPI_SetSpeed,"ax",%progbits
 190              		.align	1
 191              		.global	periph_SPI_SetSpeed
 192              		.syntax unified
 193              		.thumb
 194              		.thumb_func
 195              		.fpu fpv4-sp-d16
 197              	periph_SPI_SetSpeed:
 198              	.LVL12:
 199              	.LFB125:
  57:Bsp/periph_spi.c **** 
  58:Bsp/periph_spi.c **** void periph_SPI_SetSpeed(SPI_List SPIx, SPIClockSpeed_e speed)
  59:Bsp/periph_spi.c **** {
 200              		.loc 1 59 1 view -0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204              		.loc 1 59 1 is_stmt 0 view .LVU41
 205 0000 38B5     		push	{r3, r4, r5, lr}
 206              	.LCFI5:
 207              		.cfi_def_cfa_offset 16
 208              		.cfi_offset 3, -16
 209              		.cfi_offset 4, -12
 210              		.cfi_offset 5, -8
 211              		.cfi_offset 14, -4
 212 0002 0D46     		mov	r5, r1
  60:Bsp/periph_spi.c **** #define BR_CLEAR_MASK 0xFFC7
  61:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], DISABLE);
 213              		.loc 1 61 2 is_stmt 1 view .LVU42
 214 0004 0A4B     		ldr	r3, .L13
 215 0006 53F82040 		ldr	r4, [r3, r0, lsl #2]
 216 000a 0021     		movs	r1, #0
 217              	.LVL13:
 218              		.loc 1 61 2 is_stmt 0 view .LVU43
 219 000c 2046     		mov	r0, r4
 220              	.LVL14:
 221              		.loc 1 61 2 view .LVU44
 222 000e FFF7FEFF 		bl	SPI_Cmd
 223              	.LVL15:
  62:Bsp/periph_spi.c **** 
  63:Bsp/periph_spi.c **** 	uint16_t tempRegister = SPI_PORT[SPIx]->CR1;
 224              		.loc 1 63 2 is_stmt 1 view .LVU45
 225              		.loc 1 63 11 is_stmt 0 view .LVU46
 226 0012 2388     		ldrh	r3, [r4]
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 6


 227 0014 9BB2     		uxth	r3, r3
 228              	.LVL16:
  64:Bsp/periph_spi.c **** 	tempRegister &= BR_CLEAR_MASK;
 229              		.loc 1 64 2 is_stmt 1 view .LVU47
 230              		.loc 1 64 15 is_stmt 0 view .LVU48
 231 0016 23F03803 		bic	r3, r3, #56
 232              	.LVL17:
  65:Bsp/periph_spi.c **** 	tempRegister |= divisorMap[speed];
 233              		.loc 1 65 2 is_stmt 1 view .LVU49
 234              		.loc 1 65 28 is_stmt 0 view .LVU50
 235 001a 064A     		ldr	r2, .L13+4
 236 001c 32F81520 		ldrh	r2, [r2, r5, lsl #1]
 237              		.loc 1 65 15 view .LVU51
 238 0020 1343     		orrs	r3, r3, r2
 239              	.LVL18:
  66:Bsp/periph_spi.c **** 	SPI_PORT[SPIx]->CR1 = tempRegister;
 240              		.loc 1 66 2 is_stmt 1 view .LVU52
 241              		.loc 1 66 22 is_stmt 0 view .LVU53
 242 0022 2380     		strh	r3, [r4]	@ movhi
  67:Bsp/periph_spi.c **** 	SPI_Cmd(SPI_PORT[SPIx], ENABLE);
 243              		.loc 1 67 2 is_stmt 1 view .LVU54
 244 0024 0121     		movs	r1, #1
 245 0026 2046     		mov	r0, r4
 246 0028 FFF7FEFF 		bl	SPI_Cmd
 247              	.LVL19:
  68:Bsp/periph_spi.c **** }
 248              		.loc 1 68 1 is_stmt 0 view .LVU55
 249 002c 38BD     		pop	{r3, r4, r5, pc}
 250              	.L14:
 251 002e 00BF     		.align	2
 252              	.L13:
 253 0030 00000000 		.word	.LANCHOR0
 254 0034 00000000 		.word	.LANCHOR3
 255              		.cfi_endproc
 256              	.LFE125:
 258              		.section	.text.periph_SPI_WriteByte,"ax",%progbits
 259              		.align	1
 260              		.global	periph_SPI_WriteByte
 261              		.syntax unified
 262              		.thumb
 263              		.thumb_func
 264              		.fpu fpv4-sp-d16
 266              	periph_SPI_WriteByte:
 267              	.LVL20:
 268              	.LFB126:
  69:Bsp/periph_spi.c **** 
  70:Bsp/periph_spi.c **** bool periph_SPI_WriteByte(SPI_List SPIx, uint8_t TxData)
  71:Bsp/periph_spi.c **** {
 269              		.loc 1 71 1 is_stmt 1 view -0
 270              		.cfi_startproc
 271              		@ args = 0, pretend = 0, frame = 0
 272              		@ frame_needed = 0, uses_anonymous_args = 0
 273              		.loc 1 71 1 is_stmt 0 view .LVU57
 274 0000 70B5     		push	{r4, r5, r6, lr}
 275              	.LCFI6:
 276              		.cfi_def_cfa_offset 16
 277              		.cfi_offset 4, -16
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 7


 278              		.cfi_offset 5, -12
 279              		.cfi_offset 6, -8
 280              		.cfi_offset 14, -4
 281 0002 0546     		mov	r5, r0
 282 0004 0E46     		mov	r6, r1
  72:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 283              		.loc 1 72 2 is_stmt 1 view .LVU58
 284              	.LVL21:
  73:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 285              		.loc 1 73 2 view .LVU59
  72:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 286              		.loc 1 72 11 is_stmt 0 view .LVU60
 287 0006 0024     		movs	r4, #0
 288              	.LVL22:
 289              	.L16:
 290              		.loc 1 73 8 is_stmt 1 view .LVU61
 291              		.loc 1 73 9 is_stmt 0 view .LVU62
 292 0008 0221     		movs	r1, #2
 293 000a 0A4B     		ldr	r3, .L22
 294 000c 53F82500 		ldr	r0, [r3, r5, lsl #2]
 295 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 296              	.LVL23:
 297              		.loc 1 73 8 view .LVU63
 298 0014 30B9     		cbnz	r0, .L21
  74:Bsp/periph_spi.c **** 	{
  75:Bsp/periph_spi.c **** 		retry++;
 299              		.loc 1 75 3 is_stmt 1 view .LVU64
 300              		.loc 1 75 8 is_stmt 0 view .LVU65
 301 0016 0134     		adds	r4, r4, #1
 302              	.LVL24:
 303              		.loc 1 75 8 view .LVU66
 304 0018 A4B2     		uxth	r4, r4
 305              	.LVL25:
  76:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 306              		.loc 1 76 3 is_stmt 1 view .LVU67
 307              		.loc 1 76 6 is_stmt 0 view .LVU68
 308 001a B4F57A7F 		cmp	r4, #1000
 309 001e F3D9     		bls	.L16
  77:Bsp/periph_spi.c **** 			return false;
 310              		.loc 1 77 11 view .LVU69
 311 0020 0020     		movs	r0, #0
 312 0022 06E0     		b	.L17
 313              	.L21:
  78:Bsp/periph_spi.c **** 	}
  79:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], TxData);
 314              		.loc 1 79 2 is_stmt 1 view .LVU70
 315 0024 3146     		mov	r1, r6
 316 0026 034B     		ldr	r3, .L22
 317 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 318 002c FFF7FEFF 		bl	SPI_I2S_SendData
 319              	.LVL26:
  80:Bsp/periph_spi.c **** 	return true;
 320              		.loc 1 80 2 view .LVU71
 321              		.loc 1 80 9 is_stmt 0 view .LVU72
 322 0030 0120     		movs	r0, #1
 323              	.L17:
  81:Bsp/periph_spi.c **** }
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 8


 324              		.loc 1 81 1 view .LVU73
 325 0032 70BD     		pop	{r4, r5, r6, pc}
 326              	.LVL27:
 327              	.L23:
 328              		.loc 1 81 1 view .LVU74
 329              		.align	2
 330              	.L22:
 331 0034 00000000 		.word	.LANCHOR0
 332              		.cfi_endproc
 333              	.LFE126:
 335              		.section	.text.periph_SPI_ReadByte,"ax",%progbits
 336              		.align	1
 337              		.global	periph_SPI_ReadByte
 338              		.syntax unified
 339              		.thumb
 340              		.thumb_func
 341              		.fpu fpv4-sp-d16
 343              	periph_SPI_ReadByte:
 344              	.LVL28:
 345              	.LFB127:
  82:Bsp/periph_spi.c **** 
  83:Bsp/periph_spi.c **** bool periph_SPI_ReadByte(SPI_List SPIx, uint8_t *data)
  84:Bsp/periph_spi.c **** {
 346              		.loc 1 84 1 is_stmt 1 view -0
 347              		.cfi_startproc
 348              		@ args = 0, pretend = 0, frame = 0
 349              		@ frame_needed = 0, uses_anonymous_args = 0
 350              		.loc 1 84 1 is_stmt 0 view .LVU76
 351 0000 70B5     		push	{r4, r5, r6, lr}
 352              	.LCFI7:
 353              		.cfi_def_cfa_offset 16
 354              		.cfi_offset 4, -16
 355              		.cfi_offset 5, -12
 356              		.cfi_offset 6, -8
 357              		.cfi_offset 14, -4
 358 0002 0546     		mov	r5, r0
 359 0004 0E46     		mov	r6, r1
  85:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 360              		.loc 1 85 2 is_stmt 1 view .LVU77
 361              	.LVL29:
  86:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 362              		.loc 1 86 2 view .LVU78
  85:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 363              		.loc 1 85 11 is_stmt 0 view .LVU79
 364 0006 0024     		movs	r4, #0
 365              	.LVL30:
 366              	.L25:
 367              		.loc 1 86 8 is_stmt 1 view .LVU80
 368              		.loc 1 86 9 is_stmt 0 view .LVU81
 369 0008 0221     		movs	r1, #2
 370 000a 154B     		ldr	r3, .L35
 371 000c 53F82500 		ldr	r0, [r3, r5, lsl #2]
 372 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 373              	.LVL31:
 374              		.loc 1 86 8 view .LVU82
 375 0014 30B9     		cbnz	r0, .L33
  87:Bsp/periph_spi.c **** 	{
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 9


  88:Bsp/periph_spi.c **** 		retry++;
 376              		.loc 1 88 3 is_stmt 1 view .LVU83
 377              		.loc 1 88 8 is_stmt 0 view .LVU84
 378 0016 0134     		adds	r4, r4, #1
 379              	.LVL32:
 380              		.loc 1 88 8 view .LVU85
 381 0018 A4B2     		uxth	r4, r4
 382              	.LVL33:
  89:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 383              		.loc 1 89 3 is_stmt 1 view .LVU86
 384              		.loc 1 89 6 is_stmt 0 view .LVU87
 385 001a B4F57A7F 		cmp	r4, #1000
 386 001e F3D9     		bls	.L25
  90:Bsp/periph_spi.c **** 			return false;
 387              		.loc 1 90 11 view .LVU88
 388 0020 0020     		movs	r0, #0
 389 0022 1BE0     		b	.L26
 390              	.L33:
  91:Bsp/periph_spi.c **** 	}
  92:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], 0XFF);
 391              		.loc 1 92 2 is_stmt 1 view .LVU89
 392 0024 FF21     		movs	r1, #255
 393 0026 0E4B     		ldr	r3, .L35
 394 0028 53F82500 		ldr	r0, [r3, r5, lsl #2]
 395 002c FFF7FEFF 		bl	SPI_I2S_SendData
 396              	.LVL34:
  93:Bsp/periph_spi.c **** 
  94:Bsp/periph_spi.c **** 	retry = 0;
 397              		.loc 1 94 2 view .LVU90
  95:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 398              		.loc 1 95 2 view .LVU91
  94:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 399              		.loc 1 94 8 is_stmt 0 view .LVU92
 400 0030 0024     		movs	r4, #0
 401              	.LVL35:
 402              	.L28:
 403              		.loc 1 95 8 is_stmt 1 view .LVU93
 404              		.loc 1 95 9 is_stmt 0 view .LVU94
 405 0032 0121     		movs	r1, #1
 406 0034 0A4B     		ldr	r3, .L35
 407 0036 53F82500 		ldr	r0, [r3, r5, lsl #2]
 408 003a FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 409              	.LVL36:
 410              		.loc 1 95 8 view .LVU95
 411 003e 30B9     		cbnz	r0, .L34
  96:Bsp/periph_spi.c **** 	{
  97:Bsp/periph_spi.c **** 		retry++;
 412              		.loc 1 97 3 is_stmt 1 view .LVU96
 413              		.loc 1 97 8 is_stmt 0 view .LVU97
 414 0040 0134     		adds	r4, r4, #1
 415              	.LVL37:
 416              		.loc 1 97 8 view .LVU98
 417 0042 A4B2     		uxth	r4, r4
 418              	.LVL38:
  98:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 419              		.loc 1 98 3 is_stmt 1 view .LVU99
 420              		.loc 1 98 6 is_stmt 0 view .LVU100
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 10


 421 0044 B4F57A7F 		cmp	r4, #1000
 422 0048 F3D9     		bls	.L28
  99:Bsp/periph_spi.c **** 			return false;
 423              		.loc 1 99 11 view .LVU101
 424 004a 0020     		movs	r0, #0
 425 004c 06E0     		b	.L26
 426              	.L34:
 100:Bsp/periph_spi.c **** 	}
 101:Bsp/periph_spi.c **** 	*data = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 427              		.loc 1 101 2 is_stmt 1 view .LVU102
 428              		.loc 1 101 10 is_stmt 0 view .LVU103
 429 004e 044B     		ldr	r3, .L35
 430 0050 53F82500 		ldr	r0, [r3, r5, lsl #2]
 431 0054 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 432              	.LVL39:
 433              		.loc 1 101 8 view .LVU104
 434 0058 3070     		strb	r0, [r6]
 102:Bsp/periph_spi.c **** 	return true;
 435              		.loc 1 102 2 is_stmt 1 view .LVU105
 436              		.loc 1 102 9 is_stmt 0 view .LVU106
 437 005a 0120     		movs	r0, #1
 438              	.L26:
 103:Bsp/periph_spi.c **** }
 439              		.loc 1 103 1 view .LVU107
 440 005c 70BD     		pop	{r4, r5, r6, pc}
 441              	.LVL40:
 442              	.L36:
 443              		.loc 1 103 1 view .LVU108
 444 005e 00BF     		.align	2
 445              	.L35:
 446 0060 00000000 		.word	.LANCHOR0
 447              		.cfi_endproc
 448              	.LFE127:
 450              		.section	.text.periph_SPI_ReadWriteByte,"ax",%progbits
 451              		.align	1
 452              		.global	periph_SPI_ReadWriteByte
 453              		.syntax unified
 454              		.thumb
 455              		.thumb_func
 456              		.fpu fpv4-sp-d16
 458              	periph_SPI_ReadWriteByte:
 459              	.LVL41:
 460              	.LFB128:
 104:Bsp/periph_spi.c **** 
 105:Bsp/periph_spi.c **** bool periph_SPI_ReadWriteByte(SPI_List SPIx, uint8_t TxData, uint8_t *RxData)
 106:Bsp/periph_spi.c **** {
 461              		.loc 1 106 1 is_stmt 1 view -0
 462              		.cfi_startproc
 463              		@ args = 0, pretend = 0, frame = 0
 464              		@ frame_needed = 0, uses_anonymous_args = 0
 465              		.loc 1 106 1 is_stmt 0 view .LVU110
 466 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 467              	.LCFI8:
 468              		.cfi_def_cfa_offset 24
 469              		.cfi_offset 3, -24
 470              		.cfi_offset 4, -20
 471              		.cfi_offset 5, -16
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 11


 472              		.cfi_offset 6, -12
 473              		.cfi_offset 7, -8
 474              		.cfi_offset 14, -4
 475 0002 0546     		mov	r5, r0
 476 0004 0F46     		mov	r7, r1
 477 0006 1646     		mov	r6, r2
 107:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 478              		.loc 1 107 2 is_stmt 1 view .LVU111
 479              	.LVL42:
 108:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 480              		.loc 1 108 2 view .LVU112
 107:Bsp/periph_spi.c **** 	uint16_t retry = 0;
 481              		.loc 1 107 11 is_stmt 0 view .LVU113
 482 0008 0024     		movs	r4, #0
 483              	.LVL43:
 484              	.L38:
 485              		.loc 1 108 8 is_stmt 1 view .LVU114
 486              		.loc 1 108 9 is_stmt 0 view .LVU115
 487 000a 0221     		movs	r1, #2
 488 000c 144B     		ldr	r3, .L48
 489 000e 53F82500 		ldr	r0, [r3, r5, lsl #2]
 490 0012 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 491              	.LVL44:
 492              		.loc 1 108 8 view .LVU116
 493 0016 30B9     		cbnz	r0, .L46
 109:Bsp/periph_spi.c **** 	{
 110:Bsp/periph_spi.c **** 		retry++;
 494              		.loc 1 110 3 is_stmt 1 view .LVU117
 495              		.loc 1 110 8 is_stmt 0 view .LVU118
 496 0018 0134     		adds	r4, r4, #1
 497              	.LVL45:
 498              		.loc 1 110 8 view .LVU119
 499 001a A4B2     		uxth	r4, r4
 500              	.LVL46:
 111:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 501              		.loc 1 111 3 is_stmt 1 view .LVU120
 502              		.loc 1 111 6 is_stmt 0 view .LVU121
 503 001c B4F57A7F 		cmp	r4, #1000
 504 0020 F3D9     		bls	.L38
 112:Bsp/periph_spi.c **** 			return false;
 505              		.loc 1 112 11 view .LVU122
 506 0022 0020     		movs	r0, #0
 507 0024 1BE0     		b	.L39
 508              	.L46:
 113:Bsp/periph_spi.c **** 	}
 114:Bsp/periph_spi.c **** 	SPI_I2S_SendData(SPI_PORT[SPIx], TxData);
 509              		.loc 1 114 2 is_stmt 1 view .LVU123
 510 0026 3946     		mov	r1, r7
 511 0028 0D4B     		ldr	r3, .L48
 512 002a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 513 002e FFF7FEFF 		bl	SPI_I2S_SendData
 514              	.LVL47:
 115:Bsp/periph_spi.c **** 
 116:Bsp/periph_spi.c **** 	retry = 0;
 515              		.loc 1 116 2 view .LVU124
 117:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 516              		.loc 1 117 2 view .LVU125
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 12


 116:Bsp/periph_spi.c **** 	while (SPI_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 517              		.loc 1 116 8 is_stmt 0 view .LVU126
 518 0032 0024     		movs	r4, #0
 519              	.LVL48:
 520              	.L41:
 521              		.loc 1 117 8 is_stmt 1 view .LVU127
 522              		.loc 1 117 9 is_stmt 0 view .LVU128
 523 0034 0121     		movs	r1, #1
 524 0036 0A4B     		ldr	r3, .L48
 525 0038 53F82500 		ldr	r0, [r3, r5, lsl #2]
 526 003c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 527              	.LVL49:
 528              		.loc 1 117 8 view .LVU129
 529 0040 30B9     		cbnz	r0, .L47
 118:Bsp/periph_spi.c **** 	{
 119:Bsp/periph_spi.c **** 		retry++;
 530              		.loc 1 119 3 is_stmt 1 view .LVU130
 531              		.loc 1 119 8 is_stmt 0 view .LVU131
 532 0042 0134     		adds	r4, r4, #1
 533              	.LVL50:
 534              		.loc 1 119 8 view .LVU132
 535 0044 A4B2     		uxth	r4, r4
 536              	.LVL51:
 120:Bsp/periph_spi.c **** 		if (retry > SPI_TIMEOUT)
 537              		.loc 1 120 3 is_stmt 1 view .LVU133
 538              		.loc 1 120 6 is_stmt 0 view .LVU134
 539 0046 B4F57A7F 		cmp	r4, #1000
 540 004a F3D9     		bls	.L41
 121:Bsp/periph_spi.c **** 			return false;
 541              		.loc 1 121 11 view .LVU135
 542 004c 0020     		movs	r0, #0
 543 004e 06E0     		b	.L39
 544              	.L47:
 122:Bsp/periph_spi.c **** 	}
 123:Bsp/periph_spi.c **** 
 124:Bsp/periph_spi.c **** 	*RxData = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 545              		.loc 1 124 2 is_stmt 1 view .LVU136
 546              		.loc 1 124 12 is_stmt 0 view .LVU137
 547 0050 034B     		ldr	r3, .L48
 548 0052 53F82500 		ldr	r0, [r3, r5, lsl #2]
 549 0056 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 550              	.LVL52:
 551              		.loc 1 124 10 view .LVU138
 552 005a 3070     		strb	r0, [r6]
 125:Bsp/periph_spi.c **** 
 126:Bsp/periph_spi.c **** 	return true;
 553              		.loc 1 126 2 is_stmt 1 view .LVU139
 554              		.loc 1 126 9 is_stmt 0 view .LVU140
 555 005c 0120     		movs	r0, #1
 556              	.L39:
 127:Bsp/periph_spi.c **** }
 557              		.loc 1 127 1 view .LVU141
 558 005e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 559              	.LVL53:
 560              	.L49:
 561              		.loc 1 127 1 view .LVU142
 562              		.align	2
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 13


 563              	.L48:
 564 0060 00000000 		.word	.LANCHOR0
 565              		.cfi_endproc
 566              	.LFE128:
 568              		.section	.text.periph_SPI_Transfer,"ax",%progbits
 569              		.align	1
 570              		.global	periph_SPI_Transfer
 571              		.syntax unified
 572              		.thumb
 573              		.thumb_func
 574              		.fpu fpv4-sp-d16
 576              	periph_SPI_Transfer:
 577              	.LVL54:
 578              	.LFB129:
 128:Bsp/periph_spi.c **** 
 129:Bsp/periph_spi.c **** uint16_t periph_SPI_Transfer(SPI_List SPIx, uint8_t *rx, uint8_t *tx, uint16_t len)
 130:Bsp/periph_spi.c **** {
 579              		.loc 1 130 1 is_stmt 1 view -0
 580              		.cfi_startproc
 581              		@ args = 0, pretend = 0, frame = 0
 582              		@ frame_needed = 0, uses_anonymous_args = 0
 583              		.loc 1 130 1 is_stmt 0 view .LVU144
 584 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 585              	.LCFI9:
 586              		.cfi_def_cfa_offset 32
 587              		.cfi_offset 3, -32
 588              		.cfi_offset 4, -28
 589              		.cfi_offset 5, -24
 590              		.cfi_offset 6, -20
 591              		.cfi_offset 7, -16
 592              		.cfi_offset 8, -12
 593              		.cfi_offset 9, -8
 594              		.cfi_offset 14, -4
 595 0004 0546     		mov	r5, r0
 596 0006 0F46     		mov	r7, r1
 597 0008 1646     		mov	r6, r2
 131:Bsp/periph_spi.c **** 	uint16_t spitimeout = SPI_TIMEOUT;
 598              		.loc 1 131 2 is_stmt 1 view .LVU145
 599              	.LVL55:
 132:Bsp/periph_spi.c **** 	uint8_t b;
 600              		.loc 1 132 2 view .LVU146
 133:Bsp/periph_spi.c **** 	SPI_PORT[SPIx]->DR;
 601              		.loc 1 133 2 view .LVU147
 602              		.loc 1 133 10 is_stmt 0 view .LVU148
 603 000a 204A     		ldr	r2, .L65
 604              	.LVL56:
 605              		.loc 1 133 10 view .LVU149
 606 000c 52F82020 		ldr	r2, [r2, r0, lsl #2]
 607              		.loc 1 133 16 view .LVU150
 608 0010 9289     		ldrh	r2, [r2, #12]
 134:Bsp/periph_spi.c **** 	while (len--)
 609              		.loc 1 134 2 is_stmt 1 view .LVU151
 131:Bsp/periph_spi.c **** 	uint8_t b;
 610              		.loc 1 131 11 is_stmt 0 view .LVU152
 611 0012 4FF47A74 		mov	r4, #1000
 612              	.LVL57:
 613              	.L51:
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 14


 614              		.loc 1 134 8 is_stmt 1 view .LVU153
 615              		.loc 1 134 12 is_stmt 0 view .LVU154
 616 0016 03F1FF38 		add	r8, r3, #-1
 617 001a 1FFA88F8 		uxth	r8, r8
 618              	.LVL58:
 619              		.loc 1 134 8 view .LVU155
 620 001e 83B3     		cbz	r3, .L62
 135:Bsp/periph_spi.c **** 	{
 136:Bsp/periph_spi.c **** 		b = tx ? *(tx++) : 0xff;
 621              		.loc 1 136 3 is_stmt 1 view .LVU156
 622              		.loc 1 136 5 is_stmt 0 view .LVU157
 623 0020 6EB1     		cbz	r6, .L60
 624              	.LVL59:
 625              		.loc 1 136 5 discriminator 1 view .LVU158
 626 0022 16F8019B 		ldrb	r9, [r6], #1	@ zero_extendqisi2
 627              	.LVL60:
 628              	.L53:
 137:Bsp/periph_spi.c **** 
 138:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET)
 629              		.loc 1 138 9 is_stmt 1 view .LVU159
 630              		.loc 1 138 10 is_stmt 0 view .LVU160
 631 0026 0221     		movs	r1, #2
 632 0028 184B     		ldr	r3, .L65
 633 002a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 634 002e FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 635              	.LVL61:
 636              		.loc 1 138 9 view .LVU161
 637 0032 38B9     		cbnz	r0, .L63
 139:Bsp/periph_spi.c **** 		{
 140:Bsp/periph_spi.c **** 			if ((spitimeout--) == 0)
 638              		.loc 1 140 4 is_stmt 1 view .LVU162
 639              		.loc 1 140 19 is_stmt 0 view .LVU163
 640 0034 631E     		subs	r3, r4, #1
 641 0036 9BB2     		uxth	r3, r3
 642              	.LVL62:
 643              		.loc 1 140 7 view .LVU164
 644 0038 24B3     		cbz	r4, .L54
 645              		.loc 1 140 19 view .LVU165
 646 003a 1C46     		mov	r4, r3
 647 003c F3E7     		b	.L53
 648              	.LVL63:
 649              	.L60:
 136:Bsp/periph_spi.c **** 
 650              		.loc 1 136 5 view .LVU166
 651 003e 4FF0FF09 		mov	r9, #255
 652              	.LVL64:
 138:Bsp/periph_spi.c **** 		{
 653              		.loc 1 138 3 is_stmt 1 view .LVU167
 138:Bsp/periph_spi.c **** 		{
 654              		.loc 1 138 9 is_stmt 0 view .LVU168
 655 0042 F0E7     		b	.L53
 656              	.LVL65:
 657              	.L63:
 141:Bsp/periph_spi.c **** 			{
 142:Bsp/periph_spi.c **** 				return 0;
 143:Bsp/periph_spi.c **** 			}
 144:Bsp/periph_spi.c **** 		}
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 15


 145:Bsp/periph_spi.c **** 		SPI_I2S_SendData(SPI_PORT[SPIx], b);
 658              		.loc 1 145 3 is_stmt 1 view .LVU169
 659 0044 4946     		mov	r1, r9
 660 0046 114B     		ldr	r3, .L65
 661 0048 53F82500 		ldr	r0, [r3, r5, lsl #2]
 662 004c FFF7FEFF 		bl	SPI_I2S_SendData
 663              	.LVL66:
 146:Bsp/periph_spi.c **** 
 147:Bsp/periph_spi.c **** 		spitimeout = SPI_TIMEOUT;
 664              		.loc 1 147 3 view .LVU170
 148:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 665              		.loc 1 148 3 view .LVU171
 147:Bsp/periph_spi.c **** 		while (SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_RXNE) == RESET)
 666              		.loc 1 147 14 is_stmt 0 view .LVU172
 667 0050 4FF47A74 		mov	r4, #1000
 668              	.LVL67:
 669              	.L56:
 670              		.loc 1 148 9 is_stmt 1 view .LVU173
 671              		.loc 1 148 10 is_stmt 0 view .LVU174
 672 0054 0121     		movs	r1, #1
 673 0056 0D4B     		ldr	r3, .L65
 674 0058 53F82500 		ldr	r0, [r3, r5, lsl #2]
 675 005c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 676              	.LVL68:
 677              		.loc 1 148 9 view .LVU175
 678 0060 20B9     		cbnz	r0, .L64
 149:Bsp/periph_spi.c **** 		{
 150:Bsp/periph_spi.c **** 			if ((spitimeout--) == 0)
 679              		.loc 1 150 4 is_stmt 1 view .LVU176
 680              		.loc 1 150 19 is_stmt 0 view .LVU177
 681 0062 631E     		subs	r3, r4, #1
 682 0064 9BB2     		uxth	r3, r3
 683              	.LVL69:
 684              		.loc 1 150 7 view .LVU178
 685 0066 6CB1     		cbz	r4, .L54
 686              		.loc 1 150 19 view .LVU179
 687 0068 1C46     		mov	r4, r3
 688 006a F3E7     		b	.L56
 689              	.LVL70:
 690              	.L64:
 151:Bsp/periph_spi.c **** 			{
 152:Bsp/periph_spi.c **** 				return 0;
 153:Bsp/periph_spi.c **** 			}
 154:Bsp/periph_spi.c **** 		}
 155:Bsp/periph_spi.c **** 
 156:Bsp/periph_spi.c **** 		b = SPI_I2S_ReceiveData(SPI_PORT[SPIx]);
 691              		.loc 1 156 3 is_stmt 1 view .LVU180
 692              		.loc 1 156 7 is_stmt 0 view .LVU181
 693 006c 074B     		ldr	r3, .L65
 694 006e 53F82500 		ldr	r0, [r3, r5, lsl #2]
 695 0072 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 696              	.LVL71:
 697              		.loc 1 156 5 view .LVU182
 698 0076 C0B2     		uxtb	r0, r0
 699              	.LVL72:
 157:Bsp/periph_spi.c **** 		if (rx)
 700              		.loc 1 157 3 is_stmt 1 view .LVU183
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 16


 701              		.loc 1 157 6 is_stmt 0 view .LVU184
 702 0078 0FB1     		cbz	r7, .L58
 158:Bsp/periph_spi.c **** 		{
 159:Bsp/periph_spi.c **** 			*(rx++) = b;
 703              		.loc 1 159 4 is_stmt 1 view .LVU185
 704              	.LVL73:
 705              		.loc 1 159 12 is_stmt 0 view .LVU186
 706 007a 07F8010B 		strb	r0, [r7], #1
 707              	.LVL74:
 708              	.L58:
 709              		.loc 1 159 8 view .LVU187
 710 007e 4346     		mov	r3, r8
 711 0080 C9E7     		b	.L51
 712              	.LVL75:
 713              	.L62:
 160:Bsp/periph_spi.c **** 		}
 161:Bsp/periph_spi.c **** 	}
 162:Bsp/periph_spi.c **** 	return len;
 714              		.loc 1 162 9 view .LVU188
 715 0082 4446     		mov	r4, r8
 716              	.LVL76:
 717              	.L54:
 163:Bsp/periph_spi.c **** }
 718              		.loc 1 163 1 view .LVU189
 719 0084 2046     		mov	r0, r4
 720 0086 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 721              	.LVL77:
 722              	.L66:
 723              		.loc 1 163 1 view .LVU190
 724 008a 00BF     		.align	2
 725              	.L65:
 726 008c 00000000 		.word	.LANCHOR0
 727              		.cfi_endproc
 728              	.LFE129:
 730              		.section	.text.periph_SPI_CheckBusy,"ax",%progbits
 731              		.align	1
 732              		.global	periph_SPI_CheckBusy
 733              		.syntax unified
 734              		.thumb
 735              		.thumb_func
 736              		.fpu fpv4-sp-d16
 738              	periph_SPI_CheckBusy:
 739              	.LVL78:
 740              	.LFB130:
 164:Bsp/periph_spi.c **** 
 165:Bsp/periph_spi.c **** uint8_t periph_SPI_CheckBusy(SPI_List SPIx)
 166:Bsp/periph_spi.c **** {
 741              		.loc 1 166 1 is_stmt 1 view -0
 742              		.cfi_startproc
 743              		@ args = 0, pretend = 0, frame = 0
 744              		@ frame_needed = 0, uses_anonymous_args = 0
 745              		.loc 1 166 1 is_stmt 0 view .LVU192
 746 0000 10B5     		push	{r4, lr}
 747              	.LCFI10:
 748              		.cfi_def_cfa_offset 8
 749              		.cfi_offset 4, -8
 750              		.cfi_offset 14, -4
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 17


 751 0002 0446     		mov	r4, r0
 167:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 752              		.loc 1 167 2 is_stmt 1 view .LVU193
 753              		.loc 1 167 9 is_stmt 0 view .LVU194
 754 0004 0221     		movs	r1, #2
 755 0006 0A4B     		ldr	r3, .L73
 756 0008 53F82000 		ldr	r0, [r3, r0, lsl #2]
 757              	.LVL79:
 758              		.loc 1 167 9 view .LVU195
 759 000c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 760              	.LVL80:
 761              		.loc 1 167 74 view .LVU196
 762 0010 08B9     		cbnz	r0, .L72
 763 0012 0120     		movs	r0, #1
 764              	.L68:
 168:Bsp/periph_spi.c **** }
 765              		.loc 1 168 1 discriminator 6 view .LVU197
 766 0014 10BD     		pop	{r4, pc}
 767              	.L72:
 167:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 768              		.loc 1 167 77 discriminator 2 view .LVU198
 769 0016 8021     		movs	r1, #128
 770 0018 054B     		ldr	r3, .L73
 771 001a 53F82400 		ldr	r0, [r3, r4, lsl #2]
 772 001e FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 773              	.LVL81:
 167:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 774              		.loc 1 167 74 discriminator 2 view .LVU199
 775 0022 0128     		cmp	r0, #1
 776 0024 01D0     		beq	.L70
 167:Bsp/periph_spi.c **** 	return SPI_I2S_GetFlagStatus(SPI_PORT[SPIx], SPI_I2S_FLAG_TXE) == RESET || SPI_I2S_GetFlagStatus(S
 777              		.loc 1 167 74 view .LVU200
 778 0026 0020     		movs	r0, #0
 779 0028 F4E7     		b	.L68
 780              	.L70:
 781 002a 0120     		movs	r0, #1
 782 002c F2E7     		b	.L68
 783              	.L74:
 784 002e 00BF     		.align	2
 785              	.L73:
 786 0030 00000000 		.word	.LANCHOR0
 787              		.cfi_endproc
 788              	.LFE130:
 790              		.global	SpiErrorCount2
 791              		.global	SpiErrorCount
 792              		.section	.bss.SpiErrorCount,"aw",%nobits
 793              		.align	1
 796              	SpiErrorCount:
 797 0000 0000     		.space	2
 798              		.section	.bss.SpiErrorCount2,"aw",%nobits
 799              		.align	1
 802              	SpiErrorCount2:
 803 0000 0000     		.space	2
 804              		.section	.rodata.SPI_CLK,"a"
 805              		.align	2
 806              		.set	.LANCHOR2,. + 0
 809              	SPI_CLK:
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 18


 810 0000 00100000 		.word	4096
 811 0004 00400000 		.word	16384
 812 0008 00800000 		.word	32768
 813              		.section	.rodata.SPI_IO_Init,"a"
 814              		.align	2
 815              		.set	.LANCHOR1,. + 0
 818              	SPI_IO_Init:
 819 0000 00000000 		.word	GPIO_SPI1_IO_Init
 820 0004 00000000 		.word	GPIO_SPI2_IO_Init
 821 0008 00000000 		.word	GPIO_SPI3_IO_Init
 822              		.section	.rodata.SPI_PORT,"a"
 823              		.align	2
 824              		.set	.LANCHOR0,. + 0
 827              	SPI_PORT:
 828 0000 00300140 		.word	1073819648
 829 0004 00380040 		.word	1073756160
 830 0008 003C0040 		.word	1073757184
 831              		.section	.rodata.divisorMap,"a"
 832              		.align	2
 833              		.set	.LANCHOR3,. + 0
 836              	divisorMap:
 837 0000 3800     		.short	56
 838 0002 3000     		.short	48
 839 0004 1000     		.short	16
 840 0006 0800     		.short	8
 841 0008 0000     		.short	0
 842              		.text
 843              	.Letext0:
 844              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\inc
 845              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\inc
 846              		.file 4 "USER/stm32f4xx.h"
 847              		.file 5 "FWLIB/inc/stm32f4xx_spi.h"
 848              		.file 6 "Bsp/periph_spi.h"
 849              		.file 7 "FWLIB/inc/stm32f4xx_rcc.h"
ARM GAS  C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s 			page 19


DEFINED SYMBOLS
                            *ABS*:00000000 periph_spi.c
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:18     .text.periph_SPI_DeInit:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:26     .text.periph_SPI_DeInit:00000000 periph_SPI_DeInit
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:52     .text.periph_SPI_DeInit:00000010 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:57     .text.periph_SPI_Init:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:64     .text.periph_SPI_Init:00000000 periph_SPI_Init
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:182    .text.periph_SPI_Init:00000090 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:190    .text.periph_SPI_SetSpeed:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:197    .text.periph_SPI_SetSpeed:00000000 periph_SPI_SetSpeed
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:253    .text.periph_SPI_SetSpeed:00000030 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:259    .text.periph_SPI_WriteByte:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:266    .text.periph_SPI_WriteByte:00000000 periph_SPI_WriteByte
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:331    .text.periph_SPI_WriteByte:00000034 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:336    .text.periph_SPI_ReadByte:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:343    .text.periph_SPI_ReadByte:00000000 periph_SPI_ReadByte
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:446    .text.periph_SPI_ReadByte:00000060 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:451    .text.periph_SPI_ReadWriteByte:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:458    .text.periph_SPI_ReadWriteByte:00000000 periph_SPI_ReadWriteByte
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:564    .text.periph_SPI_ReadWriteByte:00000060 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:569    .text.periph_SPI_Transfer:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:576    .text.periph_SPI_Transfer:00000000 periph_SPI_Transfer
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:726    .text.periph_SPI_Transfer:0000008c $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:731    .text.periph_SPI_CheckBusy:00000000 $t
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:738    .text.periph_SPI_CheckBusy:00000000 periph_SPI_CheckBusy
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:786    .text.periph_SPI_CheckBusy:00000030 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:802    .bss.SpiErrorCount2:00000000 SpiErrorCount2
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:796    .bss.SpiErrorCount:00000000 SpiErrorCount
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:793    .bss.SpiErrorCount:00000000 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:799    .bss.SpiErrorCount2:00000000 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:805    .rodata.SPI_CLK:00000000 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:809    .rodata.SPI_CLK:00000000 SPI_CLK
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:814    .rodata.SPI_IO_Init:00000000 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:818    .rodata.SPI_IO_Init:00000000 SPI_IO_Init
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:823    .rodata.SPI_PORT:00000000 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:827    .rodata.SPI_PORT:00000000 SPI_PORT
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:832    .rodata.divisorMap:00000000 $d
C:\Users\huav\AppData\Local\Temp\cc1OiLxE.s:836    .rodata.divisorMap:00000000 divisorMap

UNDEFINED SYMBOLS
SPI_I2S_DeInit
RCC_APB2PeriphClockCmd
SPI_Cmd
SPI_Init
RCC_APB1PeriphClockCmd
SPI_I2S_GetFlagStatus
SPI_I2S_SendData
SPI_I2S_ReceiveData
GPIO_SPI1_IO_Init
GPIO_SPI2_IO_Init
GPIO_SPI3_IO_Init
