ARM GAS  /tmp/ccAh0Y0v.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usb_bsp.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USB_OTG_BSP_Init,"ax",%progbits
  18              		.align	1
  19              		.global	USB_OTG_BSP_Init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	USB_OTG_BSP_Init:
  26              	.LFB124:
  27              		.file 1 "USB/core/usb_bsp.c"
   1:USB/core/usb_bsp.c **** /**
   2:USB/core/usb_bsp.c ****   ******************************************************************************
   3:USB/core/usb_bsp.c ****   * @file    usb_bsp.c
   4:USB/core/usb_bsp.c ****   * @author  MCD Application Team
   5:USB/core/usb_bsp.c ****   * @version V1.1.0
   6:USB/core/usb_bsp.c ****   * @date    19-March-2012
   7:USB/core/usb_bsp.c ****   * @brief   This file is responsible to offer board support package and is 
   8:USB/core/usb_bsp.c ****   *          configurable by user.
   9:USB/core/usb_bsp.c ****   ******************************************************************************
  10:USB/core/usb_bsp.c ****   * @attention
  11:USB/core/usb_bsp.c ****   *
  12:USB/core/usb_bsp.c ****   * <h2><center>&copy; COPYRIGHT 2012 STMicroelectronics</center></h2>
  13:USB/core/usb_bsp.c ****   *
  14:USB/core/usb_bsp.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  15:USB/core/usb_bsp.c ****   * You may not use this file except in compliance with the License.
  16:USB/core/usb_bsp.c ****   * You may obtain a copy of the License at:
  17:USB/core/usb_bsp.c ****   *
  18:USB/core/usb_bsp.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
  19:USB/core/usb_bsp.c ****   *
  20:USB/core/usb_bsp.c ****   * Unless required by applicable law or agreed to in writing, software 
  21:USB/core/usb_bsp.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
  22:USB/core/usb_bsp.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  23:USB/core/usb_bsp.c ****   * See the License for the specific language governing permissions and
  24:USB/core/usb_bsp.c ****   * limitations under the License.
  25:USB/core/usb_bsp.c ****   *
  26:USB/core/usb_bsp.c ****   ******************************************************************************
  27:USB/core/usb_bsp.c ****   */ 
  28:USB/core/usb_bsp.c **** 
  29:USB/core/usb_bsp.c **** /* Includes ------------------------------------------------------------------*/
  30:USB/core/usb_bsp.c **** #include "usb_bsp.h"
  31:USB/core/usb_bsp.c **** #include "usbd_conf.h"
ARM GAS  /tmp/ccAh0Y0v.s 			page 2


  32:USB/core/usb_bsp.c **** #include "tm_stm32f4_usb_vcp.h"
  33:USB/core/usb_bsp.c **** 
  34:USB/core/usb_bsp.c **** #include "defines.h"
  35:USB/core/usb_bsp.c **** 
  36:USB/core/usb_bsp.c **** #ifndef USB_VCP_NVIC_PRIORITY
  37:USB/core/usb_bsp.c **** #define USB_VCP_NVIC_PRIORITY			0x01
  38:USB/core/usb_bsp.c **** #endif
  39:USB/core/usb_bsp.c **** 
  40:USB/core/usb_bsp.c **** #ifndef USB_VCP_NVIC_SUBPRIORITY
  41:USB/core/usb_bsp.c **** #define USB_VCP_NVIC_SUBPRIORITY		0x01
  42:USB/core/usb_bsp.c **** #endif
  43:USB/core/usb_bsp.c **** 
  44:USB/core/usb_bsp.c **** extern USB_OTG_CORE_HANDLE           USB_OTG_dev;
  45:USB/core/usb_bsp.c **** extern uint32_t USBD_OTG_ISR_Handler(USB_OTG_CORE_HANDLE *pdev);
  46:USB/core/usb_bsp.c **** 
  47:USB/core/usb_bsp.c **** /**
  48:USB/core/usb_bsp.c **** * @brief  USB_OTG_BSP_Init
  49:USB/core/usb_bsp.c **** *         Initilizes BSP configurations
  50:USB/core/usb_bsp.c **** * @param  None
  51:USB/core/usb_bsp.c **** * @retval None
  52:USB/core/usb_bsp.c **** */
  53:USB/core/usb_bsp.c **** 
  54:USB/core/usb_bsp.c **** void USB_OTG_BSP_Init(USB_OTG_CORE_HANDLE *pdev) {
  28              		.loc 1 54 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 20
  36              		.cfi_offset 4, -20
  37              		.cfi_offset 5, -16
  38              		.cfi_offset 6, -12
  39              		.cfi_offset 7, -8
  40              		.cfi_offset 14, -4
  41 0002 83B0     		sub	sp, sp, #12
  42              	.LCFI1:
  43              		.cfi_def_cfa_offset 32
  55:USB/core/usb_bsp.c ****   GPIO_InitTypeDef GPIO_InitStructure;   
  56:USB/core/usb_bsp.c **** #ifdef USE_USB_OTG_FS
  57:USB/core/usb_bsp.c **** 	RCC_AHB1PeriphClockCmd( RCC_AHB1Periph_GPIOA , ENABLE);  
  44              		.loc 1 57 0
  45 0004 0121     		movs	r1, #1
  46 0006 0846     		mov	r0, r1
  47              	.LVL1:
  48 0008 FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  49              	.LVL2:
  58:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Pin = 	GPIO_Pin_11 | 	// OTG FS Data -
  50              		.loc 1 58 0
  51 000c 4FF4C053 		mov	r3, #6144
  52 0010 0093     		str	r3, [sp]
  59:USB/core/usb_bsp.c **** 																	   GPIO_Pin_12;	// OTG FS Data +
  60:USB/core/usb_bsp.c **** 
  61:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
  53              		.loc 1 61 0
  54 0012 0327     		movs	r7, #3
ARM GAS  /tmp/ccAh0Y0v.s 			page 3


  55 0014 8DF80570 		strb	r7, [sp, #5]
  62:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
  56              		.loc 1 62 0
  57 0018 0223     		movs	r3, #2
  58 001a 8DF80430 		strb	r3, [sp, #4]
  63:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
  59              		.loc 1 63 0
  60 001e 0026     		movs	r6, #0
  61 0020 8DF80660 		strb	r6, [sp, #6]
  64:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL ;//NOPULL
  62              		.loc 1 64 0
  63 0024 8DF80760 		strb	r6, [sp, #7]
  65:USB/core/usb_bsp.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure);  
  64              		.loc 1 65 0
  65 0028 1D4C     		ldr	r4, .L3
  66 002a 6946     		mov	r1, sp
  67 002c 2046     		mov	r0, r4
  68 002e FFF7FEFF 		bl	GPIO_Init
  69              	.LVL3:
  66:USB/core/usb_bsp.c **** 
  67:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource11, GPIO_AF_OTG1_FS); 
  70              		.loc 1 67 0
  71 0032 0A22     		movs	r2, #10
  72 0034 0B21     		movs	r1, #11
  73 0036 2046     		mov	r0, r4
  74 0038 FFF7FEFF 		bl	GPIO_PinAFConfig
  75              	.LVL4:
  68:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource12, GPIO_AF_OTG1_FS);
  76              		.loc 1 68 0
  77 003c 0A22     		movs	r2, #10
  78 003e 0C21     		movs	r1, #12
  79 0040 2046     		mov	r0, r4
  80 0042 FFF7FEFF 		bl	GPIO_PinAFConfig
  81              	.LVL5:
  69:USB/core/usb_bsp.c **** 
  70:USB/core/usb_bsp.c **** #ifndef USB_VCP_DISABLE_VBUS
  71:USB/core/usb_bsp.c **** 	// Configure  VBUS Pin
  72:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
  82              		.loc 1 72 0
  83 0046 4FF40073 		mov	r3, #512
  84 004a 0093     		str	r3, [sp]
  73:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
  85              		.loc 1 73 0
  86 004c 8DF80570 		strb	r7, [sp, #5]
  74:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
  87              		.loc 1 74 0
  88 0050 8DF80460 		strb	r6, [sp, #4]
  75:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;
  89              		.loc 1 75 0
  90 0054 0125     		movs	r5, #1
  91 0056 8DF80650 		strb	r5, [sp, #6]
  76:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL ;
  92              		.loc 1 76 0
  93 005a 8DF80760 		strb	r6, [sp, #7]
  77:USB/core/usb_bsp.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure);
  94              		.loc 1 77 0
  95 005e 6946     		mov	r1, sp
ARM GAS  /tmp/ccAh0Y0v.s 			page 4


  96 0060 2046     		mov	r0, r4
  97 0062 FFF7FEFF 		bl	GPIO_Init
  98              	.LVL6:
  78:USB/core/usb_bsp.c **** #endif
  79:USB/core/usb_bsp.c **** 
  80:USB/core/usb_bsp.c **** #ifndef USB_VCP_DISABLE_ID
  81:USB/core/usb_bsp.c **** 	// Configure ID pin
  82:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;
  99              		.loc 1 82 0
 100 0066 4FF48063 		mov	r3, #1024
 101 006a 0093     		str	r3, [sp]
  83:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;
 102              		.loc 1 83 0
 103 006c 8DF80650 		strb	r5, [sp, #6]
  84:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP ;  
 104              		.loc 1 84 0
 105 0070 8DF80750 		strb	r5, [sp, #7]
  85:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
 106              		.loc 1 85 0
 107 0074 8DF80570 		strb	r7, [sp, #5]
  86:USB/core/usb_bsp.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure);  
 108              		.loc 1 86 0
 109 0078 6946     		mov	r1, sp
 110 007a 2046     		mov	r0, r4
 111 007c FFF7FEFF 		bl	GPIO_Init
 112              	.LVL7:
  87:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource10, GPIO_AF_OTG1_FS); 
 113              		.loc 1 87 0
 114 0080 0A22     		movs	r2, #10
 115 0082 1146     		mov	r1, r2
 116 0084 2046     		mov	r0, r4
 117 0086 FFF7FEFF 		bl	GPIO_PinAFConfig
 118              	.LVL8:
  88:USB/core/usb_bsp.c **** #endif
  89:USB/core/usb_bsp.c **** 
  90:USB/core/usb_bsp.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);
 119              		.loc 1 90 0
 120 008a 2946     		mov	r1, r5
 121 008c 4FF48040 		mov	r0, #16384
 122 0090 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 123              	.LVL9:
  91:USB/core/usb_bsp.c **** 	RCC_AHB2PeriphClockCmd(RCC_AHB2Periph_OTG_FS, ENABLE); 
 124              		.loc 1 91 0
 125 0094 2946     		mov	r1, r5
 126 0096 8020     		movs	r0, #128
 127 0098 FFF7FEFF 		bl	RCC_AHB2PeriphClockCmd
 128              	.LVL10:
  92:USB/core/usb_bsp.c ****   
  93:USB/core/usb_bsp.c **** #else
  94:USB/core/usb_bsp.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);
  95:USB/core/usb_bsp.c **** 
  96:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Pin = 	GPIO_Pin_14 | // Data -
  97:USB/core/usb_bsp.c **** 									GPIO_Pin_15;  // Data +
  98:USB/core/usb_bsp.c **** 
  99:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
 100:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 101:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
ARM GAS  /tmp/ccAh0Y0v.s 			page 5


 102:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
 103:USB/core/usb_bsp.c **** 	GPIO_Init(GPIOB, &GPIO_InitStructure);
 104:USB/core/usb_bsp.c **** 
 105:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource14, GPIO_AF_OTG2_FS);
 106:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource15, GPIO_AF_OTG2_FS);
 107:USB/core/usb_bsp.c **** 	
 108:USB/core/usb_bsp.c **** #ifndef USB_VCP_DISABLE_VBUS
 109:USB/core/usb_bsp.c **** 	//Configure VBUS Pin
 110:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_13;
 111:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
 112:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
 113:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;
 114:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
 115:USB/core/usb_bsp.c **** 	GPIO_Init(GPIOB, &GPIO_InitStructure);
 116:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource13, GPIO_AF_OTG2_FS);
 117:USB/core/usb_bsp.c **** #endif
 118:USB/core/usb_bsp.c **** 
 119:USB/core/usb_bsp.c **** #ifndef USB_VCP_DISABLE_ID
 120:USB/core/usb_bsp.c **** 	//Configure ID pin
 121:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Pin =  GPIO_Pin_12;
 122:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
 123:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 124:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;
 125:USB/core/usb_bsp.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
 126:USB/core/usb_bsp.c **** 	GPIO_Init(GPIOB, &GPIO_InitStructure);
 127:USB/core/usb_bsp.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource12, GPIO_AF_OTG2_FS);
 128:USB/core/usb_bsp.c **** #endif
 129:USB/core/usb_bsp.c **** 
 130:USB/core/usb_bsp.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);
 131:USB/core/usb_bsp.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_OTG_HS, ENABLE);
 132:USB/core/usb_bsp.c **** 
 133:USB/core/usb_bsp.c **** #endif
 134:USB/core/usb_bsp.c **** }
 129              		.loc 1 134 0
 130 009c 03B0     		add	sp, sp, #12
 131              	.LCFI2:
 132              		.cfi_def_cfa_offset 20
 133              		@ sp needed
 134 009e F0BD     		pop	{r4, r5, r6, r7, pc}
 135              	.L4:
 136              		.align	2
 137              	.L3:
 138 00a0 00000240 		.word	1073872896
 139              		.cfi_endproc
 140              	.LFE124:
 142              		.section	.text.USB_OTG_BSP_EnableInterrupt,"ax",%progbits
 143              		.align	1
 144              		.global	USB_OTG_BSP_EnableInterrupt
 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 148              		.fpu fpv4-sp-d16
 150              	USB_OTG_BSP_EnableInterrupt:
 151              	.LFB125:
 135:USB/core/usb_bsp.c **** 
 136:USB/core/usb_bsp.c **** /**
 137:USB/core/usb_bsp.c **** * @brief  USB_OTG_BSP_EnableInterrupt
ARM GAS  /tmp/ccAh0Y0v.s 			page 6


 138:USB/core/usb_bsp.c **** *         Enabele USB Global interrupt
 139:USB/core/usb_bsp.c **** * @param  None
 140:USB/core/usb_bsp.c **** * @retval None
 141:USB/core/usb_bsp.c **** */
 142:USB/core/usb_bsp.c **** void USB_OTG_BSP_EnableInterrupt(USB_OTG_CORE_HANDLE *pdev) {
 152              		.loc 1 142 0
 153              		.cfi_startproc
 154              		@ args = 0, pretend = 0, frame = 8
 155              		@ frame_needed = 0, uses_anonymous_args = 0
 156              	.LVL11:
 157 0000 00B5     		push	{lr}
 158              	.LCFI3:
 159              		.cfi_def_cfa_offset 4
 160              		.cfi_offset 14, -4
 161 0002 83B0     		sub	sp, sp, #12
 162              	.LCFI4:
 163              		.cfi_def_cfa_offset 16
 143:USB/core/usb_bsp.c **** 	NVIC_InitTypeDef NVIC_InitStructure;
 144:USB/core/usb_bsp.c **** #ifdef USE_USB_OTG_FS
 145:USB/core/usb_bsp.c **** 	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);
 164              		.loc 1 145 0
 165 0004 4FF4C060 		mov	r0, #1536
 166              	.LVL12:
 167 0008 FFF7FEFF 		bl	NVIC_PriorityGroupConfig
 168              	.LVL13:
 146:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannel = OTG_FS_IRQn;  
 169              		.loc 1 146 0
 170 000c 4323     		movs	r3, #67
 171 000e 8DF80430 		strb	r3, [sp, #4]
 147:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = USB_VCP_NVIC_PRIORITY;
 172              		.loc 1 147 0
 173 0012 0123     		movs	r3, #1
 174 0014 8DF80530 		strb	r3, [sp, #5]
 148:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = USB_VCP_NVIC_SUBPRIORITY + 2;
 175              		.loc 1 148 0
 176 0018 0322     		movs	r2, #3
 177 001a 8DF80620 		strb	r2, [sp, #6]
 149:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 178              		.loc 1 149 0
 179 001e 8DF80730 		strb	r3, [sp, #7]
 150:USB/core/usb_bsp.c **** 	NVIC_Init(&NVIC_InitStructure);
 180              		.loc 1 150 0
 181 0022 01A8     		add	r0, sp, #4
 182 0024 FFF7FEFF 		bl	NVIC_Init
 183              	.LVL14:
 151:USB/core/usb_bsp.c **** #else
 152:USB/core/usb_bsp.c **** 	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);
 153:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannel = OTG_HS_IRQn;
 154:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = USB_VCP_NVIC_PRIORITY;
 155:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = USB_VCP_NVIC_SUBPRIORITY + 2;
 156:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 157:USB/core/usb_bsp.c **** 	NVIC_Init(&NVIC_InitStructure);
 158:USB/core/usb_bsp.c **** 
 159:USB/core/usb_bsp.c **** 	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);
 160:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannel = OTG_HS_EP1_OUT_IRQn;
 161:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = USB_VCP_NVIC_PRIORITY;
 162:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = USB_VCP_NVIC_SUBPRIORITY + 1;
ARM GAS  /tmp/ccAh0Y0v.s 			page 7


 163:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 164:USB/core/usb_bsp.c **** 	NVIC_Init(&NVIC_InitStructure);
 165:USB/core/usb_bsp.c **** 
 166:USB/core/usb_bsp.c **** 	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);
 167:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannel = OTG_HS_EP1_IN_IRQn;
 168:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = USB_VCP_NVIC_PRIORITY;
 169:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = USB_VCP_NVIC_SUBPRIORITY;
 170:USB/core/usb_bsp.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 171:USB/core/usb_bsp.c **** 	NVIC_Init(&NVIC_InitStructure); 
 172:USB/core/usb_bsp.c **** 
 173:USB/core/usb_bsp.c **** #endif
 174:USB/core/usb_bsp.c **** }
 184              		.loc 1 174 0
 185 0028 03B0     		add	sp, sp, #12
 186              	.LCFI5:
 187              		.cfi_def_cfa_offset 4
 188              		@ sp needed
 189 002a 5DF804FB 		ldr	pc, [sp], #4
 190              		.cfi_endproc
 191              	.LFE125:
 193              		.section	.text.USB_OTG_BSP_uDelay,"ax",%progbits
 194              		.align	1
 195              		.global	USB_OTG_BSP_uDelay
 196              		.syntax unified
 197              		.thumb
 198              		.thumb_func
 199              		.fpu fpv4-sp-d16
 201              	USB_OTG_BSP_uDelay:
 202              	.LFB126:
 175:USB/core/usb_bsp.c **** /**
 176:USB/core/usb_bsp.c **** * @brief  USB_OTG_BSP_uDelay
 177:USB/core/usb_bsp.c **** *         This function provides delay time in micro sec
 178:USB/core/usb_bsp.c **** * @param  usec : Value of delay required in micro sec
 179:USB/core/usb_bsp.c **** * @retval None
 180:USB/core/usb_bsp.c **** */
 181:USB/core/usb_bsp.c **** void USB_OTG_BSP_uDelay (const uint32_t usec) {
 203              		.loc 1 181 0
 204              		.cfi_startproc
 205              		@ args = 0, pretend = 0, frame = 0
 206              		@ frame_needed = 0, uses_anonymous_args = 0
 207              		@ link register save eliminated.
 208              	.LVL15:
 182:USB/core/usb_bsp.c **** 	uint32_t count = 0;
 183:USB/core/usb_bsp.c **** 	const uint32_t utime = (120 * usec / 7);
 209              		.loc 1 183 0
 210 0000 C0EB0010 		rsb	r0, r0, r0, lsl #4
 211              	.LVL16:
 212 0004 C300     		lsls	r3, r0, #3
 213 0006 064A     		ldr	r2, .L9
 214 0008 A2FB0312 		umull	r1, r2, r2, r3
 215 000c 9B1A     		subs	r3, r3, r2
 216 000e 02EB5302 		add	r2, r2, r3, lsr #1
 217 0012 9208     		lsrs	r2, r2, #2
 218              	.LVL17:
 182:USB/core/usb_bsp.c **** 	uint32_t count = 0;
 219              		.loc 1 182 0
 220 0014 0023     		movs	r3, #0
ARM GAS  /tmp/ccAh0Y0v.s 			page 8


 221              	.LVL18:
 222              	.L8:
 184:USB/core/usb_bsp.c **** 	
 185:USB/core/usb_bsp.c **** 	do
 186:USB/core/usb_bsp.c **** 	{
 187:USB/core/usb_bsp.c **** 		if ( ++count > utime ) {
 223              		.loc 1 187 0
 224 0016 0133     		adds	r3, r3, #1
 225              	.LVL19:
 226 0018 9A42     		cmp	r2, r3
 227 001a FCD2     		bcs	.L8
 188:USB/core/usb_bsp.c **** 			return ;
 189:USB/core/usb_bsp.c **** 		}
 190:USB/core/usb_bsp.c **** 	} while (1);
 191:USB/core/usb_bsp.c **** }
 228              		.loc 1 191 0
 229 001c 7047     		bx	lr
 230              	.L10:
 231 001e 00BF     		.align	2
 232              	.L9:
 233 0020 25499224 		.word	613566757
 234              		.cfi_endproc
 235              	.LFE126:
 237              		.section	.text.USB_OTG_BSP_mDelay,"ax",%progbits
 238              		.align	1
 239              		.global	USB_OTG_BSP_mDelay
 240              		.syntax unified
 241              		.thumb
 242              		.thumb_func
 243              		.fpu fpv4-sp-d16
 245              	USB_OTG_BSP_mDelay:
 246              	.LFB127:
 192:USB/core/usb_bsp.c **** 
 193:USB/core/usb_bsp.c **** 
 194:USB/core/usb_bsp.c **** /**
 195:USB/core/usb_bsp.c **** * @brief  USB_OTG_BSP_mDelay
 196:USB/core/usb_bsp.c **** *          This function provides delay time in milli sec
 197:USB/core/usb_bsp.c **** * @param  msec : Value of delay required in milli sec
 198:USB/core/usb_bsp.c **** * @retval None
 199:USB/core/usb_bsp.c **** */
 200:USB/core/usb_bsp.c **** void USB_OTG_BSP_mDelay (const uint32_t msec) {
 247              		.loc 1 200 0
 248              		.cfi_startproc
 249              		@ args = 0, pretend = 0, frame = 0
 250              		@ frame_needed = 0, uses_anonymous_args = 0
 251              	.LVL20:
 252 0000 08B5     		push	{r3, lr}
 253              	.LCFI6:
 254              		.cfi_def_cfa_offset 8
 255              		.cfi_offset 3, -8
 256              		.cfi_offset 14, -4
 201:USB/core/usb_bsp.c **** 	USB_OTG_BSP_uDelay(msec * 1000);   
 257              		.loc 1 201 0
 258 0002 4FF47A73 		mov	r3, #1000
 259 0006 03FB00F0 		mul	r0, r3, r0
 260              	.LVL21:
 261 000a FFF7FEFF 		bl	USB_OTG_BSP_uDelay
ARM GAS  /tmp/ccAh0Y0v.s 			page 9


 262              	.LVL22:
 263 000e 08BD     		pop	{r3, pc}
 264              		.cfi_endproc
 265              	.LFE127:
 267              		.section	.text.OTG_FS_WKUP_IRQHandler,"ax",%progbits
 268              		.align	1
 269              		.global	OTG_FS_WKUP_IRQHandler
 270              		.syntax unified
 271              		.thumb
 272              		.thumb_func
 273              		.fpu fpv4-sp-d16
 275              	OTG_FS_WKUP_IRQHandler:
 276              	.LFB128:
 202:USB/core/usb_bsp.c **** }
 203:USB/core/usb_bsp.c **** 
 204:USB/core/usb_bsp.c **** 
 205:USB/core/usb_bsp.c **** #ifdef USE_USB_OTG_FS
 206:USB/core/usb_bsp.c **** 
 207:USB/core/usb_bsp.c **** void OTG_FS_WKUP_IRQHandler(void) {
 277              		.loc 1 207 0
 278              		.cfi_startproc
 279              		@ args = 0, pretend = 0, frame = 0
 280              		@ frame_needed = 0, uses_anonymous_args = 0
 281 0000 08B5     		push	{r3, lr}
 282              	.LCFI7:
 283              		.cfi_def_cfa_offset 8
 284              		.cfi_offset 3, -8
 285              		.cfi_offset 14, -4
 208:USB/core/usb_bsp.c **** 	EXTI_ClearITPendingBit(EXTI_Line18);
 286              		.loc 1 208 0
 287 0002 4FF48020 		mov	r0, #262144
 288 0006 FFF7FEFF 		bl	EXTI_ClearITPendingBit
 289              	.LVL23:
 290 000a 08BD     		pop	{r3, pc}
 291              		.cfi_endproc
 292              	.LFE128:
 294              		.section	.text.OTG_FS_IRQHandler,"ax",%progbits
 295              		.align	1
 296              		.global	OTG_FS_IRQHandler
 297              		.syntax unified
 298              		.thumb
 299              		.thumb_func
 300              		.fpu fpv4-sp-d16
 302              	OTG_FS_IRQHandler:
 303              	.LFB129:
 209:USB/core/usb_bsp.c **** }
 210:USB/core/usb_bsp.c **** 
 211:USB/core/usb_bsp.c **** void OTG_FS_IRQHandler(void) {
 304              		.loc 1 211 0
 305              		.cfi_startproc
 306              		@ args = 0, pretend = 0, frame = 0
 307              		@ frame_needed = 0, uses_anonymous_args = 0
 308 0000 08B5     		push	{r3, lr}
 309              	.LCFI8:
 310              		.cfi_def_cfa_offset 8
 311              		.cfi_offset 3, -8
 312              		.cfi_offset 14, -4
ARM GAS  /tmp/ccAh0Y0v.s 			page 10


 212:USB/core/usb_bsp.c **** 	USBD_OTG_ISR_Handler (&USB_OTG_dev);
 313              		.loc 1 212 0
 314 0002 0248     		ldr	r0, .L17
 315 0004 FFF7FEFF 		bl	USBD_OTG_ISR_Handler
 316              	.LVL24:
 317 0008 08BD     		pop	{r3, pc}
 318              	.L18:
 319 000a 00BF     		.align	2
 320              	.L17:
 321 000c 00000000 		.word	USB_OTG_dev
 322              		.cfi_endproc
 323              	.LFE129:
 325              		.text
 326              	.Letext0:
 327              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 328              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 329              		.file 4 "F4_CORE/core_cm4.h"
 330              		.file 5 "USER/system_stm32f4xx.h"
 331              		.file 6 "USER/stm32f4xx.h"
 332              		.file 7 "FWLIB/inc/stm32f4xx_gpio.h"
 333              		.file 8 "FWLIB/inc/misc.h"
 334              		.file 9 "/usr/include/newlib/sys/lock.h"
 335              		.file 10 "/usr/include/newlib/sys/_types.h"
 336              		.file 11 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 337              		.file 12 "/usr/include/newlib/sys/reent.h"
 338              		.file 13 "USB/core/usb_regs.h"
 339              		.file 14 "USB/core/usb_core.h"
 340              		.file 15 "USB/core/usbd_cdc_core.h"
 341              		.file 16 "USB/core/usbd_desc.h"
 342              		.file 17 "USB/config/tm_stm32f4_usb_vcp.h"
 343              		.file 18 "FWLIB/inc/stm32f4xx_exti.h"
 344              		.file 19 "FWLIB/inc/stm32f4xx_rcc.h"
ARM GAS  /tmp/ccAh0Y0v.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usb_bsp.c
     /tmp/ccAh0Y0v.s:18     .text.USB_OTG_BSP_Init:0000000000000000 $t
     /tmp/ccAh0Y0v.s:25     .text.USB_OTG_BSP_Init:0000000000000000 USB_OTG_BSP_Init
     /tmp/ccAh0Y0v.s:138    .text.USB_OTG_BSP_Init:00000000000000a0 $d
     /tmp/ccAh0Y0v.s:143    .text.USB_OTG_BSP_EnableInterrupt:0000000000000000 $t
     /tmp/ccAh0Y0v.s:150    .text.USB_OTG_BSP_EnableInterrupt:0000000000000000 USB_OTG_BSP_EnableInterrupt
     /tmp/ccAh0Y0v.s:194    .text.USB_OTG_BSP_uDelay:0000000000000000 $t
     /tmp/ccAh0Y0v.s:201    .text.USB_OTG_BSP_uDelay:0000000000000000 USB_OTG_BSP_uDelay
     /tmp/ccAh0Y0v.s:233    .text.USB_OTG_BSP_uDelay:0000000000000020 $d
     /tmp/ccAh0Y0v.s:238    .text.USB_OTG_BSP_mDelay:0000000000000000 $t
     /tmp/ccAh0Y0v.s:245    .text.USB_OTG_BSP_mDelay:0000000000000000 USB_OTG_BSP_mDelay
     /tmp/ccAh0Y0v.s:268    .text.OTG_FS_WKUP_IRQHandler:0000000000000000 $t
     /tmp/ccAh0Y0v.s:275    .text.OTG_FS_WKUP_IRQHandler:0000000000000000 OTG_FS_WKUP_IRQHandler
     /tmp/ccAh0Y0v.s:295    .text.OTG_FS_IRQHandler:0000000000000000 $t
     /tmp/ccAh0Y0v.s:302    .text.OTG_FS_IRQHandler:0000000000000000 OTG_FS_IRQHandler
     /tmp/ccAh0Y0v.s:321    .text.OTG_FS_IRQHandler:000000000000000c $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
RCC_AHB1PeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
RCC_APB2PeriphClockCmd
RCC_AHB2PeriphClockCmd
NVIC_PriorityGroupConfig
NVIC_Init
EXTI_ClearITPendingBit
USBD_OTG_ISR_Handler
USB_OTG_dev
